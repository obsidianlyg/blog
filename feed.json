{
    "version": "https://jsonfeed.org/version/1",
    "title": "回梦游春",
    "subtitle": "是小悠呀",
    "icon": "https://obsidianlyg.github.io/images/favicon.ico",
    "description": "一个条懒得翻身的咸鱼",
    "home_page_url": "https://obsidianlyg.github.io",
    "items": [
        {
            "id": "https://obsidianlyg.github.io/Note/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95/",
            "url": "https://obsidianlyg.github.io/Note/%E7%A7%BB%E5%8A%A8%E5%BA%94%E7%94%A8%E6%B5%8B%E8%AF%95/",
            "title": "移动应用测试",
            "date_published": "2022-01-20T16:14:39.000Z",
            "content_html": "<h1 id=\"移动应用测试\"><a class=\"anchor\" href=\"#移动应用测试\">#</a> 移动应用测试</h1>\n<h2 id=\"查看包名\"><a class=\"anchor\" href=\"#查看包名\">#</a> 查看包名：</h2>\n<ul>\n<li>\n<p>方案一：如果你应用已经安装在手机上了，可以直接打开手机上该应用，进入到你要操作的界面，然后执行 (<strong>注：一定要用 cmd 运行，powershell 会报参数不正确</strong>):</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>adb shell dumpsys activity recents <span class=\"token operator\">|</span> <span class=\"token function\">find</span> <span class=\"token string\">\"intent=&#123;\"</span></pre></td></tr></table></figure><p>会出现如下信息：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.<span class=\"token environment constant\">HOME</span><span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10000000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>com.android.launcher3/.Launcher<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10000000 <span class=\"token assign-left variable\">pkg</span><span class=\"token operator\">=</span>tv.danmaku.bili <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>tv.danmaku.bili/.MainActivityV2<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10200000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>com.android.flysilkworm/.app.activity.FrameworkActivity<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10200000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>com.android.settings/.Settings<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10800000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>io.appium.settings/.Settings<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>System3<span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span>adb shell dumpsys activity recents <span class=\"token operator\">|</span> <span class=\"token function\">find</span> <span class=\"token string\">\"intent=&#123;\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10200000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>tv.danmaku.bili/.MainActivityV2<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.<span class=\"token environment constant\">HOME</span><span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10000000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>com.android.launcher3/.Launcher<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10200000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>com.android.flysilkworm/.app.activity.FrameworkActivity<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10200000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>com.android.settings/.Settings<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token assign-left variable\">intent</span><span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>act<span class=\"token operator\">=</span>android.intent.action.MAIN <span class=\"token assign-left variable\">cat</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">flg</span><span class=\"token operator\">=</span>0x10800000 <span class=\"token assign-left variable\">cmp</span><span class=\"token operator\">=</span>io.appium.settings/.Settings<span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>其中 cmp=tv.danmaku.bili/.MainActivityV2 就是 / 之前是包名（appPackage），之后是 appActivity</p>\n</li>\n<li>\n<p>方案二：如果是已有 apk 在电脑上</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>aapt dump badging D:<span class=\"token punctuation\">\\</span>Desktop<span class=\"token punctuation\">\\</span>软测<span class=\"token punctuation\">\\</span>iBiliPlayer-bili.apk <span class=\"token operator\">|</span> <span class=\"token function\">find</span> <span class=\"token string\">\"package\"</span></pre></td></tr></table></figure><figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>aapt dump badging D<span class=\"token punctuation\">:</span>\\Desktop\\软测\\iBiliPlayer<span class=\"token operator\">-</span>bili<span class=\"token punctuation\">.</span>apk <span class=\"token operator\">|</span> find <span class=\"token string\">\"launchable-activity\"</span></pre></td></tr></table></figure><p>会出现如下信息：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>、</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>System3<span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span>aapt dump badging D:<span class=\"token punctuation\">\\</span>Desktop<span class=\"token punctuation\">\\</span>软测<span class=\"token punctuation\">\\</span>iBiliPlayer-bili.apk <span class=\"token operator\">|</span> <span class=\"token function\">find</span> <span class=\"token string\">\"package\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>package: <span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span><span class=\"token string\">'tv.danmaku.bili'</span> <span class=\"token assign-left variable\">versionCode</span><span class=\"token operator\">=</span><span class=\"token string\">'6430500'</span> <span class=\"token assign-left variable\">versionName</span><span class=\"token operator\">=</span><span class=\"token string\">'6.43.0'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">2</span>、 </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>System3<span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span>aapt dump badging D:<span class=\"token punctuation\">\\</span>Desktop<span class=\"token punctuation\">\\</span>软测<span class=\"token punctuation\">\\</span>iBiliPlayer-bili.apk <span class=\"token operator\">|</span> <span class=\"token function\">find</span> <span class=\"token string\">\"launchable-activity\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>launchable-activity: <span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span><span class=\"token string\">'tv.danmaku.bili.MainActivityV2'</span>  <span class=\"token assign-left variable\">label</span><span class=\"token operator\">=</span><span class=\"token string\">''</span> <span class=\"token assign-left variable\">icon</span><span class=\"token operator\">=</span><span class=\"token string\">''</span></pre></td></tr></table></figure><p>1、的 name 是包名，2、的 name 是 appActivity（tv.danmaku.bili.MainActivityV2，</p>\n<p>可以省略 tv.danmaku.bili）</p>\n</li>\n<li>\n<p>方案三：算是方案一的进阶吧 (推荐)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>adb shell dumpsys window w <span class=\"token operator\">|</span>findstr <span class=\"token punctuation\">\\</span>/ <span class=\"token operator\">|</span>findstr <span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 或者</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>adb shell dumpsys activity activities <span class=\"token operator\">|</span> findstr mFocusedActivity</pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"在ui-automator-viewerbat中运行一次python就连不上的问题\"><a class=\"anchor\" href=\"#在ui-automator-viewerbat中运行一次python就连不上的问题\">#</a> 在 UI Automator Viewer.bat 中运行一次 Python 就连不上的问题：</h2>\n<p><strong>特别提示：如果按照 Python 模板写，按 q 退出可以避免连不上的问题，相关代码如下</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>q <span class=\"token operator\">=</span> input<span class=\"token punctuation\">(</span><span class=\"token string\">'input q to quit'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span> q <span class=\"token operator\">==</span> <span class=\"token string\">'q'</span><span class=\"token builtin class-name\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    driver.quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>方案一：重启模拟器</p>\n<p>方案二：重启 adb（推荐方案二，因为方案一很慢 (￣_￣|||)）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>adb kill-server <span class=\"token operator\">&amp;</span> adb start-server</pre></td></tr></table></figure><p>方案三：appium 重连（原因：运行后 appium 占用指定端口与本身需要的端口冲突导致）</p>\n<h2 id=\"python中测试基本语法\"><a class=\"anchor\" href=\"#python中测试基本语法\">#</a> <strong>Python 中测试基本语法</strong>：</h2>\n<p>参考语法文档：<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5ieWh5Lm5ldC90dXQvYXV0by9hcHBpdW0vMDIv\">http://www.byhy.net/tut/auto/appium/02/</span></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 根据 id</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>driver<span class=\"token punctuation\">.</span>find_elements_by_id<span class=\"token punctuation\">(</span><span class=\"token string\">\"android:id/button2\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#既可以找多个元素也可以找单个元素</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 点击事件</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>driver<span class=\"token punctuation\">.</span>find_element_by_id<span class=\"token punctuation\">(</span><span class=\"token string\">\"cn.xuexi.android:id/comm_head_xuexi_score\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># tap 点按（bounds 属性，停留的时间）</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>driver<span class=\"token punctuation\">.</span>tap<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">850</span><span class=\"token punctuation\">,</span><span class=\"token number\">1080</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token number\">300</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 发送文字事件（resource-id）</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>sbox <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_element_by_id<span class=\"token punctuation\">(</span><span class=\"token string\">'search_src_text'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>sbox<span class=\"token punctuation\">.</span>send_keys<span class=\"token punctuation\">(</span><span class=\"token string\">'Doyoudo'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>driver<span class=\"token punctuation\">.</span>press_keycode<span class=\"token punctuation\">(</span>AndroidKey<span class=\"token punctuation\">.</span>ENTER<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 根据 class 元素</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>driver<span class=\"token punctuation\">.</span>find_elements_by_class_name<span class=\"token punctuation\">(</span><span class=\"token string\">'android.widget.TextView'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 根据 ACCESSIBILITY ID（content-desc 属性）</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>driver<span class=\"token punctuation\">.</span>find_element_by_accessibility_id<span class=\"token punctuation\">(</span><span class=\"token string\">'找人'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 根据 Xpath</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>driver<span class=\"token punctuation\">.</span>find_element_by_xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'//ele1/ele2[@attr=\"value\"]'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># 模拟滑动</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>driver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>start_x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">,</span> start_y<span class=\"token operator\">=</span>y1<span class=\"token punctuation\">,</span> end_x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">,</span> end_y<span class=\"token operator\">=</span>y2<span class=\"token punctuation\">,</span> duration<span class=\"token operator\">=</span><span class=\"token number\">800</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 按键</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\"># 输入回车键，确定搜索</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    driver<span class=\"token punctuation\">.</span>press_keycode<span class=\"token punctuation\">(</span>AndroidKey<span class=\"token punctuation\">.</span>ENTER<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\"># 返回</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    driver<span class=\"token punctuation\">.</span>press_keycode<span class=\"token punctuation\">(</span>AndroidKey<span class=\"token punctuation\">.</span>BACK<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># 隐式等待 设置缺省等待 10 秒时间（不推荐）</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>driver<span class=\"token punctuation\">.</span>implicitly_wait<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># 强制等待 等 5 秒（推荐）</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># 显示等待 (有点多直接看链接吧)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>blog<span class=\"token punctuation\">.</span>csdn<span class=\"token punctuation\">.</span>net<span class=\"token operator\">/</span>sinat_41774836<span class=\"token operator\">/</span>article<span class=\"token operator\">/</span>details<span class=\"token operator\">/</span><span class=\"token number\">88965281</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># 打开通知栏，返回直接 BACK 键</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>driver<span class=\"token punctuation\">.</span>open_notifications<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\"># 截屏手机，并且下载到指定目录中</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>os<span class=\"token punctuation\">.</span>system<span class=\"token punctuation\">(</span><span class=\"token string\">'adb shell screencap /sdcard/screen3.png &amp;&amp; adb pull /sdcard/screen3.png'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><a href=\"https://blog.csdn.net/Asaasa1/article/details/109383652\"><strong>关于 TouchAction 类与 MultiAction 类的相关用法</strong></a> (九宫格解锁可以用 touchaction)</p>\n<p><strong>联合查询:</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># xpath 方式： 可以联合 @resource-id 属性和 @text 文本属性来下定位</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>driver<span class=\"token punctuation\">.</span>find_element_by_xpath<span class=\"token punctuation\">(</span><span class=\"token string\">\"//*[@resource-id='com.taobao.taobao:id/tv_scan_text'][@text='扫一扫']\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 内嵌 Java 方式： 后面可以一直.name () 这种方式添加（调用 UI Automator API 的 java 代码，实现最为直接的自动化控制。）</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>code <span class=\"token operator\">=</span> <span class=\"token string\">'new UiSelector().text(\"追番\").resourceId(\"tv.danmaku.bili:id/tab_title\")'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ele <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_element_by_android_uiautomator<span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ele<span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\"># 具体 java 代码 来自谷歌 Android 文档：</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>developer<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>training<span class=\"token operator\">/</span>testing<span class=\"token operator\">/</span>ui<span class=\"token operator\">-</span>automator</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">#常用列表</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        text<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">)</span>         <span class=\"token comment\"># 对应 text</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        resourceId<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">)</span>   <span class=\"token comment\"># 对应 resource-id</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        description<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 对应 content-desc</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        className<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">)</span>    <span class=\"token comment\"># 对应 class</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        index<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>           <span class=\"token comment\"># 对应 index</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        instance<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>        <span class=\"token comment\"># 是匹配的结果所有元素里面的第几个元素</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        textContains<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 根据文本包含什么字符串 (与 text 连用)</span></pre></td></tr></table></figure><p><strong>注：</strong></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ele <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_element_by_android_uiautomator<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token string\">'new UiSelector(). className(\" android.widget. TextView\"). textContains(\"白月黑羽\").instance(4)'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ele<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>等同于下方代码</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>eles <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_elements_by_android_uiautomator<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token string\">'new UiSelector(). className(\"android.widget. TextView\"). textContains(\"白月黑羽\")'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>eles<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"python基础模板python的第三方库appium-python-client\"><a class=\"anchor\" href=\"#python基础模板python的第三方库appium-python-client\">#</a> <strong>Python 基础模板</strong>（Python 的第三方库 appium-python-client）</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> appium <span class=\"token keyword\">import</span> webdriver</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> appium<span class=\"token punctuation\">.</span>webdriver<span class=\"token punctuation\">.</span>extensions<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>nativekey <span class=\"token keyword\">import</span> AndroidKey</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>desired_caps <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">'platformName'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Android'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 被测手机是安卓</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'platformVersion'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'5'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 手机安卓版本</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">'deviceName'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'HUAWEI'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 设备名，安卓手机可以随意填写</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">'appPackage'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'tv.danmaku.bili'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 启动 APP Package 名称</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">'appActivity'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'.MainActivityV2'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 启动 Activity 名称</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">'unicodeKeyboard'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 使用自带输入法，输入中文时填 True</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token string\">'resetKeyboard'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 执行完程序恢复原来输入法</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token string\">'noReset'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\"># 不要重置 App</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token string\">'newCommandTimeout'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token string\">'automationName'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'UiAutomator2'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\"># 'app': r'd:\\apk\\bili.apk',</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\"># 连接 Appium Server，初始化自动化环境</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    driver <span class=\"token operator\">=</span> webdriver<span class=\"token punctuation\">.</span>Remote<span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:4723/wd/hub'</span><span class=\"token punctuation\">,</span> desired_caps<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\"># 设置缺省等待时间</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    driver<span class=\"token punctuation\">.</span>implicitly_wait<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token comment\"># 青少年保护</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    iknow <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_elements_by_id<span class=\"token punctuation\">(</span><span class=\"token string\">\"text3\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">if</span> iknow<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        iknow<span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    driver<span class=\"token punctuation\">.</span>find_element_by_id<span class=\"token punctuation\">(</span><span class=\"token string\">\"expand_search\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    sbox <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_element_by_id<span class=\"token punctuation\">(</span><span class=\"token string\">'search_src_text'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    sbox<span class=\"token punctuation\">.</span>send_keys<span class=\"token punctuation\">(</span><span class=\"token string\">'Doyoudo'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    driver<span class=\"token punctuation\">.</span>press_keycode<span class=\"token punctuation\">(</span>AndroidKey<span class=\"token punctuation\">.</span>ENTER<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    eles <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>find_elements_by_id<span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token keyword\">for</span> ele <span class=\"token keyword\">in</span> eles<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ele<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    ele<span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    q <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input q to quit'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">if</span> q <span class=\"token operator\">==</span> <span class=\"token string\">'q'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        driver<span class=\"token punctuation\">.</span>quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> err<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'An exception happened: '</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    q <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error q to quit'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token keyword\">if</span> q <span class=\"token operator\">==</span> <span class=\"token string\">'q'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        driver<span class=\"token punctuation\">.</span>quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"自定义python模板\"><a class=\"anchor\" href=\"#自定义python模板\">#</a> 自定义 Python 模板</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">import</span> <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>from appium <span class=\"token function\">import</span> webdriver</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>from appium.webdriver.common.touch_action <span class=\"token function\">import</span> TouchAction</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>from appium.webdriver.extensions.android.nativekey <span class=\"token function\">import</span> AndroidKey</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>desired_caps <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">'platformName'</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">'Android'</span>,</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">'platformVersion'</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">'7'</span>,</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">'deviceName'</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">'HUAWEI'</span>,</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token string\">'appPackage'</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">'tv.danmaku.bili'</span>,  <span class=\"token comment\"># adb shell dumpsys activity activities | findstr mFocusedActivity</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token string\">'appActivity'</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">'.MainActivityV2'</span>,  <span class=\"token comment\"># 启动 Activity 名称</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token string\">'unicodeKeyboard'</span><span class=\"token builtin class-name\">:</span> True,</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token string\">'resetKeyboard'</span><span class=\"token builtin class-name\">:</span> True,</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token string\">'noReset'</span><span class=\"token builtin class-name\">:</span> True,</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token string\">'newCommandTimeout'</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">6000</span>,</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token string\">'automationName'</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">'UiAutomator2'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>def id<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> driver.find_element_by_id<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>def ids<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> driver.find_elements_by_id<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>def xpath<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> driver.find_element_by_xpath<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>def xpaths<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> driver.find_elements_by_xpath<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>def desc<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> driver.find_element_by_accessibility_id<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>def class_names<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> driver.find_elements_by_class_name<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>def tap<span class=\"token punctuation\">(</span>a, b, c, d<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token builtin class-name\">return</span> driver.tap<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>a, b<span class=\"token punctuation\">)</span>, <span class=\"token punctuation\">(</span>c, d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>, <span class=\"token number\">100</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>def back<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    driver.press_keycode<span class=\"token punctuation\">(</span>AndroidKey<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.BACK<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>def enter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    driver.press_keycode<span class=\"token punctuation\">(</span>AndroidKey<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.ENTER<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>def move<span class=\"token punctuation\">(</span>x, y, m, n<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    driver.swipe<span class=\"token punctuation\">(</span>start_x<span class=\"token operator\">=</span>x, <span class=\"token assign-left variable\">start_y</span><span class=\"token operator\">=</span>y, <span class=\"token assign-left variable\">end_x</span><span class=\"token operator\">=</span>m, <span class=\"token assign-left variable\">end_y</span><span class=\"token operator\">=</span>n, <span class=\"token assign-left variable\">duration</span><span class=\"token operator\">=</span><span class=\"token number\">800</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>def long_press<span class=\"token punctuation\">(</span>el1, el2<span class=\"token punctuation\">)</span>:</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    action <span class=\"token operator\">=</span> TouchAction<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    action.long_press<span class=\"token punctuation\">(</span>el1<span class=\"token punctuation\">)</span>.move_to<span class=\"token punctuation\">(</span>el2<span class=\"token punctuation\">)</span>.release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.perform<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>try:</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    driver <span class=\"token operator\">=</span> webdriver.Remote<span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:4723/wd/hub'</span>, desired_caps<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    driver.implicitly_wait<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    time.sleep<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    q <span class=\"token operator\">=</span> input<span class=\"token punctuation\">(</span><span class=\"token string\">'input q to quit\\n'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token keyword\">if</span> q <span class=\"token operator\">==</span> <span class=\"token string\">'q'</span><span class=\"token builtin class-name\">:</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>        driver.quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>except Exception as err:</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    print<span class=\"token punctuation\">(</span><span class=\"token string\">'An exception happened: '</span> + str<span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">))</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    q <span class=\"token operator\">=</span> input<span class=\"token punctuation\">(</span><span class=\"token string\">'error q to quit'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token keyword\">if</span> q <span class=\"token operator\">==</span> <span class=\"token string\">'q'</span><span class=\"token builtin class-name\">:</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        driver.quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"appium测试ui界面模板就是python中的desired_caps注这里内部必须都为双引号\"><a class=\"anchor\" href=\"#appium测试ui界面模板就是python中的desired_caps注这里内部必须都为双引号\">#</a> appium 测试 ui 界面模板 (就是 python 中的 desired_caps）<strong>注：这里内部必须都为双引号</strong></h2>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token property\">\"platformName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Android\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token property\">\"platformVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"57\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token property\">\"deviceName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HUAWEI\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"appPackage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cn.xuexi.android\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"appActivity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"com.alibaba.android.rimet.biz.SplashActivity\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token property\">\"unicodeKeyboard\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token property\">\"resetKeyboard\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token property\">\"noReset\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token property\">\"newCommandTimeout\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token property\">\"automationName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"UiAutomator2\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"adb基本命令\"><a class=\"anchor\" href=\"#adb基本命令\">#</a> adb 基本命令</h2>\n<ul>\n<li>\n<p><strong>先附上参考文档：</strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cud2FuYW5kcm9pZC5jb20vYmxvZy9zaG93LzIzMTA=\">https://www.wanandroid.com/blog/show/2310</span></p>\n</li>\n<li>\n<p><strong>查看当前连接设备</strong></p>\n<p><code>adb devices</code></p>\n</li>\n<li>\n<p><strong>如果发现多个设备</strong></p>\n<p><code>adb -s 设备号 其他指令</code></p>\n</li>\n<li>\n<p><strong>查看顶部 Activity</strong></p>\n<ul>\n<li>\n<p>windows 环境下:</p>\n<p><code>adb shell dumpsys activity | findstr &quot;mFocusedActivity&quot;</code></p>\n</li>\n<li>\n<p>Linux、Mac 环境下：</p>\n<p><code>adb shell dumpsys activity | grep &quot;mFocusedActivity&quot;</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>查看日志</strong></p>\n<p><code>adb logcat</code></p>\n</li>\n<li>\n<p><strong>安装 apk 文件</strong></p>\n<p><code>adb install xxx.apk</code></p>\n<p>推荐使用覆盖安装:</p>\n<p><code>adb install -r xxx.apk</code></p>\n</li>\n<li>\n<p><strong>卸载 App</strong></p>\n<p><code>adb uninstall com.zhy.app</code></p>\n<p>如果想要保留数据，则</p>\n<p><code>adb uninstall -k com.zhy.app</code></p>\n</li>\n<li>\n<p><strong>传递文件</strong></p>\n<ul>\n<li>\n<p>往手机 SDCard 传递文件</p>\n<p><code>adb push 文件名 手机端SDCard路径</code></p>\n</li>\n<li>\n<p>从手机端下载文件</p>\n<p><code>adb pull /sdcard/xxx.txt</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>启动 Activity</strong></p>\n<p><code>adb shell am start 包名/完整Activity路径</code></p>\n</li>\n<li>\n<p><strong>清除 APP 数据</strong></p>\n<p><code>adb shell pm clear com.example.packagename</code></p>\n<p><strong>注：该命令清除掉 APP 的缓存，还能把 APP 的数据给清空</strong></p>\n</li>\n<li>\n<p><strong>查看所有 App 的名称</strong></p>\n<p><code>adb shell pm list packages</code></p>\n<p>注：该命令可以查看手机上的 APP 名称。可以在后面加上 -f ，这样还能显示该 APP 的路径，即： <code>adb shell pm list packages -f</code>  或者  <code>adb shell pm path &lt;PACKAGE&gt;</code></p>\n<p><strong>列出第三方应用</strong>： <code>adb shell pm list packages -3</code></p>\n</li>\n</ul>\n",
            "tags": [
                "Python"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/arch%E6%8D%A2%E6%BA%90/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/arch%E6%8D%A2%E6%BA%90/",
            "title": "arch换源",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"arch换源\"><a class=\"anchor\" href=\"#arch换源\">#</a> arch 换源</h1>\n<p>sudo wget -O /etc/pacman.d/mirrorlist <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYXJjaGxpbnV4Lm9yZy9taXJyb3JsaXN0L2FsbC8=\">https://www.archlinux.org/mirrorlist/all/</span><br />\nsudo vim  /etc/pacman.d/mirrorlist<br />\n# 进入后对 china 底下的注释删除<br />\n pacman -Syy<br />\npacman -S pacman-mirrorlist# 可以不写</p>\n<p>#注意 aur 助手 yay，yaourt 等需要添加官方源</p>\n<pre><code>然后很多教程在这里配置就结束了，就遇到一些问题，比如我们安装某些软件的时候会提示gpg签名错误损坏等这些，这个是因为没有导入key的原因，我们需要导入一下GPG KEY，具体操作就是\n安装archlinuxcn-keyring 包导入 GPG key。\n\n</code></pre>\n<p><code># sudo pacman -S archlinuxcn-keyring</code></p>\n<p>中文社区仓库</p>\n<p>编辑 /etc/pacman.conf 配置文件</p>\n<p>sudo vim /etc/pacman.conf</p>\n<p>添加源</p>\n<p>[archlinuxcn]</p>\n<p>#The Chinese Arch Linux communities packages.</p>\n<p>#SigLevel = Optional TrustedOnly</p>\n<p>#SigLevel = Optional TrustAll</p>\n<p>#官方源</p>\n<p>Server   = [<span class=\"exturl\" data-url=\"aHR0cDovL3JlcG8uYXJjaGxpbnV4Y24ub3JnLw==\">http://repo.archlinuxcn.org/</span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>r</mi><mi>c</mi><mi>h</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>h</mi><mi>t</mi><mi>t</mi><mi>p</mi><mo>:</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">/</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>o</mi><mi mathvariant=\"normal\">.</mi><mi>a</mi><mi>r</mi><mi>c</mi><mi>h</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>x</mi><mi>c</mi><mi>n</mi><mi mathvariant=\"normal\">.</mi><mi>o</mi><mi>r</mi><mi>g</mi><mi mathvariant=\"normal\">/</mi></mrow><annotation encoding=\"application/x-tex\">arch](http://repo.archlinuxcn.org/</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">h</span><span class=\"mclose\">]</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">/</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">o</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\">/</span></span></span></span>arch)</p>\n<p>#163 源</p>\n<p>Server = [<span class=\"exturl\" data-url=\"aHR0cDovL21pcnJvcnMuMTYzLmNvbS9hcmNobGludXgtY24v\">http://mirrors.163.com/archlinux-cn/</span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>r</mi><mi>c</mi><mi>h</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>h</mi><mi>t</mi><mi>t</mi><mi>p</mi><mo>:</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">/</mi><mi>m</mi><mi>i</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mn>163.</mn><mi>c</mi><mi>o</mi><mi>m</mi><mi mathvariant=\"normal\">/</mi><mi>a</mi><mi>r</mi><mi>c</mi><mi>h</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>x</mi><mo>−</mo><mi>c</mi><mi>n</mi><mi mathvariant=\"normal\">/</mi></mrow><annotation encoding=\"application/x-tex\">arch](http://mirrors.163.com/archlinux-cn/</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">h</span><span class=\"mclose\">]</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">/</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">m</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">/</span></span></span></span>arch)</p>\n<p>#清华大学</p>\n<p>Server = [<span class=\"exturl\" data-url=\"aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2FyY2hsaW51eGNuLw==\">https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/</span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>r</mi><mi>c</mi><mi>h</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>h</mi><mi>t</mi><mi>t</mi><mi>p</mi><mi>s</mi><mo>:</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">/</mi><mi>m</mi><mi>i</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi>u</mi><mi>n</mi><mi>a</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi>h</mi><mi>u</mi><mi>a</mi><mi mathvariant=\"normal\">.</mi><mi>e</mi><mi>d</mi><mi>u</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>n</mi><mi mathvariant=\"normal\">/</mi><mi>a</mi><mi>r</mi><mi>c</mi><mi>h</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>u</mi><mi>x</mi><mi>c</mi><mi>n</mi><mi mathvariant=\"normal\">/</mi></mrow><annotation encoding=\"application/x-tex\">arch](https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">h</span><span class=\"mclose\">]</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">/</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">a</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">a</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">u</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">/</span></span></span></span>arch)</p>\n<p><strong>以上源只能添加一个</strong></p>\n<p>yay 用户（选择性换源）</p>\n<p>执行以下命令修改 aururl :</p>\n<p>yay --aururl &quot;<span class=\"exturl\" data-url=\"aHR0cHM6Ly9hdXIudHVuYS50c2luZ2h1YS5lZHUuY24v\">https://aur.tuna.tsinghua.edu.cn</span>&quot; --save</p>\n<p>修改的配置文件 (如果上方不行就去配置文件改成英文引号）</p>\n<p>vim ~/.config/yay/config.json</p>\n<p>查看配置</p>\n<p>yay -P -g</p>\n<p>手动更改源排名</p>\n<p>sudo pacman-mirrors -i -c China -m rank</p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/ArcoLinux/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/ArcoLinux/",
            "title": "arch衍生版arcolinux",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"arcolinux\"><a class=\"anchor\" href=\"#arcolinux\">#</a> ArcoLinux</h1>\n<p>super+shfit+a，程序启动窗口</p>\n<p>super+Q，退出</p>\n<p>super + 鼠标单击，可以拖动窗口</p>\n<p>super+Enter，打开默认 urxvt 终端模拟器，附带三个，termite,xfec 自带终端和 alacritt</p>\n<p>Super+Space，修改当前窗口布局</p>\n<p>软件包管理工具有 pacman,pamac,yay</p>\n<p><img data-src=\"https://gitee.com/obsidianlyg/gallery/raw/master/image//2021-08-10_08-27.png\" alt=\"ArcoLinux%20dbdbb4c808024da189a08d644815664f/2021-08-10_08-27.png\" /></p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/WallPaper/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/WallPaper/",
            "title": "壁纸网站",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"wallpapers\"><a class=\"anchor\" href=\"#wallpapers\">#</a> WallPapers</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3dhbGxoYXZlbi5jYy8=\">wallhaven.cc</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3dhbGxwYXBlcnMubmV0Lw==\">wallpapers.net</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2ZsaWNrci5jb20v\">flickr.com</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2ltZ3VyLmNvbS8=\">imgur.com</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2RldmlhbnRhcnQuY29tLw==\">deviantart.com</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2ludGVyZmFjZWxpZnQuY29tLw==\">interfacelift.com</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3ZsYWRzdHVkaW8uY29tLw==\">vladstudio.com</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2RldmlhbnRhcnQubmV0Lw==\">deviantart.net</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2ltYWdlc2hhY2suY29tLw==\">imageshack.com</span></p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/Linux%E9%80%89%E6%8B%A9%E5%AD%97%E4%BD%93/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/Linux%E9%80%89%E6%8B%A9%E5%AD%97%E4%BD%93/",
            "title": "Linux选择字体",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"选择字体\"><a class=\"anchor\" href=\"#选择字体\">#</a> 选择字体</h1>\n<p>vim ~/.config/fontconfig/fonts.conf</p>\n<p>在 family 中设置字体的名称（也就是 archwiki 中所说的名字）</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>alias</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>family</span><span class=\"token punctuation\">></span></span>serif<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>family</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>prefer</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>family</span><span class=\"token punctuation\">></span></span>你喜欢的拉丁衬线字体名称<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>family</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>family</span><span class=\"token punctuation\">></span></span>你的中文衬线字体名称<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>family</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>prefer</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>alias</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>修改字体配置后可以用 fc-match -a monospace | head 检查字体选择设置是否正确.</p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/ranger%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/ranger%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/",
            "title": "ranger常用命令",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"ranger常用命令\"><a class=\"anchor\" href=\"#ranger常用命令\">#</a> ranger 常用命令</h1>\n<p>生成配置文件</p>\n<p>ranger --copy-config=all</p>\n<p>在 rc.conf 中 map f console scout -ftsea% space 搜索指定文件并显示</p>\n<p>shift+s 进入当前文件位置</p>\n<p><strong>导航</strong></p>\n<ul>\n<li>f = 向下翻页</li>\n<li>b = 向上翻页</li>\n<li>gg = 转到列表顶部</li>\n<li>G = 转到列表底部</li>\n<li>H = 返回导航历史记录</li>\n<li>h = 移至上级目录</li>\n<li>J = 下一页 1/2 页</li>\n<li>J = 下移</li>\n<li>K = 上一页 1/2 页</li>\n<li>k = 向上移动</li>\n<li>L = 前进浏览历史记录</li>\n<li>Q = 退出</li>\n</ul>\n<p><strong>处理文件</strong></p>\n<ul>\n<li>我… 显示文件</li>\n<li>E | I… 编辑文件</li>\n<li>r… 使用所选程序打开文件</li>\n<li>cw… 重命名文件</li>\n<li>/… 搜索文件 (n | p 跳至下一个 / 上一个匹配项)      + 部分文件名 + tab 可以直接跳转</li>\n<li>dd .. 将文件标记为剪切</li>\n<li>ud… 未切割</li>\n<li>p… 粘贴文件</li>\n<li>yy .. 复制 / 粘贴文件</li>\n<li>zh… 显示隐藏文件</li>\n<li>= 选择当前文件</li>\n<li>：delete = 删除所选文件</li>\n<li>：mkdir… 创建目录</li>\n<li>：touch… 创建一个文件</li>\n<li>：rename… 重命名文件</li>\n</ul>\n<p><a href=\"%5Bhttps://blog.csdn.net/HideOnLie/article/details/103719698?ops_request_misc=%7B%22request%5Fid%22%3A%22162843197416780265431441%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=162843197416780265431441&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-3-103719698.first_rank_v2_pc_rank_v29&amp;utm_term=ranger%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87&amp;spm=1018.2226.3001.4187%5D(https://blog.csdn.net/HideOnLie/article/details/103719698?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162843197416780265431441%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=162843197416780265431441&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-3-103719698.first_rank_v2_pc_rank_v29&amp;utm_term=ranger%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87&amp;spm=1018.2226.3001.4187)\">相关链接</a></p>\n<p>显示图标的 ico 插件： <code>git clone https://github.com/alexanderjeurissen/ranger_devicons ~/.config/ranger/plugins/ranger_devicons</code></p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/snap%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/snap%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/",
            "title": "snap的安装与使用",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"snap的安装与使用\"><a class=\"anchor\" href=\"#snap的安装与使用\">#</a> snap 的安装与使用</h1>\n<h3 id=\"依次执行\"><a class=\"anchor\" href=\"#依次执行\">#</a> <strong>依次执行</strong></h3>\n<h3 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> <strong>安装</strong></h3>\n<p><code>sudo pacman -S snapd</code></p>\n<h3 id=\"启动并设置开启启动并立即启动\"><a class=\"anchor\" href=\"#启动并设置开启启动并立即启动\">#</a> <strong>启动并设置开启启动并立即启动</strong></h3>\n<p><code>sudo systemctl enable --now snapd.socket</code></p>\n<h3 id=\"添加-snap-的命令\"><a class=\"anchor\" href=\"#添加-snap-的命令\">#</a> <strong>添加 snap 的命令</strong></h3>\n<p><code>sudo ln -s /var/lib/snapd/snap /snap</code></p>\n<h3 id=\"安装完了-snap-后如果你用的是桌面系统那么你可以下载安装-snap-store-来进行-gui-界面管理\"><a class=\"anchor\" href=\"#安装完了-snap-后如果你用的是桌面系统那么你可以下载安装-snap-store-来进行-gui-界面管理\">#</a> <strong>安装完了 snap 后，如果你用的是桌面系统，那么你可以下载安装 snap store 来进行 GUI 界面管理</strong></h3>\n<p><code>sudo snap install snap-store</code></p>\n<p>目前 snap 官方给出支持以下发行版的 linux： Arch Linux CentOS Debian Deepin Elementary OS Fedora GalliumOS KDE Neon Kubuntu Linux Mint Lubuntu Manjaro Linux openSUSE Parrot Security OS Raspbian Solus Ubuntu Xubuntu Zorin OS</p>\n<p>理论上如果你的 linux 是基于以上某个发行版本的话应该也可以使用相同的方式安装 之后你就可以使用  sudo snap install packageName 的命令来安装应用了，如果安装了 snap store 的话可以打开 snap store 来选择安装 如果没有安装 snap store 的话可以到 snap store 网页中选择自己想要下载的应用，然后选择自己想要或喜欢的应用点击图标进入详情页，在详情页中点击 install 就可以看到安装的命令了，复制到终端执行即可。</p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/vim/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/vim/",
            "title": "vim",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"vim\"><a class=\"anchor\" href=\"#vim\">#</a> vim</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVhbnlpZmVuZy5jb20vYmxvZy8yMDE4LzA5L3ZpbXJjLmh0bWw=\">https://www.ruanyifeng.com/blog/2018/09/vimrc.html</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNDExMTc5MC9hcnRpY2xlL2RldGFpbHMvODg3NTEzMzU=\">Vim 入门级基础配置</span></p>\n<p>支持中文不乱码:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token string\">'设置编码'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">fileencodings</span><span class=\"token operator\">=</span>utf-8,ucs-bom,gb18030,gbk,gb2312,cp936</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">termencoding</span><span class=\"token operator\">=</span>utf-8</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">encoding</span><span class=\"token operator\">=</span>utf-8</pre></td></tr></table></figure><ul>\n<li>\n<p>vim 分屏技巧</p>\n<p><code>:sv</code>  垂直分屏</p>\n<p><code>:vs</code>  水平分屏</p>\n<p>通过 <code>&lt;C-w&gt;</code>  开启窗口相关命令</p>\n<p>后面接上下左右就是将光标移动到指定方向的窗口</p>\n<p>若接 <code>&lt;</code>   <code>&gt;</code>  则是左右调整窗口大小， <code>12&gt;</code>  则是窗口向右移动 12 个单位</p>\n<p>同理 <code>+</code>   <code>-</code>  就是上下调整</p>\n<p>若后接等于则各个窗口调至初始状态</p>\n<p>调整分屏大小：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RpeW9uZ2xhbzQwNTUvYXJ0aWNsZS9kZXRhaWxzLzEwMTE4NDE3Ng==\">https://blog.csdn.net/diyonglao4055/article/details/101184176</span></p>\n<p>使用技巧：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3djeTIzNTgwL2FydGljbGUvZGV0YWlscy84MTM4NzE4OA==\">https://blog.csdn.net/wcy23580/article/details/81387188</span></p>\n</li>\n<li>\n<p>安装侧边栏目录插件</p>\n<p>#下载压缩文件<br />\n <code>wget http://www.vim.org/scripts/download_script.php?src_id=17123 -O nerdtree.zip</code> <br />\n# 解压<br />\n <code>unzip nerdtree.zip</code> <br />\n# 在家目录下创建.vim/{plugin,doc}<br />\n <code>mkdir -p ~/.vim/&#123;plugin,doc&#125;</code> <br />\n# 复制两个文件<br />\n <code>cp plugin/NERD_tree.vim ~/.vim/plugin/</code> <br />\n <code>cp doc/NERD_tree.txt ~/.vim/doc/</code></p>\n<p>插件快捷键设置</p>\n<p>&quot; 设置 NerdTree<br />\n <code>map &lt;F3&gt; :NERDTreeMirror&lt;CR&gt;</code> <br />\n <code>map &lt;F3&gt; :NERDTreeToggle&lt;CR&gt;</code></p>\n</li>\n<li>\n<p>基础配置</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">set</span> nu</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>syntax on</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">set</span> nocompatible</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">tabstop</span><span class=\"token operator\">=</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> <span class=\"token string\">\" 开启插件</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>filetype plugin indent on</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> \"</span> 搜索时忽略大小写，但有一个或以上大些字母时仍保持对大写敏感</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">set</span> ignorecase smartcase </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token builtin class-name\">set</span> incsearch</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">mouse</span><span class=\"token operator\">=</span>a</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">encoding</span><span class=\"token operator\">=</span>utf-8</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">t_Co</span><span class=\"token operator\">=</span><span class=\"token number\">256</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>filetype indent on</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token string\">\"set paste</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\"</span><span class=\"token builtin class-name\">set</span> autoindent </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">shiftwidth</span><span class=\"token operator\">=</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token builtin class-name\">set</span> expandtab</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">softtabstop</span><span class=\"token operator\">=</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token builtin class-name\">set</span> wrap</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token builtin class-name\">set</span> linebreak</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">wrapmargin</span><span class=\"token operator\">=</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">scrolloff</span><span class=\"token operator\">=</span><span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre> \"设置NerdTree</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>map <span class=\"token operator\">&lt;</span>F<span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>></span> :NERDTreeMirror<span class=\"token operator\">&lt;</span>CR<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>map <span class=\"token operator\">&lt;</span>F<span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>></span> :NERDTreeToggle<span class=\"token operator\">&lt;</span>CR<span class=\"token operator\">></span></pre></td></tr></table></figure></li>\n<li>\n<p>小技巧</p>\n<ul>\n<li>\n<p>宏录制</p>\n<p>qa: 把你的操作记录在寄存器 a 中，操作完成后按 q 停止录制。</p>\n<p>于是 <code>@a</code>  会 replay 被录制的宏。</p>\n<p><code>@@</code>  是一个快捷键用来 replay 最新录制的宏。</p>\n<p><code>100@@</code> 会执行 100 次</p>\n</li>\n<li>\n<p>v 选中相关使用</p>\n<p>选中后：</p>\n<p><code>J</code>  →把所有行连接起来</p>\n<p><code>&lt;</code>  或  <code>&gt;</code>  → 左右缩进</p>\n<p><code>=</code>  → 自动缩进</p>\n<p>未选中 J 单行执行连接， <code>&lt;&lt;</code>  或 <code>&gt;&gt;</code>  单行缩进</p>\n</li>\n<li>\n<p>块选中</p>\n<p><code>&lt;C-v&gt;</code>  通过移动键选中区域后按 <code>x</code>  删除，</p>\n<p>或者按 <code>I</code>  (大写的 i) 进行多行插入</p>\n</li>\n<li>\n<p>一行文字大小写转换</p>\n<p><code>Vu</code>  或 <code>guu</code>  一行文字全小写</p>\n<p><code>VU</code>  或  <code>gUU</code>  一行文字全大写</p>\n</li>\n<li>\n<p>查看光标处的 ASCII 码： <code>ga</code></p>\n</li>\n<li>\n<p>查看光标处的 utf-8 编码： <code>g8</code></p>\n</li>\n<li>\n<p>打开光标处所指的文件： <code>gf</code></p>\n</li>\n<li>\n<p>剪切一行： <code>dd</code></p>\n</li>\n<li>\n<p>复制一行： <code>yy</code></p>\n</li>\n<li>\n<p>到第 N 行</p>\n<p>N  <code>G</code></p>\n<p>N  <code>gg</code></p>\n<p><code>:</code>  N  <code>&lt;CR&gt;</code></p>\n</li>\n<li>\n<p>选中括号或引号内的内容</p>\n<p>vi 与 va</p>\n<p><img data-src=\"https://gitee.com/obsidianlyg/gallery/raw/master/image//Untitled.png\" alt=\"Untitled\" /></p>\n</li>\n<li>\n<p>自带的自动提示功能</p>\n<p>前提：之前有输入过这个单词或汉字</p>\n<p>按 <code>&lt;C-p&gt;</code>  或者 <code>&lt;C-n&gt;</code>  就可以自动补齐啦</p>\n</li>\n</ul>\n</li>\n</ul>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch/%E8%A7%A3%E5%86%B3vim%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E5%A4%96%E5%8A%A0%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/",
            "url": "https://obsidianlyg.github.io/Arch/Arch/%E8%A7%A3%E5%86%B3vim%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E5%A4%96%E5%8A%A0%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/",
            "title": "vim乱码问题",
            "date_published": "2021-12-27T08:54:55.000Z",
            "content_html": "<h1 id=\"解决vim中文乱码问题外加基本配置\"><a class=\"anchor\" href=\"#解决vim中文乱码问题外加基本配置\">#</a> 解决 vim 中文乱码问题外加基本配置</h1>\n<p>vim ~/.vimrc<br />\nset fileencodings=utf-8,gb2312,gb18030,gbk,ucs-bom,cp936,latin1<br />\nset enc=utf8<br />\nset fencs=utf8,gbk,gb2312,gb18030<br />\nset nu</p>\n<p>set mouse=a</p>\n<p>&quot; 显示颜色</p>\n<p>set t_Co=256</p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Arch/Arch%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/",
            "url": "https://obsidianlyg.github.io/Arch/Arch%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/",
            "title": "arch个人笔记",
            "date_published": "2021-12-27T04:53:55.000Z",
            "content_html": "<h1 id=\"arch个人笔记\"><a class=\"anchor\" href=\"#arch个人笔记\">#</a> Arch 个人笔记</h1>\n<h2 id=\"arch换源\"><a class=\"anchor\" href=\"#arch换源\">#</a> <a href=\"/Arch/Arch/arch%E6%8D%A2%E6%BA%90/\">arch 换源</a></h2>\n<h2 id=\"解决vim中文乱码问题外加基本配置\"><a class=\"anchor\" href=\"#解决vim中文乱码问题外加基本配置\">#</a> <a href=\"/Arch/Arch/%E8%A7%A3%E5%86%B3vim%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E5%A4%96%E5%8A%A0%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/\">解决 vim 中文乱码问题外加基本配置</a></h2>\n<h2 id=\"v2ray\"><a class=\"anchor\" href=\"#v2ray\">#</a> <a href=\"/Arch/Arch/v2ray/\">v2ray</a></h2>\n<h2 id=\"snap的安装与使用\"><a class=\"anchor\" href=\"#snap的安装与使用\">#</a> <a href=\"/Arch/Arch/snap%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/\">snap 的安装与使用</a></h2>\n<h2 id=\"arcolinux\"><a class=\"anchor\" href=\"#arcolinux\">#</a> <a href=\"/Arch/Arch/ArcoLinux/\">ArcoLinux</a></h2>\n<h2 id=\"选择字体\"><a class=\"anchor\" href=\"#选择字体\">#</a> <a href=\"/Arch/Arch/%E9%80%89%E6%8B%A9%E5%AD%97%E4%BD%93/\">选择字体</a></h2>\n<h2 id=\"ranger常用命令\"><a class=\"anchor\" href=\"#ranger常用命令\">#</a> <a href=\"/Arch/Arch/ranger%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/\">ranger 常用命令</a></h2>\n<h2 id=\"vim\"><a class=\"anchor\" href=\"#vim\">#</a> <a href=\"/Arch/Arch/vim/\">vim</a></h2>\n<h2 id=\"wallpapers\"><a class=\"anchor\" href=\"#wallpapers\">#</a> <a href=\"/Arch/Arch/WallPaper/\">WallPapers</a></h2>\n<h2 id=\"网站引入\"><a class=\"anchor\" href=\"#网站引入\">#</a> 网站引入</h2>\n<p>很强的 web 导航：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ub2lzZWRoLmNuLw==\">https://noisedh.cn/</span></p>\n<p>相关 arch 显卡，娱乐等配置推荐<span class=\"exturl\" data-url=\"aHR0cHM6Ly9hcmNobGludXhzdHVkaW8uZ2l0aHViLmlvL0FyY2hMaW51eFR1dG9yaWFsLyMv\"> https://archlinuxstudio.github.io/ArchLinuxTutorial/#/</span></p>\n<p>修改 ranger 默认编辑器：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3ptaHptaHptL2FydGljbGUvZGV0YWlscy8xMDY3NjU0ODA=\">https://blog.csdn.net/zmhzmhzm/article/details/106765480</span></p>\n<p>解决 aur 缺少依赖问题：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21pZ2h0YnhnL2FydGljbGUvZGV0YWlscy8xMTIyNzIzNTA=\">https://blog.csdn.net/mightbxg/article/details/112272350</span></p>\n<p>flameshot (火焰截图)</p>\n<p>不知道文件是否是文件夹用：ls -F</p>\n<h2 id=\"shell常设快捷命令\"><a class=\"anchor\" href=\"#shell常设快捷命令\">#</a> shell 常设快捷命令</h2>\n<h1 id=\"命令别名\"><a class=\"anchor\" href=\"#命令别名\">#</a> 命令别名</h1>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">cp</span><span class=\"token operator\">=</span><span class=\"token string\">'cp -i'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">mv</span><span class=\"token operator\">=</span><span class=\"token string\">'mv -i'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">rm</span><span class=\"token operator\">=</span><span class=\"token string\">'rm -i'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">ls</span><span class=\"token operator\">=</span><span class=\"token string\">'ls  -F --color=auto'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">ll</span><span class=\"token operator\">=</span><span class=\"token string\">'ls -al'</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">grep</span><span class=\"token operator\">=</span><span class=\"token string\">'grep --color=auto'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">la</span><span class=\"token operator\">=</span><span class=\"token string\">'ls -a'</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">pacman</span><span class=\"token operator\">=</span><span class=\"token string\">'sudo pacman-color'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">p</span><span class=\"token operator\">=</span><span class=\"token string\">'sudo pacman-color'</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">y</span><span class=\"token operator\">=</span><span class=\"token string\">'yaourt'</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">h</span><span class=\"token operator\">=</span><span class=\"token string\">'htop'</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">vim</span><span class=\"token operator\">=</span><span class=\"token string\">'sudo vim'</span></pre></td></tr></table></figure><h2 id=\"解决谷歌无法输入中文问题\"><a class=\"anchor\" href=\"#解决谷歌无法输入中文问题\">#</a> 解决谷歌无法输入中文问题</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> .zshrc</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">LC_CTYPE</span><span class=\"token operator\">=</span>zh_CN.UTF-8</pre></td></tr></table></figure><h2 id=\"archlinux同步网络时间\"><a class=\"anchor\" href=\"#archlinux同步网络时间\">#</a> ArchLinux 同步网络时间</h2>\n<p><code>sudo timedatectl set-ntp true</code></p>\n<h2 id=\"tim和weixin安装github链接\"><a class=\"anchor\" href=\"#tim和weixin安装github链接\">#</a> tim 和 weixin 安装 github 链接</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2NvdW50c3RhcmxpZ2h0L2RlZXBpbi13aW5lLXRpbS1hcmNo\">https://github.com/countstarlight/deepin-wine-tim-arch</span></p>\n<h2 id=\"查找命令集及用法\"><a class=\"anchor\" href=\"#查找命令集及用法\">#</a> 查找命令集及用法</h2>\n<ol>\n<li><strong> <code>find</code>  &lt;指定目录&gt; &lt; 指定条件 &gt; &lt; 指定动作 &gt;</strong>\n<ul>\n<li><code>find . -name &quot;my*&quot;</code>  #搜索当前目录（含子目录，以下同）中，所有文件名以 my 开头的文件。</li>\n<li><code>find . -name &quot;my*&quot; -ls</code>  #搜索当前目录中所有文件名以 my 开头的文件并显示它们的详细信息。</li>\n<li><code>find . -type f -mmin -10</code>  #搜索当前目录中，所有过去 10 分钟中更新过的普通文件。如果不加 - type f 参数，则搜索普通文件 + 特殊文件 + 目录</li>\n</ul>\n</li>\n<li><strong> <code>locate</code> </strong>\n<ul>\n<li><code>locate /etc/sh</code>  #搜索 etc 目录下所有以 sh 开头的文件。</li>\n<li><code>locate ~/m</code>  # 搜索用户主目录下，所有以 m 开头的文件。</li>\n<li><code>locate -i ~/m</code>  #搜索用户主目录下，所有以 m 开头的文件，并且忽略大小写。</li>\n</ul>\n</li>\n<li><strong> <code>whereis</code> </strong>\n<ul>\n<li><code>whereis</code>  命令只能用于程序名的搜索，而且只搜索二进制文件（参数 - b）、man 说明文件（参数 - m）和源代码文件（参数 - s）。如果省略参数，则返回所有信息。</li>\n</ul>\n</li>\n<li><strong> <code>which</code> </strong>\n<ul>\n<li><code>which</code>  命令的作用是，在 PATH 变量指定的路径中，搜索某个系统命令的位置，并且返回第一个搜索结果。也就是说，使用 which 命令，就可以看到某个系统命令是否存在，以及执行的到底是哪一个位置的命令。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"基础bash头配置\"><a class=\"anchor\" href=\"#基础bash头配置\">#</a> 基础 bash 头配置</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PS1</span></span><span class=\"token operator\">=</span><span class=\"token string\">\"\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[36;40m\\]\\u\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[m\\]\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[34;40m\\][\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[m\\]\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[32;40m\\]\\w\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[m\\]\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[34;40m\\]]\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[m\\]\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[32;40m\\]:\\[<span class=\"token entity\" title=\"\\e\">\\e</span>[m\\]\"</span></pre></td></tr></table></figure><p>查看完整系统版本信息： <code>cat /proc/version</code></p>\n<p>查看指定程序名的 pid： <code>pgrep -l redis</code></p>\n<p>查看 redis 的进程是否开启： <code>ps -ef | grep redis</code></p>\n<h2 id=\"查看列表型系统版本信息lsb_release-a\"><a class=\"anchor\" href=\"#查看列表型系统版本信息lsb_release-a\">#</a> 查看列表型系统版本信息：lsb_release -a</h2>\n<p><img data-src=\"https://gitee.com/obsidianlyg/gallery/raw/master/image//leasea.png\" alt=\"leasea.png\" /></p>\n<h2 id=\"配置环境变量\"><a class=\"anchor\" href=\"#配置环境变量\">#</a> 配置环境变量</h2>\n<p><strong>1、直接在命令行中设置</strong></p>\n<p><code>PATH# PATH=$PATH:/usr/local/apache/bin</code></p>\n<p>使用这种方法，只对当前会话有效，也就是说每当登出或注销系统以后，PATH 设置就会失效。</p>\n<p><strong>2、在 profile 中设置 PATH</strong></p>\n<p><code>vi /etc/profile</code>  找到 export 行，</p>\n<p>在下面新增加一行，内容为：</p>\n<p><code>export PATH=$PATH:/usr/local/apache/bin</code></p>\n<p>注：＝ 等号两边不能有任何空格。这种方法最好，除非手动强制修改 PATH 的值，否则将不会被改变。编辑 /etc/profile 后 PATH 的修改不会立马生效，</p>\n<p>如果需要立即生效的话，可以执行# source profile 命令。</p>\n<p><strong>3、在当前用户的 profile 中设置 PATH（推荐）</strong></p>\n<p><code>vi ~/.bash_profile</code></p>\n<p>修改 PATH 行，把 /usr/local/apache/bin 添加进去，如：</p>\n<p><code>PATH=$PATH:$HOME/bin:/usr/local/apache/bin</code> 。</p>\n<p><code>source ~/.bash_profile</code>  让这次的修改生效。</p>\n<p>注：这种方法只对当前用户起作用的，其他用户该修改无效。</p>\n<h2 id=\"查看端口\"><a class=\"anchor\" href=\"#查看端口\">#</a> 查看端口</h2>\n<p><code>netstat -nlt|grep 6379</code></p>\n",
            "tags": [
                "arch个人笔记",
                "arch"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/usetest/mktest/hello-world/",
            "url": "https://obsidianlyg.github.io/usetest/mktest/hello-world/",
            "title": "Hello World",
            "date_published": "2021-12-26T14:46:49.000Z",
            "content_html": "<p>Welcome to <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>! This is your very first post. Check <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv\">documentation</span> for more info. If you get any problems when using Hexo, you can find the answer in <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=\">troubleshooting</span> or you can ask me on <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==\">GitHub</span>.</p>\n<h2 id=\"quick-start\"><a class=\"anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h </span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"run-server\"><a class=\"anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h </span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server -p <span class=\"token number\">80</span></pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"generate-static-files\"><a class=\"anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h </span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h </span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span></p>\n<h3 id=\"update-algolia\"><a class=\"anchor\" href=\"#update-algolia\">#</a> Update algolia</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h </span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo algolia</pre></td></tr></table></figure>",
            "tags": [
                "使用测试",
                "markdown测试"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/usetest/test-img/%E5%90%84%E7%A7%8D%E5%9B%BE%E5%BA%8A%E7%AE%80%E4%BB%8B/",
            "url": "https://obsidianlyg.github.io/usetest/test-img/%E5%90%84%E7%A7%8D%E5%9B%BE%E5%BA%8A%E7%AE%80%E4%BB%8B/",
            "title": "各种图床简介",
            "date_published": "2021-12-25T08:54:55.000Z",
            "content_html": "<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9pbWd0dS5jb20vaS9mZUFrbTg=\">路过图床 (web)</span></p>\n<p>支持最大上传图片 10M（主页介绍）</p>\n<p>可以设置自动删除设置</p>\n<p><img data-src=\"https://z3.ax1x.com/2021/08/05/feAkm8.png\" alt=\"feAkm8.png\" /></p>\n</blockquote>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucGljYi5jYy8=\">共享式图床 picb.cc (web)</span>(不太好用，会上传出错)</p>\n<p>目前没有发现限制上传图片大小（没有超过 10M 的图片测试）</p>\n<p>可以设置自动删除设置</p>\n<p><img data-src=\"https://t1.picb.cc/uploads/2021/12/25/fChNEK.jpg\" alt=\"fChNEK.jpg\" /></p>\n</blockquote>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3JpeXVnby5jb20v\">薄荷图床 (web)：还可以上传文件</span></p>\n<p>支持最大上传图片 5M</p>\n<p>非永久性存储 (免费版有效期三天)</p>\n<p><img data-src=\"https://obohe.com/i/2021/08/05/uadtn6.png\" alt=\"\" /></p>\n</blockquote>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zbS5tcy8=\">sm.ms(web)</span></p>\n<p>支持最大上传图片 5M</p>\n<p><img data-src=\"https://i.loli.net/2021/08/05/SXxF8oikAGW7KEZ.png\" alt=\"archlinux.png\" /></p>\n</blockquote>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9pbWcuaXRjbGFuLmNuLyMvdXBsb2Fk\">客来图床 (web)：连接 github</span></p>\n<p>目前没有发现限制上传图片大小（没有超过 10M 的图片测试）</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/cannian-py/gallery@main/image/archlinux.oyeghblbmls.png\" alt=\"archlinux\" /></p>\n</blockquote>\n<blockquote>\n<p><strong>起始时间</strong>：2021 年 8 月 5 日 18:39:59</p>\n</blockquote>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9tb2x1bmVyZmlubi5jb20vUGljR28v\">picgo (PC 端)</span></p>\n<p><strong>重点</strong>：与 typora 联动 - 自动上传到网络</p>\n<p>smms：支持最大上传图片 5M</p>\n<p>github,gitee 仓库：支持最大上传图片 1M</p>\n<p><img data-src=\"https://i.loli.net/2021/08/07/4uU1ejwqFRxS9BJ.png\" alt=\"archlinux\" /></p>\n</blockquote>\n<blockquote>\n<p>utools 图床插件<br />\n连接 github：目前没有发现限制上传图片大小（没有超过 10M 的图片测试）<br />\n<img data-src=\"https://cdn.jsdelivr.net/gh/cannian-py/gallery@main/image/1628317385613-632051.png\" alt=\"这玩意6M多\" /></p>\n</blockquote>\n<blockquote>\n<p><strong>更新时间</strong>：2021 年 8 月 7 日 13:57:15</p>\n</blockquote>\n<blockquote>\n<p>直接 gitee 上传图片到 markdown 下使用</p>\n<p>注意：<br />\n<img data-src=\"https://i.loli.net/2021/08/08/VOR6B7WZPlzcIug.png\" alt=\"w\" /></p>\n<p>blob 需要修改为<strong> raw</strong><br />\n<strong> 如下图所示</strong>：<br />\n<img data-src=\"https://gitee.com/obsidianlyg/gallery/raw/master/image/1621872400166.jpeg\" alt=\"x\" /></p>\n</blockquote>\n<blockquote>\n<p><strong>更新时间</strong>：2021 年 8 月 8 日 13:47:33</p>\n</blockquote>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9waWMuZ2ltaG95LmNvbS8=\">Gimhoy</span> (需要登录微博)</p>\n<p>只允许上传 5MB 以内 PNG/JPG/GIF 图片</p>\n<p><img data-src=\"https://tva1.sinaimg.cn/large/0077C2pWly8gxq63b5l42j30d607nglo.jpg\" alt=\"\" /></p>\n</blockquote>\n<blockquote>\n<p>更新时间：2021 年 12 月 25 日</p>\n</blockquote>\n",
            "tags": [
                "使用测试",
                "图床的测试"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/Windows%E5%BF%AB%E6%8D%B7%E9%94%AE%E4%BD%BF%E7%94%A8/",
            "url": "https://obsidianlyg.github.io/Windows%E5%BF%AB%E6%8D%B7%E9%94%AE%E4%BD%BF%E7%94%A8/",
            "title": "Windows快捷键使用",
            "date_published": "2021-12-25T07:19:03.000Z",
            "content_html": "<h2 id=\"快捷键\"><a class=\"anchor\" href=\"#快捷键\">#</a> 快捷键</h2>\n<ul>\n<li>\n<p>win+shift+s 自由截屏</p>\n<p><img data-src=\"https://gitee.com/obsidianlyg/gallery/raw/master/image//20211225152127.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>win+a 开启管理通知</p>\n</li>\n<li>\n<p>win+s/q 搜索</p>\n</li>\n<li>\n<p>win+e 快捷开启文件管理器</p>\n</li>\n<li>\n<p>alt + z 直接打开桌面文件夹（自己设置的）</p>\n</li>\n<li>\n<p>win+x 相当于右键点击 win 图标</p>\n</li>\n<li>\n<p>win+v 剪切板</p>\n</li>\n<li>\n<p>win+g xbox 控制台（可录制窗口内视频，不可录制桌面视频）</p>\n</li>\n<li>\n<p>win+。是自带ヾ (≧▽≦*) o 表情包管理</p>\n</li>\n<li>\n<p>ctrl+win+d 创建桌面</p>\n</li>\n<li>\n<p>ctrl+win + 左右键切换桌面</p>\n</li>\n<li>\n<p>ctrl+win+f4 删除桌面</p>\n</li>\n<li>\n<p>win+r 并输入 sysdm.cpl 可以直接进入系统环境变量界面</p>\n</li>\n<li>\n<p>删除 efi 分区</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTgzNzQwMi9hcnRpY2xlL2RldGFpbHMvNzk5NjE5MTI=\">https://blog.csdn.net/weixin_39837402/article/details/79961912</span></p>\n</li>\n<li>\n<p>ctrl+shift+t 在浏览器中恢复已关闭的网页</p>\n</li>\n<li>\n<p>神奇的 cmd 使用方式（在上面输入 wt 可以打开 WindowsTerminal，如果有的话）</p>\n<p><img data-src=\"https://www.notion.so/image/https%3A%2F%2Fi.loli.net%2F2021%2F10%2F28%2FZ5evATRlJXqzjhO.png?table=block&amp;id=dbce60fd-9a86-4777-944d-78b4efa9c24c&amp;spaceId=8fa60c24-231e-42ac-926d-93c66dacb15f&amp;width=2000&amp;userId=e452371b-d0a7-48e0-8b53-3fe7854bbb99&amp;cache=v2\" alt=\"\" /></p>\n<p>按回车之后相当于在当前文件夹开启 cmd</p>\n</li>\n</ul>\n<h2 id=\"创建本地可以快捷搜索的方式\"><a class=\"anchor\" href=\"#创建本地可以快捷搜索的方式\">#</a> 创建本地可以快捷搜索的方式</h2>\n<pre><code>C:\\Users\\lw\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\[Uzer.Me](http://uzer.me/)\n\n或者下面的位置\n\nC:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\n\n这两个位置放入快捷方式，即可全局搜索（windows自带的也可以搜到）\n</code></pre>\n<h2 id=\"修改资源管理其中右键打开方式\"><a class=\"anchor\" href=\"#修改资源管理其中右键打开方式\">#</a> 修改资源管理其中右键打开方式</h2>\n<pre><code>打开注册表编辑器（打开方式win+r输入regedit）\n\n编辑右键打开文件方式输入路径： `计算机\\HKEY_CLASSES_ROOT\\*\\shell`\n\n编辑右键打开文件夹方式输入路径： `计算机\\HKEY_CLASSES_ROOT\\Directory\\shell`\n\n以下是相同的操作步骤：\n</code></pre>\n<h3 id=\"添加节点\"><a class=\"anchor\" href=\"#添加节点\">#</a> 添加节点</h3>\n<pre><code>【右键】shell节点 -&gt; 新建(N) -&gt; 项(K) -&gt; 【命名】Typora\n\n【右键】Typora -&gt; 新建(N) -&gt; 项(K) -&gt; 【命名】command（必须这个名字）\n</code></pre>\n<h3 id=\"修改-typora-节点注册表和图标\"><a class=\"anchor\" href=\"#修改-typora-节点注册表和图标\">#</a> 修改 Typora 节点注册表和图标</h3>\n<pre><code>1. 修改（默认）的数据：使用Typora打开（这玩意自己随意命名即可）\n2. 新增一个 字符串值 的类型名字命名（icon），设置数据为：D:\\Program Files\\Typora\\Typora.exe\n</code></pre>\n<h3 id=\"修改打开方式\"><a class=\"anchor\" href=\"#修改打开方式\">#</a> 修改打开方式</h3>\n<pre><code>修改（默认）的数据为：&quot;D:\\Program Files\\Typora\\Typora.exe&quot; &quot;%1&quot;    （全是英文符号）\n\n[参考文档1](https://www.cnblogs.com/jloveu/p/how-to-add-item-to-windows-explorer-pop-menu.html)\n\n[参考文档2](https://www.cnblogs.com/clis/p/15132215.html)\n</code></pre>\n<h2 id=\"给windows命令行设置代理\"><a class=\"anchor\" href=\"#给windows命令行设置代理\">#</a> 给 Windows 命令行设置代理</h2>\n<h3 id=\"设置-http-代理\"><a class=\"anchor\" href=\"#设置-http-代理\">#</a> 设置 HTTP 代理：</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">http_proxy</span><span class=\"token operator\">=</span>http://127.0.0.1:1083</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">https_proxy</span><span class=\"token operator\">=</span>http://127.0.0.1:1083</pre></td></tr></table></figure><h3 id=\"socks5代理设置\"><a class=\"anchor\" href=\"#socks5代理设置\">#</a> socks5 代理设置：</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">http_proxy</span><span class=\"token operator\">=</span>socks5://127.0.0.1:1083</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">https_proxy</span><span class=\"token operator\">=</span>socks5://127.0.0.1:1083</pre></td></tr></table></figure><h3 id=\"取消代理\"><a class=\"anchor\" href=\"#取消代理\">#</a> 取消代理：</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">http_proxy</span><span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">https_proxy</span><span class=\"token operator\">=</span></pre></td></tr></table></figure><h2 id=\"windows-git-bash-设置代理\"><a class=\"anchor\" href=\"#windows-git-bash-设置代理\">#</a> Windows git bash 设置代理</h2>\n<h3 id=\"设置-http-代理-2\"><a class=\"anchor\" href=\"#设置-http-代理-2\">#</a> 设置 HTTP 代理：</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> config --global http.proxy <span class=\"token punctuation\">[</span>http://127.0.0.1:108<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>http://127.0.0.1:10899/<span class=\"token punctuation\">)</span><span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> config --global https.proxy <span class=\"token punctuation\">[</span>http://127.0.0.1:108<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>http://127.0.0.1:10899/<span class=\"token punctuation\">)</span><span class=\"token number\">3</span></pre></td></tr></table></figure><h3 id=\"设置-socks5代理\"><a class=\"anchor\" href=\"#设置-socks5代理\">#</a> 设置 socks5 代理：</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> config --global http.proxy socks5://127.0.0.1:10899</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> config --global https.proxy socks5://127.0.0.1:10899</pre></td></tr></table></figure><h3 id=\"取消代理-2\"><a class=\"anchor\" href=\"#取消代理-2\">#</a> 取消代理:</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> config --global --unset http.proxy</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> config --global --unset https.proxy</pre></td></tr></table></figure><h2 id=\"windows-powershell-设置代理\"><a class=\"anchor\" href=\"#windows-powershell-设置代理\">#</a> Windows PowerShell 设置代理</h2>\n<h3 id=\"设置代理\"><a class=\"anchor\" href=\"#设置代理\">#</a> 设置代理：</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>netsh winhttp <span class=\"token builtin class-name\">set</span> proxy <span class=\"token number\">127.0</span>.0.1:10899</pre></td></tr></table></figure><h3 id=\"代理测试-curl-httpswwwgooglecom\"><a class=\"anchor\" href=\"#代理测试-curl-httpswwwgooglecom\">#</a> 代理测试:  curl <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS8=\">https://www.google.com</span></h3>\n<pre><code>CMD查看代理情况：netsh winhttp show proxy\nCMD取消代理：netsh winhttp reset proxy\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "https://obsidianlyg.github.io/computer-science/mongo/mongodb/",
            "url": "https://obsidianlyg.github.io/computer-science/mongo/mongodb/",
            "title": "MongoDB",
            "date_published": "2021-12-23T16:00:00.000Z",
            "content_html": "<h1 id=\"mongodb\"><a class=\"anchor\" href=\"#mongodb\">#</a> MongoDB</h1>\n<ul>\n<li>\n<h2 id=\"将mongodb加入到windows服务中\"><a class=\"anchor\" href=\"#将mongodb加入到windows服务中\">#</a> <strong>将 MongoDB 加入到 Windows 服务中</strong></h2>\n<ul>\n<li>\n<p><strong>创建服务:</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongod --dbpath <span class=\"token string\">\"D:\\MongoDbData\"</span> --logpath <span class=\"token string\">\"D:\\MongoDbData\\log\\MongoDB.log\"</span> --install --serviceName <span class=\"token string\">\"MongoDB\"</span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>启动 MongoDB：</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>net start MongoDB</pre></td></tr></table></figure></li>\n<li>\n<p><strong>删除服务：</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongod --dbpath <span class=\"token string\">\"D:\\MongoDbData\"</span> --logpath <span class=\"token string\">\"D:\\MongoDbData\\log\\MongoDB.log\"</span> --install --remove <span class=\"token string\">\"MongoDB\"</span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>停止服务：</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>net stop MongoDB</pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<h2 id=\"导出集合\"><a class=\"anchor\" href=\"#导出集合\">#</a> <strong>导出集合</strong></h2>\n<p>mongoexport.exe -d db_name -c collection_name -o d:\\data\\test.json</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0cxQXBhc3N6L2FydGljbGUvZGV0YWlscy80MzgzNzMzMQ==\">https://blog.csdn.net/G1Apassz/article/details/43837331</span></p>\n</li>\n<li>\n<h2 id=\"导入文件\"><a class=\"anchor\" href=\"#导入文件\">#</a> <strong>导入文件</strong></h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongoimport -d dbs -c col --file path</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#导入 csv 文件</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mongoimport -d Testdb1 -c score --type csv --headerline --ignoreBlanks --file test.csv</pre></td></tr></table></figure></li>\n<li>\n<h2 id=\"数据库操作\"><a class=\"anchor\" href=\"#数据库操作\">#</a> <strong>数据库操作</strong></h2>\n<p>查看版本：  <code>db.version();</code></p>\n<p>创建数据库:  <code>use DATABASE_NAME</code></p>\n<p>查看当前数据库:  <code>db</code></p>\n<p>查看数据库 (空库不在列表内）:  <code>show dbs</code></p>\n<p>删库:  <code>db.dropDatabase()</code></p>\n</li>\n<li>\n<h2 id=\"集合操作\"><a class=\"anchor\" href=\"#集合操作\">#</a> <strong>集合操作</strong></h2>\n<p>创建集合:  <code>db.createCollection(name, options(可选项))</code></p>\n<p>删除集合:  <code>db.collection.drop()</code></p>\n<p>查看集合:  <code>show collections</code>  或者  <code>show tables</code></p>\n<p>删除全部数据（集合并不会删除）:  <code>db.col.remove(&#123;&#125;)</code></p>\n<p>save 与 insert 区别：save 可以替换已有的文档，insert 不能。</p>\n</li>\n<li>\n<h2 id=\"基本知识点学习通测试题\"><a class=\"anchor\" href=\"#基本知识点学习通测试题\">#</a> <strong>基本知识点（学习通测试题）</strong></h2>\n<p>MongoDB 数据文件的存储格式为：BSON</p>\n<p>MongoDB 适合网站数据，SQL，缓存</p>\n<p><strong>mongodb 的存储引擎：WiredTiger，MMAPv1 和 In-Memory。</strong></p>\n<p>NoSQL 全称：NotOnlySQL</p>\n<p>默认端口：27017</p>\n<p>NoSQL 特点：（没有一个明确的范围和定义，以下是 mongodb 书上的）</p>\n<ol>\n<li>可弹性扩展</li>\n<li>大数据量，高性能</li>\n<li>Base 特征</li>\n<li>灵活的数据模型</li>\n<li>高可用</li>\n</ol>\n<p>属于 NoSQL 的数据库种类：<strong>HBase、Redis、MongoDB、Couchbase、LevelDB</strong></p>\n<p>在 MongoDB 的集合中相当于关系的 key 是 ObjectId；</p>\n<p>使用 CreateCollection 创建固定集合时必须添加参数：capped</p>\n<p>数据库备份命令:mongodump</p>\n<p>gridfs 定义及原理</p>\n<p>是 MongoDB 中存储和查询超过 BSON 文件大小限制（16M）的规范</p>\n<p>GridFS 将文件分成多个块，每个块作为一个单独的文档</p>\n<p>在 MongoDB 的固定集合中如果被占满，再插入新文档时，固定集合会自动将最老的文档从集合中删除。</p>\n<p>对目标集使用 insert 方法，插入一个文档，这个操作<strong>不一定</strong>会给文档增加一个 &quot;_id&quot; 键，让后将其保存到 MongoDB 中。</p>\n<p>空的查询文档 {} 会匹配集合的全部内容。要是不指定查询文档，默认就是 {}。</p>\n<p>update 修改字段名称用 $rename；</p>\n<p>MongoDB 服务器可以利用复制集部署多个集群，好处是：复制时将数据自动同步到多个服务器中。</p>\n<p>MongoDB 中副本集的方式可以利用仲裁机制将从节点推举成新的主节点。</p>\n<p>MapReduce 中 map 函数是映射，reduce 函数是归并</p>\n<p>为了维护集合的最新视图，每个成员每隔两秒钟就会系那个其他成员发送一个请求，这个请求是心跳请求。</p>\n<p>MongoDB 中部署一个分片集群需要三部分，包括 Shard Server, Config Server 和 Route Server。</p>\n<p>如果在创建唯一索引时已经存在了重复项，可以通过 dropDups 参数消除重复文档。</p>\n<p>MongoDB 不仅支持自动故障恢复，还支持自动分片</p>\n<p>聚合数据模型是 MapReduce；</p>\n</li>\n<li>\n<p><strong>remove 与 drop 区别</strong></p>\n<p>remove：删除所有文档，但是保留索引（index）文件</p>\n<p>db.system.indexs.find () 查询索引依然存在</p>\n<p>drop：真 * 删除所有文档</p>\n</li>\n<li>\n<h2 id=\"find系列\"><a class=\"anchor\" href=\"#find系列\">#</a> <strong>find 系列</strong></h2>\n<p>结构化查询</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询在 1997 年 1 月 1 日之后出生的人</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"date\"</span>:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$gte</span>:new Date<span class=\"token punctuation\">(</span><span class=\"token number\">1997,1</span>,1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>大小关系</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> 大于 - <span class=\"token variable\">$gt</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">)</span> 小于 - <span class=\"token variable\">$lt</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token operator\">>=</span><span class=\"token punctuation\">)</span> 大于等于 - <span class=\"token variable\">$gte</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;=</span> <span class=\"token punctuation\">)</span> 小于等于 - <span class=\"token variable\">$lte</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token operator\">!=</span><span class=\"token punctuation\">)</span> 不等于 - <span class=\"token variable\">$ne</span></pre></td></tr></table></figure><p>相关语法 ( <code>$not</code>  也是这个语法推荐 <code>$ne</code> )</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>age:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$gte</span>:25, <span class=\"token variable\">$lte</span>:27<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>语法默认是 and，</p>\n<p><code>$or</code>  或者 <code>$​nor</code>  用法</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$or</span>:<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$in</code>  或 <code>$​nin</code>  (对 in 来说只要里面有一个符合，就列出来)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>age:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$in</span>:<span class=\"token punctuation\">[</span><span class=\"token number\">12</span>, <span class=\"token number\">13</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.employee.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> interest: <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$in</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span> ‘看电影’ , ‘画画’<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>自定义显示属性列 (0: 不显示，1: 显示，id 默认显示)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>, <span class=\"token punctuation\">&#123;</span>date:1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$mod</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>find<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token variable\">$mod</span>\"</span>:<span class=\"token punctuation\">[</span>数字，余数<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$exists</code>  判断字段是否存在 (true/false)</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>age<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">&#123;</span>$exists<span class=\"token punctuation\">:</span> true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>limit</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 只显示前 5 条数据</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.limit<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>skip   查第 6-10 条数据</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.limit<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>.skip<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#跳过 5 条数据，从第六条开始</span></pre></td></tr></table></figure><p>sort () : [1 (升序), -1 (降序)]</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>age:1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>或者直接sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>age:1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>（老师说的，实际上并不行）</pre></td></tr></table></figure><p>count()</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>. 推荐</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.col.count<span class=\"token punctuation\">(</span>查询条件<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">2</span>. 其他方式<span class=\"token punctuation\">(</span>别在count内写，没用<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.col.find<span class=\"token punctuation\">(</span>查询条件<span class=\"token punctuation\">)</span>.count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li>\n<p>针对数据处理的字段</p>\n<p><code>$all</code>  (来匹配包含数组所有元素的文档，元素顺序不影响结果)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.employee.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> interest: <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$all</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span> ‘看电影’ , ‘画画’<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$size</code>  (查询指定长度的数组)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>查询有五种爱好的人</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.employee.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span>interest <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$size</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$slice</code>  (用于指定查询结果中要显示的数组元素，<strong>放在 find 的第二个参数中</strong>)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>.</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span>查询条件<span class=\"token punctuation\">&#125;</span> ，<span class=\"token punctuation\">&#123;</span>field <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$slice</span> <span class=\"token builtin class-name\">:</span> value<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>value取值：整数n, 正数显示数组前n个元素，负数显示数组后n个元素</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">2</span>.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>db.num.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>, <span class=\"token punctuation\">&#123;</span>num:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$slice</span>:<span class=\"token punctuation\">[</span><span class=\"token number\">0</span>, <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\">#正数从第 n+1 个元素，负数从倒数第 n 个开始，往后显示 count 个元素</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">3</span>.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token variable\">$slice</span>:0      <span class=\"token comment\">#不显示数组内容</span></pre></td></tr></table></figure><p><code>$elemMatch</code>  （查子文档）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>.</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.neiqian.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>parents:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$elemMatch</span>:<span class=\"token punctuation\">&#123;</span>job:<span class=\"token string\">\"a\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">2</span>.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.neiqian.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"parents.job\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">3</span>.与逻辑运算符同用</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.neiqian.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$or</span>:<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"parents.job\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"parents.job\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询数组内部数据个数大于等于 4 的</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.num.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$where</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"this.num.length>=4\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>统计所有人的指定数组的元素个数</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">></span> db.mycollection.insert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'foo'</span>:<span class=\"token punctuation\">[</span><span class=\"token number\">1,2</span>,3,4<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">></span> db.mycollection.insert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'foo'</span>:<span class=\"token punctuation\">[</span><span class=\"token number\">5,6</span>,7<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">></span> db.mycollection.aggregate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$project</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span> count: <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$size</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"<span class=\"token variable\">$foo</span>\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"5314b5c360477752b449eedf\"</span><span class=\"token punctuation\">)</span>, <span class=\"token string\">\"count\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"5314b5c860477752b449eee0\"</span><span class=\"token punctuation\">)</span>, <span class=\"token string\">\"count\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>正则的相关用法</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 查询以 a 字符开头的元素</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.num.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:/^a/<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 查询以 b 字符结尾的元素</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.num.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:/b$/<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 同时具有上方两个条件查询（注；必须以结尾语法查询开始，具体如下）</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.num.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:/b$/,name:/^a/<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 如果知道中间相差的具体有几个字符数可以用 \".\" 充当中间的字符数，例如：</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>db.num.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:/^a<span class=\"token punctuation\">..</span>b$/<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> ObjectId<span class=\"token punctuation\">(</span><span class=\"token string\">\"61695d44b1d6dee2a6ab7c31\"</span><span class=\"token punctuation\">)</span>, <span class=\"token string\">\"name\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"assb\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 模糊查询（包含伟字就行）</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>db.student.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>sname:/^.*伟.*$/<span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span>_id:0, sname:1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 注：另一种语法格式，如下：</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>db.posts.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>tags:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$regex</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"run\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>模糊查询中正则表达式中/i,/g,/ig,/gi,/m的区别和含义</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>/i <span class=\"token punctuation\">(</span>忽略大小写<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>/g <span class=\"token punctuation\">(</span>全文查找出现的所有匹配字符<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>/m <span class=\"token punctuation\">(</span>多行查找<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>/gi<span class=\"token punctuation\">(</span>全文查找、忽略大小写<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>/ig<span class=\"token punctuation\">(</span>全文查找、忽略大小写<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<h2 id=\"update系列\"><a class=\"anchor\" href=\"#update系列\">#</a> <strong>update 系列</strong></h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>update<span class=\"token punctuation\">(</span>query, update, upsert, multi, writeConcern<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>query <span class=\"token builtin class-name\">:</span> update的查询条件，类似sql update查询内where后面的。</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>update <span class=\"token builtin class-name\">:</span> update的对象和一些更新的操作符（如$,<span class=\"token variable\">$inc</span><span class=\"token punctuation\">..</span>.）等，也可以理解为sql update查询内set后面的</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>upsert <span class=\"token builtin class-name\">:</span> 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>multi <span class=\"token builtin class-name\">:</span> 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>writeConcern :可选，抛出异常的级别。</pre></td></tr></table></figure><p><code>$set</code>  只更新字段 (有则修改，无则追加）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.person2.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>birthday:<span class=\"token string\">\"1996-02-14\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$set</span>:<span class=\"token punctuation\">&#123;</span>birthday:<span class=\"token string\">\"1996\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$inc</code>  针对数值型的键进行加减运算</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$inc</span>:<span class=\"token punctuation\">&#123;</span>age:-2<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$unset</code>  删除指定 key</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$unset</span>:<span class=\"token punctuation\">&#123;</span>age:1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li>\n<p>针对数组</p>\n<p><code>$push</code>  无条件追加</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$push</span>:<span class=\"token punctuation\">&#123;</span>course:<span class=\"token string\">\"sdsd\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$pushAll </code> 追加多个</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$pushAll</span>:<span class=\"token punctuation\">&#123;</span>course:<span class=\"token punctuation\">[</span><span class=\"token string\">\"wen\"</span>,<span class=\"token string\">\"quan\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$addToSet</code>  若是存在则不插入</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$addToSet</span>:<span class=\"token punctuation\">&#123;</span>course:<span class=\"token string\">\"sds\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$pop</code> n 为删除最后 n 个，-n 为删除正数 n 个</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$pop</span>:<span class=\"token punctuation\">&#123;</span>course:1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$pull</code>  删除指定字段    <code>$pullAll</code>  与 <code>$pushAll</code>  同理</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$pull</span>:<span class=\"token punctuation\">&#123;</span>course:<span class=\"token string\">\"sdsd\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ul>\n<p><code>$rename</code>  对字段重命名</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$rename</span>:<span class=\"token punctuation\">&#123;</span>old_field_name:new_field_name<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">#前面可以不加引号后面必须要加</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.mdb.update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name:<span class=\"token string\">\"张三\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$rename</span>:<span class=\"token punctuation\">&#123;</span>course:<span class=\"token string\">\"sss\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<h2 id=\"aggregate系列\"><a class=\"anchor\" href=\"#aggregate系列\">#</a> <strong>aggregate 系列</strong></h2>\n<ul>\n<li>\n<p><code>$group</code>  相关   <strong>（将集合中的文档分组，可用于统计结果）</strong></p>\n<p><code>$sum</code> 、 <code>$avg</code> 、 <code>$max</code> 、 <code>$​​min</code>  相关语法：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.epms1.aggregate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$group</span>:<span class=\"token punctuation\">&#123;</span>_id:<span class=\"token string\">\"<span class=\"token variable\">$job</span>\"</span>, num:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$sum</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"<span class=\"token variable\">$salary</span>\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><code>$addToSet</code> 、 <code>$​push</code>  与 update 系列规则相同</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mycol.aggregate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$group</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span>_id <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$by_user</span>\"</span>, url <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$push</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$url</span>\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>将所有人员信息全部 push 进去 ( <code>$$ROOT</code> )</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.persons.aggregate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token variable\">$project</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>         _id <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span> ,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token variable\">$group</span>:<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            _id:<span class=\"token punctuation\">&#123;</span>country:<span class=\"token string\">\"<span class=\"token variable\">$country</span>\"</span>, m: <span class=\"token string\">\"<span class=\"token variable\">$m</span>\"</span><span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        total:<span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$push</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"<span class=\"token variable\">$$</span>ROOT\"</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token variable\">$match</span>:<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token string\">\"_id.m\"</span>:<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token variable\">$gt</span>:90</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><code>$first</code> ( <code>$​last</code> ) 根据资源文档的排序获取第一个 (最后一个) 文档数据。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.mycol.aggregate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$group</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span>_id <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$by_user</span>\"</span>, last_url <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$last</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$url</span>\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>$project</code>  相关 ** （修改输入文档的结构。可以用来重命名、增加或删除域，也可以用于创建计算结果以及嵌套文档）**</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.epms1.aggregate<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$project</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        _id <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span> ,</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        name <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> ,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>注：除了_id:0 可以使用，其他都必须统一为 0 或者统一为 1，（选择的属性，要么都显示，要么都不显示，不能混用）</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE4OTQ4MzU5L2FydGljbGUvZGV0YWlscy84ODc3NzMxNA==\">其他操作</span></p>\n<p><strong>把 weight 重命名为 newWeight</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.test.aggregate<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$project</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>         _id <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span> ,</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        name <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>  ,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        weight <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> ,</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        newWeight <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$weight</span>\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><strong>使用 <code>＄add</code>  给 weight 字段的值加 10，然后将结果赋值给一个新的字段:newWeight</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.test.aggregate<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$project</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>         _id <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span> ,</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        name <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>  ,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        weight <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> ,</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        newWeight <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$add</span>:<span class=\"token punctuation\">[</span><span class=\"token string\">\"<span class=\"token variable\">$weight</span>\"</span>, <span class=\"token number\">10</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>$match</code>  相关   <strong>（过滤数据）</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.articles.aggregate<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                        <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$match</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span> score <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$gt</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">70</span>, <span class=\"token variable\">$lte</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">90</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                        <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$group</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span> _id: null, count: <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$sum</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                       <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>$skip</code> / <code>$​limit</code>  相关</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.article.aggregate<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$skip</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>$unwind</code>  相关  （将文档中的某一个数组类型字段拆分成多条，每条包含数组中的一个值）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 源数据</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"item\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"ABC1\"</span>, sizes: <span class=\"token punctuation\">[</span> <span class=\"token string\">\"S\"</span>, <span class=\"token string\">\"M\"</span>, <span class=\"token string\">\"L\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.inventory.aggregate<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$unwind</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"<span class=\"token variable\">$sizes</span>\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 结果：</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"item\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"ABC1\"</span>, <span class=\"token string\">\"sizes\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"S\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"item\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"ABC1\"</span>, <span class=\"token string\">\"sizes\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"M\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>, <span class=\"token string\">\"item\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"ABC1\"</span>, <span class=\"token string\">\"sizes\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"L\"</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p><code>$sort</code>  相关</p>\n<p>内部用法与 find 系列相同</p>\n</li>\n<li>\n<p><code>$geoNear</code>  相关 （输出接近某一地理位置的有序文档）</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLnlhbmppbmdhbmcuY29tLz9wPTEzODE=\">参考文档</span></p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span>space<span class=\"token punctuation\">.</span><span class=\"token function\">aggregate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"$geoNear\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token string\">\"near\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">74</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//coordinates: [0,0] 经纬度</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token string\">\"distanceField\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"loc\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t\t\t<span class=\"token string\">\"query\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"_id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"xxx\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 查询条件</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token string\">\"maxDistance\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 指定最大距离，不指定则为最大值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token string\">\"num\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 返回的行数 ，不写：默认返回所有</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token string\">\"spherical\"</span><span class=\"token operator\">:</span> true  <span class=\"token comment\">//2dsphere 必须指定</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pretty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<h2 id=\"mapreduce\"><a class=\"anchor\" href=\"#mapreduce\">#</a> <strong>MapReduce</strong></h2>\n<p>查询 user 个数：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.shop.mapReduce<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token function-name function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>emit<span class=\"token punctuation\">(</span>this.user,1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   function<span class=\"token punctuation\">(</span>key,values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>return Array.sum<span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      out:<span class=\"token punctuation\">&#123;</span>inline:1<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">)</span>.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询归并后并显示出来：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.sang_books.mapReduce<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t <span class=\"token function-name function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t\temit<span class=\"token punctuation\">(</span>this.name, this.price<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t function<span class=\"token punctuation\">(</span>key, values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\t<span class=\"token builtin class-name\">return</span> Array.sum<span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t out:<span class=\"token punctuation\">&#123;</span>inline:1<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> <span class=\"token punctuation\">)</span>.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 加上 find 只会显示文档内容不会显示执行成功信息</span></pre></td></tr></table></figure><p>不指定文档的话将存储在临时文档中，指定文档就会输入进去（如果没有就创建）：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>var results <span class=\"token operator\">=</span> db.sang_books.mapReduce<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token function-name function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t   emit<span class=\"token punctuation\">(</span>this.name, this.price<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tfunction<span class=\"token punctuation\">(</span>key, values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t   <span class=\"token builtin class-name\">return</span> Array.sum<span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\tout:<span class=\"token string\">\"aa\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询到作者有多本书以逗号分隔：</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span>sang_books<span class=\"token punctuation\">.</span><span class=\"token function\">mapReduce</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>this<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>this<span class=\"token punctuation\">.</span>book<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">function</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">return</span> values<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span>out<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token keyword\">inline</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询每个 user 的每种 sku 的数量</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.shop.mapReduce<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token function-name function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      emit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>user:this.user,sku:this.sku<span class=\"token punctuation\">&#125;</span>,1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>   function<span class=\"token punctuation\">(</span>key,values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>return Array.sum<span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>   <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      out:<span class=\"token punctuation\">&#123;</span>inline:1<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">)</span>.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<h2 id=\"createindex索引\"><a class=\"anchor\" href=\"#createindex索引\">#</a> <strong>createIndex () 索引</strong></h2>\n<ul>\n<li>\n<p>索引的查和删</p>\n<p>查看集合索引：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.getIndexes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查看集合索引大小:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.totalIndexSize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>删除集合所有索引:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.dropIndexes<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>删除集合指定索引:</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.col.dropIndex<span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>常用索引类型</p>\n<p>复合索引：</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 索引命名 &#123;name: \"inventory_idx\"&#125; (缺省情况下，索引名以键名加上其创建顺序 (1：升序  或者  -1：降序) 组合而成。)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db<span class=\"token punctuation\">.</span>products<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> item<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> quantity<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"inventory_idx\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>多键索引:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 是建在数组上的索引，在 mongoDB 的 document 中，有些字段的值为数组，多键索引就是为了提高查询这些数组的效率</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db<span class=\"token punctuation\">.</span>classes<span class=\"token punctuation\">.</span><span class=\"token function\">insertMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>         <span class=\"token string\">\"classname\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"class1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>         <span class=\"token string\">\"students\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token string\">'jack'</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token string\">'tom'</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">:</span><span class=\"token number\">22</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token string\">'lilei'</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">:</span><span class=\"token number\">25</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>         <span class=\"token string\">\"classname\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"class2\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>         <span class=\"token string\">\"students\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token string\">'lucy'</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token string\">'jim'</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">:</span><span class=\"token number\">23</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token string\">'jarry'</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">:</span><span class=\"token number\">26</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>db<span class=\"token punctuation\">.</span>classes<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'students.age'</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>哈希索引:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 就是将 field 的值进行 hash 计算后作为索引，其强大之处在于实现 O (1) 查找，</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 当然用哈希索引最主要的功能也就是实现定值查找，对于经常需要排序或查询范围查询的集合不要使用哈希索引</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db<span class=\"token punctuation\">.</span>col<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token string\">\"hashed\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>常用索引属性：</p>\n<p>唯一索引:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 用于为 collection 添加唯一约束，即强制要求 collection 中的索引字段没有重复值</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 在 userinfos 的 name 字段添加唯一索引</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db<span class=\"token punctuation\">.</span>userinfos<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>name<span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>unique<span class=\"token operator\">:</span>true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>局部索引:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 只对 collection 的一部分添加索引。创建索引的时候，根据过滤条件判断是否对 document 添加索引，</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 对于没有添加索引的文档查找时采用的全表扫描，对添加了索引的文档查找时使用索引</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//userinfos 集合中 age>25 的部分添加 age 字段索引</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    db<span class=\"token punctuation\">.</span>userinfos<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span>age<span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span> partialFilterExpression<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>age<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>$gt<span class=\"token operator\">:</span> <span class=\"token number\">25</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 查询 age&lt;25 的 document 时，因为 age&lt;25 的部分没有索引，会全表扫描查找 (stage:COLLSCAN)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    db<span class=\"token punctuation\">.</span>userinfos<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>age<span class=\"token operator\">:</span><span class=\"token number\">23</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// 查询 age>25 的 document 时，因为 age>25 的部分创建了索引，会使用索引进行查找 (stage:IXSCAN)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    db<span class=\"token punctuation\">.</span>userinfos<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>age<span class=\"token operator\">:</span><span class=\"token number\">26</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>稀疏索引:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 当 document 包含 address 字段时才会创建索引</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 创建在 address 上创建稀疏索引</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>　　db<span class=\"token punctuation\">.</span>userinfos<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>address<span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>sparse<span class=\"token operator\">:</span>true<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>TTL 索引:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// (TTL indexes) 是一种特殊的单键索引，用于设置 document 的过期时间，mongoDB 会在 document 过期后将其删除，</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">//TTL 非常容易实现类似缓存过期策略的功能</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 添加测试数据</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">insertMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token punctuation\">&#123;</span>_id<span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>createtime<span class=\"token operator\">:</span>new <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>msg<span class=\"token operator\">:</span><span class=\"token string\">\"log1\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>       <span class=\"token punctuation\">&#123;</span>_id<span class=\"token operator\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>createtime<span class=\"token operator\">:</span>new <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>msg<span class=\"token operator\">:</span><span class=\"token string\">\"log2\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       <span class=\"token punctuation\">&#123;</span>_id<span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>createtime<span class=\"token operator\">:</span>new <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>msg<span class=\"token operator\">:</span><span class=\"token string\">\"log3\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>       <span class=\"token punctuation\">&#123;</span>_id<span class=\"token operator\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span>createtime<span class=\"token operator\">:</span>new <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>msg<span class=\"token operator\">:</span><span class=\"token string\">\"log4\"</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>       <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>       <span class=\"token comment\">// 在 createtime 字段添加 TTL 索引，过期时间是 120s</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>       db<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>createtime<span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> expireAfterSeconds<span class=\"token operator\">:</span> <span class=\"token number\">120</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">//logs 中的 document 在创建后的 120s 后过期，会被 mongoDB 自动删除</span></pre></td></tr></table></figure><p>文本索引：</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     title<span class=\"token operator\">:</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     tags：<span class=\"token string\">'text'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>搜索一下含有 educoder<span class=\"token punctuation\">.</span>net 的文章：</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>db<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>$text<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>$search<span class=\"token operator\">:</span><span class=\"token string\">'educoder.net'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li>search 后的关键词可以有多个，关键词之间的分隔符可以是多种字符，例如空格、下划线、逗号、加号等，但不能是 &quot;-&quot; 和 &quot;&quot;，因为这两个符号会有其他用途。搜索的多个关键字是 or 的关系，除非你的关键字包含&quot;-&quot;``</li>\n<li>匹配时不是完整的单词匹配，相似的词也可以匹配到；</li>\n</ul>\n</li>\n<li>\n<p>地理空间索引：</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3lvbmdnYW5nNy9hcnRpY2xlL2RldGFpbHMvMjgxMDk0NjM=\">参考文档</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZG9jczRkZXYuY29tL2RvY3MvemgvbW9uZ29kYi92My42L3JlZmVyZW5jZS9yZWZlcmVuY2Utb3BlcmF0b3ItcXVlcnktZ2VvSW50ZXJzZWN0cy5odG1s\">参考文档 2</span></p>\n<p>建立索引：(也可以建立组合索引)</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span>places<span class=\"token punctuation\">.</span><span class=\"token function\">ensureIndex</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> loc <span class=\"token operator\">:</span> <span class=\"token string\">\"2dsphere\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询多边形范围的值：</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span>places<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> loc <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                  <span class=\"token punctuation\">&#123;</span> $geoWithin <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span> $geometry <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                      <span class=\"token punctuation\">&#123;</span> type <span class=\"token operator\">:</span> <span class=\"token string\">\"Polygon\"</span> <span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                        coordinates <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                                          <span class=\"token punctuation\">[</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                                          <span class=\"token punctuation\">[</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                                          <span class=\"token punctuation\">[</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                                          <span class=\"token punctuation\">[</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                                        <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询附近的值:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span>places<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> loc <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                         <span class=\"token punctuation\">&#123;</span> $near <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                           <span class=\"token punctuation\">&#123;</span> $geometry <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                              <span class=\"token punctuation\">&#123;</span> type <span class=\"token operator\">:</span> <span class=\"token string\">\"Point\"</span> <span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                                coordinates <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token operator\">&lt;</span>longitude<span class=\"token operator\">></span> <span class=\"token punctuation\">,</span> <span class=\"token operator\">&lt;</span>latitude<span class=\"token operator\">></span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                             $maxDistance <span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>distance in meters<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                      <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查询圆形内的值:</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//[-88, 30] 为经纬度，  10 为半径  球形范围</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db<span class=\"token punctuation\">.</span>places<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> loc <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                  <span class=\"token punctuation\">&#123;</span> $geoWithin <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                    <span class=\"token punctuation\">&#123;</span> $centerSphere <span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                       <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">[</span> <span class=\"token operator\">-</span><span class=\"token number\">88</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">//2d 圆形范围</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>db<span class=\"token punctuation\">.</span>space<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      <span class=\"token string\">\"loc\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>         $geoWithin<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>             $center<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">70</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>         <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查找矩形范围：</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 左上角和右下角</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>box <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">39</span><span class=\"token punctuation\">,</span><span class=\"token number\">39</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span><span class=\"token number\">74</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db<span class=\"token punctuation\">.</span>space<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"loc\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>$within<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"$box\"</span><span class=\"token operator\">:</span>box<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li>\n<p>runCommand 方法：</p>\n<ul>\n<li>geoNear ：我们要查询的集合名称；</li>\n<li>near ：就是基于那个点进行搜索，这里是我们的搜索点 “长沙站”；</li>\n<li>spherical ：是个布尔值，如果为 true，表示将计算实际的物理距离，比如两点之间有多少 km，若为 false，则会基于点的单位进行计算 ；</li>\n<li>minDistance ：搜索的最小距离，这里的单位是米 ；</li>\n<li>maxDistance ：搜索的最大距离</li>\n</ul>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db<span class=\"token punctuation\">.</span><span class=\"token function\">runCommand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    geoNear<span class=\"token operator\">:</span><span class=\"token string\">'locations'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    near<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>type<span class=\"token operator\">:</span><span class=\"token string\">'Point'</span><span class=\"token punctuation\">,</span>coordinates<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">113.018987</span><span class=\"token punctuation\">,</span><span class=\"token number\">28.201215</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    spherical<span class=\"token operator\">:</span>true<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    minDistance<span class=\"token operator\">:</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    maxDistance<span class=\"token operator\">:</span><span class=\"token number\">8000</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<h2 id=\"创建仓库管理员\"><a class=\"anchor\" href=\"#创建仓库管理员\">#</a> <strong>创建仓库管理员</strong></h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use admin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 在数据库 admin 中，创建管理员用户 abc，密码为 123，拥有 root 权限</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db.createUser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>user:<span class=\"token string\">\"abc\"</span>,pwd:<span class=\"token string\">\"123\"</span>,roles:<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>role:<span class=\"token string\">\"root\"</span>,db:<span class=\"token string\">\"admin\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 验证管理员用户是否存在：返回为 1 说明成功</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>db.auth<span class=\"token punctuation\">(</span><span class=\"token string\">\"abc\"</span>,<span class=\"token string\">\"123\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 在 admin 数据库内查看创建的用户</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>show <span class=\"token function\">users</span></pre></td></tr></table></figure><p>用新身份进入 mongo：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 先关闭现在有的数据库服务</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>use admin </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db.shutdownServer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 重新启动 mongod 服务</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>mongod --auth --port <span class=\"token number\">27017</span> --dbpath /data/db --logpath /tmp/mongodb.log --fork</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>auth: 开启身份验证；</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>dbpath: 指定数据存放路径；</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>logpath: 指定日志文件输出路径；</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>fork: 后台运行</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 管理员登录数据库</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>mongo -uabc -p123 admin</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># 删除管理员用户 abc 命令如下：</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>db.system.users.remove<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>user:<span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li>\n<p>情况二：在受限的情况下验证身份；</p>\n<p>开启身份验证后，我们使用命令 <code>mongo</code>  直接连接数据库，虽然也能成功连接，但是在进行数据库操作如 <code>show dbs</code>  时会受到限制：</p>\n</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kYXRhLmVkdWNvZGVyLm5ldC9hcGkvYXR0YWNobWVudHMvMjA3ODQy\">https://data.educoder.net/api/attachments/207842</span></p>\n<p>这是我们就要进入到 <code>admin</code>  数据库，去进行身份验证：返回数字 <code>1</code>  说明验证成功， <code>0</code>  说明失败，验证成功后将拥有管理员权限</p>\n<pre><code>use admindb.auth(&quot;abc&quot;,&quot;123&quot;)\n</code></pre>\n</li>\n<li>\n<p><strong>创建普通用户</strong></p>\n<p>创建用户： <code>user2</code> ，密码： <code>user2</code> ，对数据库 <code>test2</code>  有读写权限，对数据库 <code>test</code>  有只读权限</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use test2</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.createUser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>user:<span class=\"token string\">\"user2\"</span>,pwd:<span class=\"token string\">\"user2\"</span>,roles:<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>role:<span class=\"token string\">\"readWrite\"</span>,db:<span class=\"token string\">\"test2\"</span><span class=\"token punctuation\">&#125;</span>,<span class=\"token punctuation\">&#123;</span>role:<span class=\"token string\">\"read\"</span>,db:<span class=\"token string\">\"test\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>删除用户</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use test2</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>db.dropUser<span class=\"token punctuation\">(</span><span class=\"token string\">\"user2\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p><strong>限制 ip 访问</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 关闭服务（先用默认方法启动数据库：mongo ）：</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>use admin            <span class=\"token comment\">#进入 admin 数据库</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>db.shutdownServer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#关闭服务</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">exit</span>                 <span class=\"token comment\">#退出数据库</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>启动服务（只有本机 IP 可以连接数据库）：</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>mongod --dbpath /data/db --logpath /tmp/mongodb.log --bind_ip <span class=\"token number\">127.0</span>.0.1 --fork</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># binf_ip ：限制连接的网络接口，可以设置多个，以逗号隔开。</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 限制端口访问 (同样先关数据库服务）</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>mongod -port <span class=\"token number\">20000</span> --dbpath /data/db --logpath /tmp/mongodb.log --bind_ip <span class=\"token number\">127.0</span>.0.1 --fork</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 连接数据库</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>mongo <span class=\"token number\">127.0</span>.0.1:20000</pre></td></tr></table></figure></li>\n<li>\n<p><strong>Profiling 工具</strong></p>\n<p>优化步骤一般是：</p>\n<ul>\n<li>用慢查询日志（system.profile）找到超过 50ms 的语句；</li>\n<li>然后再通过 .explain () 解析影响行数，分析为什么超过 50ms；</li>\n<li>决定是不是需要添加索引</li>\n</ul>\n<p>Profiling 有两种开启方式，一种是启动服务时配置启动，一种是 mongoshell 中进行实时配置。</p>\n<p>Profiling 级别说明：</p>\n<ul>\n<li>0：关闭，不收集任何数据；</li>\n<li>1：收集慢查询数据，默认是 100 毫秒；</li>\n<li>2：收集所有数据</li>\n</ul>\n<p><strong>全局开启 Profiling:</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>可以在 mongod 启动时加上以下参数：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongod --profile<span class=\"token operator\">=</span><span class=\"token number\">1</span>  --slowms<span class=\"token operator\">=</span><span class=\"token number\">50</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>或在配置文件里添加两行:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>profile <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>slowms <span class=\"token operator\">=</span> <span class=\"token number\">50</span></pre></td></tr></table></figure><p><strong>关闭 Profiling 工具：(<strong>只需要将收集慢查询数据的时间设置为 0 就可以关闭</strong>):</strong> <code>db.getProfilingLevel(0)</code></p>\n<p><strong>mongo shell 中启动配置:</strong></p>\n<p>查看状态：  <code>db.getProfilingStatue()</code></p>\n<p>查看级别：  <code>db.getProfilingLevel()</code></p>\n<p>设置级别：  <code>db.setProfilingLevel(1)</code></p>\n<p>设置级别和时间：  <code>db.setProfilingLevel(1,50)</code>  时间 50ms</p>\n</li>\n<li>\n<p><strong>只在 linux 有效</strong></p>\n<p>返回所有结果：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>结果：</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t\t<span class=\"token string\">\"op\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"insert\"</span>,         <span class=\"token comment\">#操作类型，有 insert、query、update、remove、getmore、command</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token string\">\"ns\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"test.items\"</span>,     <span class=\"token comment\">#操作的集合</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token string\">\"command\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>              <span class=\"token string\">\"insert\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"items\"</span>,</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>              <span class=\"token string\">\"ordered\"</span> <span class=\"token builtin class-name\">:</span> true,</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>              <span class=\"token string\">\"<span class=\"token variable\">$db</span>\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"test\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token string\">\"ninserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>,</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token string\">\"keysInserted\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span>,</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token string\">\"numYield\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>,     <span class=\"token comment\">#该操作为了使其他操作完成而放弃的次数。通常来说，当他们需要访问还没有完全读入内存中的数据时，操作将放弃。这使得在 MongoDB 为了放弃操作进行数据读取的同时，还有数据在内存中的其他操作可以完成</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token string\">\"locks\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span>         <span class=\"token comment\">#锁信息，R：全局读锁；W：全局写锁；r：特定数据库的读锁；w：特定数据库的写锁</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>              <span class=\"token string\">\"Global\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                      <span class=\"token string\">\"acquireCount\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                              <span class=\"token string\">\"r\"</span> <span class=\"token builtin class-name\">:</span> NumberLong<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>,</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                              <span class=\"token string\">\"w\"</span> <span class=\"token builtin class-name\">:</span> NumberLong<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>              <span class=\"token string\">\"Database\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                      <span class=\"token string\">\"acquireCount\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                              <span class=\"token string\">\"w\"</span> <span class=\"token builtin class-name\">:</span> NumberLong<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>              <span class=\"token string\">\"Collection\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                      <span class=\"token string\">\"acquireCount\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                              <span class=\"token string\">\"w\"</span> <span class=\"token builtin class-name\">:</span> NumberLong<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>      <span class=\"token string\">\"responseLength\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">45</span>,     <span class=\"token comment\">#返回字节长度，如果这个数字很大，考虑值返回所需字段</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token string\">\"protocol\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"op_msg\"</span>,</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      <span class=\"token string\">\"millis\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">60</span>,     <span class=\"token comment\">#消耗的时间（毫秒）</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token string\">\"ts\"</span> <span class=\"token builtin class-name\">:</span> ISODate<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-12-07T08:19:11.997Z\"</span><span class=\"token punctuation\">)</span>,     <span class=\"token comment\">#该命令在何时执行</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token string\">\"client\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"127.0.0.1\"</span>,     <span class=\"token comment\">#链接 ip 或则主机</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token string\">\"appName\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"MongoDB Shell\"</span>,</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      <span class=\"token string\">\"allUsers\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">]</span>,</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token string\">\"user\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>profile 部分字段解释：</p>\n<ul>\n<li>op ：操作类型；</li>\n<li>ns ：被查的集合；</li>\n<li>commond ：命令的内容；</li>\n<li>docsExamined ：扫描文档数；</li>\n<li>nreturned ：返回记录数；</li>\n<li>millis ：耗时时间，单位毫秒；</li>\n<li>ts ：命令执行时间；</li>\n<li>responseLength ：返回内容长度。</li>\n<li><strong>常用的慢日志查询命令</strong>\n<ul>\n<li>\n<p>返回最近的 10 条记录：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.limit<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> ts <span class=\"token builtin class-name\">:</span> -1 <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>返回所有的操作，除 command 类型的：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> op: <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$ne</span> <span class=\"token builtin class-name\">:</span> <span class=\"token string\">'command'</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>返回特定集合：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> ns <span class=\"token builtin class-name\">:</span> <span class=\"token string\">'test.items'</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>返回大于 5 毫秒慢的操作：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> millis <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token variable\">$gt</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>从一个特定的时间范围内返回信息：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span>                    </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span>                     </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tts <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span>                           </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token variable\">$gt</span> <span class=\"token builtin class-name\">:</span> new ISODate<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-12-09T08:00:00Z\"</span><span class=\"token punctuation\">)</span>,                          </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token variable\">$lt</span> <span class=\"token builtin class-name\">:</span> new ISODate<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-12-10T03:40:00Z\"</span><span class=\"token punctuation\">)</span>                          </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>特定时间，限制用户，按照消耗时间排序：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span>                    </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span>                      </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tts <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">&#123;</span>                            </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t\t<span class=\"token variable\">$gt</span> <span class=\"token builtin class-name\">:</span> new ISODate<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-12-09T08:00:00Z\"</span><span class=\"token punctuation\">)</span>,                            </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token variable\">$lt</span> <span class=\"token builtin class-name\">:</span> new ISODate<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-12-10T03:40:00Z\"</span><span class=\"token punctuation\">)</span>                           </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token punctuation\">&#125;</span>                    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span>,                    </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#123;</span> user <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">&#125;</span>                   </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> millis <span class=\"token builtin class-name\">:</span> -1 <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>查看最新的 Profile 记录：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>db.system.profile.find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token variable\">$natural</span>:-1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>.limit<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>.pretty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<p>显示 5 个最近的事件 (这个 Windows 有反应但是数据不对)：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>show profile</pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<h2 id=\"主从复制\"><a class=\"anchor\" href=\"#主从复制\">#</a> <strong>主从复制</strong></h2>\n<p>配置文件：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 8888.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>dbpath <span class=\"token operator\">=</span>                <span class=\"token comment\">#主数据库地址</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>port <span class=\"token operator\">=</span> <span class=\"token number\">8888</span>             <span class=\"token comment\">#主数据库端口号</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>bind_ip <span class=\"token operator\">=</span> <span class=\"token number\">127.0</span>.0.1    <span class=\"token comment\">#主数据库所在服务器</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>master <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>           <span class=\"token comment\">#确定我是主服务器</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 7777.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>dbpath <span class=\"token operator\">=</span>                    <span class=\"token comment\">#从数据库地址</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>port <span class=\"token operator\">=</span> <span class=\"token number\">7777</span>                 <span class=\"token comment\">#从数据库端口号</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>bind_ip <span class=\"token operator\">=</span> <span class=\"token number\">127.0</span>.0.1         <span class=\"token comment\">#从数据库所在服务器</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">source</span> <span class=\"token operator\">=</span> <span class=\"token number\">127.0</span>.0.1:8888     <span class=\"token comment\">#确定我数据库端口  这个配置项 (source) 可以用 shell 动态添加</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>slave <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>                <span class=\"token comment\">#确定自己是从服务器</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#启动</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongod --config <span class=\"token number\">7777</span>.conf</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mongod --config <span class=\"token number\">8888</span>.conf</pre></td></tr></table></figure><p>主从复制的其他设置项</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>--only        <span class=\"token comment\"># 从节点 > 指定复制某个数据库默认是复制全部数据库</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>--slavedelay  <span class=\"token comment\"># 从节点 > 设置主数据库同步数据的延迟 (单位是秒)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>--fastsync    <span class=\"token comment\"># 从节点 > 以主数据库的节点快照为节点启动从数据库</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>--autoresync  <span class=\"token comment\"># 从节点 > 如果不同步则从新 同步数据库</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>--oplogSize   <span class=\"token comment\"># 主节点 > 设置 oplog 的大小 (主节点操作记录存储到 local 的 oplog 中)</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>**从节点**中关于主节点的信息全部存到local的sources的集合中</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>只要对集合进行操作就可以动态操作主从关系</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>use <span class=\"token builtin class-name\">local</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>挂接主节点操作之前只留下从数据库服务</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>db.sources.insert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"host\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"127.0.0.1:8888\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>删除已经挂接的主节点操作之前只留下从数据库服务</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>db.sources.remove<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"host\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"127.0.0.1:8888\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<h2 id=\"副本集的搭建linux\"><a class=\"anchor\" href=\"#副本集的搭建linux\">#</a> <strong>副本集的搭建（Linux）</strong></h2>\n<p>非配置文件：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9tb25nb2RiL21vbmdvZGItcmVwbGljYXRpb24uaHRtbA==\">MongoDB 复制 (副本集) | 菜鸟教程 (runoob.com)</span></p>\n<p>相关文件配置 (可将其配置到对应的数据库地址中，注释的地方修改后就是一个新的副本)：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>systemLog:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    destination: <span class=\"token function\">file</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    path: /data/db1/mongod.log <span class=\"token comment\"># log path</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    logAppend: <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>storage <span class=\"token builtin class-name\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    dbPath: /data/db1          <span class=\"token comment\"># data directory</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>net <span class=\"token builtin class-name\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    bindIp: <span class=\"token number\">0.0</span>.0.0</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    port: <span class=\"token number\">28017</span>                <span class=\"token comment\"># port</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>replication:</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    replSetName: rs0</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>processManagement:</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    fork: <span class=\"token boolean\">true</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 进入对应环境</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mongo localhost:28018</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 复制集的搭建</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>rs.initiate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#  出现：rs0:OTHER > 或 rs0:SECONDARY> 表示进入复制集 在按回车进入 rs0:PRIMARY></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 查看状态</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>rs.status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 添加副本节点</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>rs.add<span class=\"token punctuation\">(</span><span class=\"token string\">\"主机名:28018\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 添加仲裁节点</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>rs.addArb<span class=\"token punctuation\">(</span><span class=\"token string\">\"180.76.159.126:27019\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 一般情况副本是不允许查询的所以需要查询要开启开启从库查询功能</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>rs.slaveOk<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> 或 rs.slaveOk<span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span>              <span class=\"token comment\"># 在从服务器中使用命令 或</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>db.getMongo<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>.setSlaveOK<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 在主服务器使用命令</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 若取消读权限则</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>rs.slaveOk<span class=\"token punctuation\">(</span>false<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<h2 id=\"副本集的搭建windows\"><a class=\"anchor\" href=\"#副本集的搭建windows\">#</a> <strong>副本集的搭建（Windows）</strong></h2>\n<p>主节点出现故障，其余服务器会被推选出主节点，出现故障的服务器修好后，自动变成副节点</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 三个服务形成闭环</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>dbpath <span class=\"token operator\">=</span> D:<span class=\"token punctuation\">\\</span>sortware<span class=\"token punctuation\">\\</span>mongod<span class=\"token punctuation\">\\</span>02<span class=\"token punctuation\">\\</span>B</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span> <span class=\"token number\">2222</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">bind_ip</span><span class=\"token operator\">=</span> <span class=\"token number\">127.0</span>.0.1</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>replSet <span class=\"token operator\">=</span> child/127.0.0.1:3333</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>dbpath <span class=\"token operator\">=</span> D:<span class=\"token punctuation\">\\</span>sortware<span class=\"token punctuation\">\\</span>mongod<span class=\"token punctuation\">\\</span>02<span class=\"token punctuation\">\\</span>C</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span> <span class=\"token number\">3333</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">bind_ip</span><span class=\"token operator\">=</span> <span class=\"token number\">127.0</span>.0.1</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>replSet <span class=\"token operator\">=</span> child/127.0.0.1:1111</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>dbpath <span class=\"token operator\">=</span> D:<span class=\"token punctuation\">\\</span>sortware<span class=\"token punctuation\">\\</span>mongod<span class=\"token punctuation\">\\</span>02<span class=\"token punctuation\">\\</span>A</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span> <span class=\"token number\">1111</span> <span class=\"token comment\">#端口</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>bind_ip <span class=\"token operator\">=</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token comment\">#服务地址</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>replSet <span class=\"token operator\">=</span> child/127.0.0.1:2222<span class=\"token comment\">#设定同伴</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 开启服务</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>mongod --config A.conf</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>mongod --config B.conf</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>mongod --config C.conf</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 启动 shell</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>mongo <span class=\"token number\">127.0</span>.0.1:1111</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 2. 初始化副本集</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 注：备份点不能进行查询操作，只有活跃点 (shell 会有 PRIMARY>) 可以进行查询操作，所以应在活跃点进行初始化</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>use admin</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>db.runCommand<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"replSetInitiate\"</span><span class=\"token builtin class-name\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">\"id\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">'child'</span>,  <span class=\"token comment\"># 与上面 child 对应</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">\"members\"</span>:<span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token string\">\"_id\"</span>:1,</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token string\">\"hostl\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"127.0.0.1:1111\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token string\">\"_id\"</span>:2,</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token string\">\"host\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"127.0.0.1:2222\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token string\">\"_id\"</span>:3,</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token string\">\"host\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"127.0.0.1:3333\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># 2. 查看副本集状态</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>rs.status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 3. 节点和初始化高级参数</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>standard    常规节点:参与投票有可能成为活跃节点</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>passive     副本节点:参与投票但是不能成为活跃节点</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>arbiter     仲裁节点:只是参与投票不复制节点也不能成为活跃节点</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 4. 高级参数</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>Priority <span class=\"token number\">0</span>到1000之间,0代表是副本节点,1到1000是常规节点</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>arbiterOnly :true仲裁节点</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>用法</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>members:<span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">\"_id\"</span>:1,</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token string\">\"host\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"127.0.0.1:1111\"</span>,</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    arbiterOnly <span class=\"token builtin class-name\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># 5. 优先级相同时候仲裁组建的规则</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 会选更新时间最早的数据库</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 6. 读写分离操作 > 扩展读</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#     6.1 一般情况下作为副本的节点是不能进行数据库读操作的</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#         但是在读取密集型的系统中读写分离是十分必要的</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">#     6.2 设直读写分离</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#         slaveOkay: true</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">#         很遗憾他在 shell 中无法掩饰，，这个特性是被与到 mongoDB 的</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\">#         驱动程序中的，在 java 和 node 等其他语言中可以完成</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 7.oplog</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">#     他是被存储在本地数据库 local 中的，他的每一个文档保证这一 个节点操作</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\">#     如果想故障恢复可以更彻底 oplog 可已经尽量设置大一些用来保存更 多的操作</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">#     信息</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">#     改变 oplog 大小</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">#     主库 --master --oplogSize size</span></pre></td></tr></table></figure></li>\n<li>\n<h2 id=\"头歌上的副本搭建\"><a class=\"anchor\" href=\"#头歌上的副本搭建\">#</a> <strong>头歌上的副本搭建</strong></h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongod1.conf 内容如下：同理配三个并执行</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span><span class=\"token number\">27018</span>     <span class=\"token comment\">#配置端口号</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">dbpath</span><span class=\"token operator\">=</span>/data/db1     <span class=\"token comment\">#配置数据存放的位置</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">logpath</span><span class=\"token operator\">=</span>/logs/mongo/mongod1.log     <span class=\"token comment\">#配置日志存放的位置</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">logappend</span><span class=\"token operator\">=</span>true     <span class=\"token comment\">#日志使用追加的方式</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">fork</span><span class=\"token operator\">=</span>true     <span class=\"token comment\">#设置在后台运行</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">replSet</span><span class=\"token operator\">=</span>YOURMONGO     <span class=\"token comment\">#配置复制集名称，该名称要在所有的服务器一致</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>执行： mongod -f /etc/mongod/mongod1.conf</pre></td></tr></table></figure><p>配主节点并配置仲裁：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>config <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  _id:<span class=\"token string\">\"YOURMONGO\"</span>,</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  members:<span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span>_id:0,host:<span class=\"token string\">'127.0.0.1:27018'</span><span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span>_id:1,host:<span class=\"token string\">'127.0.0.1:27019'</span>,arbiterOnly:true<span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span>_id:2,host:<span class=\"token string\">'127.0.0.1:27020'</span><span class=\"token punctuation\">&#125;</span>,</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>rs.initiate<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>切换 Primary 节点到指定的节点</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongo --port <span class=\"token number\">27018</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>rs.conf<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>     <span class=\"token comment\">#查看配置</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>rs.status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\">#查看状态</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 其中 priority : 是优先级，默认为 1，优先级 0 为被动节点，不能成为活跃节点。优先级不为 0 则按照由大到小选出活跃节点</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 因为默认的都是 1，所以只需要把给定的服务器的 priority 加到最大即可。让 27020 成为主节点，操作如下</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">cfg</span><span class=\"token operator\">=</span>rs.conf<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>cfg.members<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>.priority<span class=\"token operator\">=</span><span class=\"token number\">2</span>     <span class=\"token comment\">#修改 priority,members [2] 即对应 27020 端口</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>rs.reconfig<span class=\"token punctuation\">(</span>cfg<span class=\"token punctuation\">)</span>     <span class=\"token comment\">#重新加载配置文件，强制了副本集进行一次选举，优先级高的成为 Primary。在这之间整个集群的所有节点都是 secondary</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>rs.status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li>\n<h2 id=\"头歌的分片集搭建\"><a class=\"anchor\" href=\"#头歌的分片集搭建\">#</a> <strong>头歌的分片集搭建</strong></h2>\n<p><strong>配置文件设置</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> -p /data/shard1/db</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mkdir</span> -p /logs/shard1/log</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">mkdir</span> -p /data/shard2/db</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">mkdir</span> -p /logs/shard2/log</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">mkdir</span> -p /data/shard3/db</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">mkdir</span> -p /logs/shard3/log</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">mkdir</span> -p /data/config/db</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">mkdir</span> -p /logs/config/log</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">mkdir</span> -p /logs/mongs/log</pre></td></tr></table></figure><p>配置文件 (新建在 /etc/mongo 目录下):(其中 shardsvr 是用来开启分片的。)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">dbpath</span><span class=\"token operator\">=</span>/data/shard1/db</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">logpath</span><span class=\"token operator\">=</span>/logs/shard1/log/mongodb.log</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span><span class=\"token number\">10001</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">shardsvr</span><span class=\"token operator\">=</span>true</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">fork</span><span class=\"token operator\">=</span>true</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>之后配三个与副本集群同理</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>mongod -f /etc/mongo/mongod1.conf</pre></td></tr></table></figure><p><strong>config 节点</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongod --dbpath /data/config/db --logpath /logs/config/log/mongodb.log --port <span class=\"token number\">10004</span> --configsvr --replSet cs --fork</pre></td></tr></table></figure><p>连接 route 节点： <code>mongo localhost:10004</code></p>\n<p>输入以下命令：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use admin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>cfg <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  _id:<span class=\"token string\">'cs'</span>,</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  configsvr:true,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  members:<span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">&#123;</span>_id:0,host:<span class=\"token string\">'localhost:10004'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>rs.initiate<span class=\"token punctuation\">(</span>cfg<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><strong>route 节点</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>mongos --configdb cs/localhost:10004 --logpath /logs/mongs/log/mongodb.log --port <span class=\"token number\">10005</span> --fork</pre></td></tr></table></figure><p>连接上 route 节点： <code>mongo localhost:10005</code></p>\n<p>添加分片：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>sh.addShard<span class=\"token punctuation\">(</span><span class=\"token string\">'localhost:10001'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>sh.addShard<span class=\"token punctuation\">(</span><span class=\"token string\">'localhost:10002'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>sh.addShard<span class=\"token punctuation\">(</span><span class=\"token string\">'localhost:10003'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>查看集群的状态：分片摘要信息、数据库摘要信息、集合摘要信息等: <code>sh.status()</code></p>\n<p><strong>分片验证:</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>连接 route 节点：mongo localhost:10005；</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>数据量太小可能导致分片失败，这是因为 chunksize 默认的大小是 64MB（ chunkSize 来制定块的大小，单位是 MB ），使用以下代码把 chunksize 改为 1MB 后，插入数据，便可以分片成功。</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>use config</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>db.settings.save<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">&#123;</span> _id:<span class=\"token string\">\"chunksize\"</span>, value: <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>对集合使用的数据库启用分片：</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>sh.enableSharding<span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>添加索引：</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>db.user.ensureIndex<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string\">\"uid\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>分片：</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>sh.shardCollection<span class=\"token punctuation\">(</span><span class=\"token string\">\"test.user\"</span>,<span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"uid\"</span> <span class=\"token builtin class-name\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>插入10万条数据（大概需要40s 左右）：</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>use <span class=\"token builtin class-name\">test</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>for<span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">100000</span><span class=\"token punctuation\">;</span>i++<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>db.user.insert<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>uid:i,username:<span class=\"token string\">'test-'</span>+i<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>去各个节点查看数据分布情况：查询的文档条数，加起来正好10万条。</pre></td></tr></table></figure></li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N1bmNoaTQyMjEvYXJ0aWNsZS9kZXRhaWxzLzEwNzQ3MzU0NA==\">findAndModify()</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTMzMTAwNzUvYXJ0aWNsZS9kZXRhaWxzLzI1NjU3NzY5\">runCommand()</span></p>\n",
            "tags": [
                "计算机科学",
                "MongoDB"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/about/",
            "url": "https://obsidianlyg.github.io/about/",
            "title": "关于个人",
            "date_published": "2021-12-23T16:00:00.000Z",
            "content_html": "<h1 id=\"本鱼\"><a class=\"anchor\" href=\"#本鱼\">#</a> 本鱼</h1>\n<p>昵称：鲈鱼</p>\n<p>性别：男</p>\n<p>个人 QQ：879142964</p>\n<p>简介：</p>\n<pre><code>没啥想说的，主要是有点懒</code></pre>\n",
            "tags": [
                "about"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/special/",
            "url": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/special/",
            "title": "Step.4 主题特殊功能",
            "date_published": "2020-08-13T13:45:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/computer-science/note/theme-shoka-doc/\">🚀快速开始</a> - <a href=\"/computer-science/note/theme-shoka-doc/dependents/\">💌依赖插件</a> - <a href=\"/computer-science/note/theme-shoka-doc/config/\">📌基本配置</a> - <a href=\"/computer-science/note/theme-shoka-doc/display/\">🌈界面显示</a> - <a href=\"/computer-science/note/theme-shoka-doc/special/\"><strong>🦄特殊功能</strong></a></p>\n</div>\n<div class=\"note info\">\n<p>以下介绍可以使用的 markdown 或者标签代码。<br />\n功能大部分基于 <code>hexo-renderer-multi-markdown-it</code>  渲染器，尤其是代码块的显示，与默认渲染器不兼容。</p>\n</div>\n<h1 id=\"links-链接块\"><a class=\"anchor\" href=\"#links-链接块\">#</a>  <code>links</code>  链接块</h1>\n<p>本功能参考 NexT，基于 Hexo Tag 功能，用来建立友链或其他网址链接功能。</p>\n<p>文章中的使用格式：</p>\n<ol>\n<li>使用 <code>links</code>  标签块，包围 <code>yml</code>  语法书写的内容，字段包括</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>代码</th>\n<th>说明</th>\n<th>选择</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>site</code></td>\n<td>站点名称</td>\n<td>必填</td>\n</tr>\n<tr>\n<td><code>owner</code></td>\n<td>管理员名字</td>\n<td>可选，默认为 <code>site</code>  的值</td>\n</tr>\n<tr>\n<td><code>url</code></td>\n<td>站点链接</td>\n<td>必填</td>\n</tr>\n<tr>\n<td><code>desc</code></td>\n<td>站点描述</td>\n<td>可选，默认为 <code>url</code>  的值</td>\n</tr>\n<tr>\n<td><code>image</code></td>\n<td>站点图片</td>\n<td>可选，默认为 <code>images/404.png</code></td>\n</tr>\n<tr>\n<td><code>color</code></td>\n<td>方块颜色</td>\n<td>可选，默认为 <code>#666</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"><span>top</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- site: #站点名称</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  owner: #管理员名字</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  url: #站点网址</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  desc: #简短描述</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  image: #一张图片</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  color: #颜色代码</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr></table></figure><p>举个栗子：</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- site: 優萌初華</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  owner: 霜月琉璃</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  desc: 琉璃的医学 &amp; 编程笔记</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  image: https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;amehime&#x2F;shoka@latest&#x2F;images&#x2F;avatar.jpg</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  color: &quot;#e9546b&quot;</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>- site: 回梦游春</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  owner: obsidian</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  url: http:&#x2F;&#x2F;obsidianlyg.gitee.io</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  image: images&#x2F;avatar.jpg</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>- site: 優萌初華</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  desc: 琉璃的医学 &amp; 编程笔记</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  color: &quot;#9d5b8b&quot;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr></table></figure><p><div class=\"links\"><div class=\"item\" title=\"霜月琉璃\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"https://cdn.jsdelivr.net/gh/amehime/shoka@latest/images/avatar.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">優萌初華</span>\n          <p class=\"desc\">琉璃的医学 & 编程笔记</p>\n          </div></div><div class=\"item\" title=\"obsidian\"><span class=\"exturl image\" data-url=\"aHR0cDovL29ic2lkaWFubHlnLmdpdGVlLmlv\" data-background-image=\"/images/avatar.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cDovL29ic2lkaWFubHlnLmdpdGVlLmlv\">回梦游春</span>\n          <p class=\"desc\">http://obsidianlyg.gitee.io</p>\n          </div></div><div class=\"item\" title=\"優萌初華\" style=\"--block-color:#9d5b8b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"/images/404.png\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">優萌初華</span>\n          <p class=\"desc\">琉璃的医学 & 编程笔记</p>\n          </div></div></div></p>\n<ol start=\"2\">\n<li>以上标签块里的内容，还可以保存到一个 <code>yml</code>  文件中，然后使用 <code>linksfile</code>  标签。<br />\n其中， <code>path</code>  位于 <code>&lt;root&gt;/source</code>  目录下。</li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% linksfile [path] %&#125;</pre></td></tr></table></figure><p>举个栗子：</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% linksfile friends&#x2F;_data.yml %&#125;</pre></td></tr></table></figure><h1 id=\"code代码块\"><a class=\"anchor\" href=\"#code代码块\">#</a>  <code>code</code>  代码块</h1>\n<p>使用 <code>markdown-it-prism</code>  进行代码高亮，支持显示行号、行高亮 <code>mark</code> 、命令行提示符 <code>command</code> 、代码块标题。</p>\n<p>基本格式： <code>[language] [title] [url] [link text] [mark] [command]</code></p>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>描述</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n<p>language</p>\n</td>\n<td>\n<ul>\n<li>支持的语言<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcmlzbWpzLmNvbS8jc3VwcG9ydGVkLWxhbmd1YWdlcw==\">戳此</span></li>\n<li>如果不需要代码高亮，但希望显示代码块样式，则设为 <code>raw</code></li>\n<li>留空或设为 <code>info</code> ，将不显示代码高亮和代码块样式</li>\n</ul>\n</td>\n<td>\n<p>null</p>\n</td>\n</tr>\n<tr>\n<td>title</td>\n<td>代码块的标题文字</td>\n<td>null</td>\n</tr>\n<tr>\n<td>url</td>\n<td>代码块标题右侧显示的链接</td>\n<td>null</td>\n</tr>\n<tr>\n<td>link text</td>\n<td>上述链接显示的标题</td>\n<td>link</td>\n</tr>\n<tr>\n<td>\n<p>mark</p>\n</td>\n<td>\n<p>行高亮显示，格式为 <code>mark:行号,行号开始-行号结束,其他行号</code> 。<br />\n例如 <code>mark:1,4-7,10</code> ，将高亮显示第 1、4、5、6、7、10 行</p>\n</td>\n<td>\n<p>null</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>command</p>\n</td>\n<td>\n<p>命令行提示符，格式为 <code>command:(&quot;提示内容&quot;:行号,行号||&quot;提示内容&quot;:行号开始-行号结束)</code> <br />\n 例如 <code>command:(&quot;[root@localhost] $&quot;:1,9-10||&quot;[admin@remotehost] #&quot;:4-6)</code></p>\n</td>\n<td>\n<p>null</p>\n</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#96;&#96;&#96;java 行高亮 https:&#x2F;&#x2F;shoka.lostyu.me 参考链接 mark:1,6-7</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>import java.util.Scanner;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>...</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Scanner in &#x3D; new Scanner (System.in);</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>&#x2F;&#x2F; 输入 Scan 之后，按下键盘 Alt + “&#x2F;” 键，Eclipse 下自动补全。</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>System.out.println (in.nextLine ());</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>System.out.println (&quot;Hello&quot; + &quot;world.&quot;);</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>&#96;&#96;&#96;bash 命令行提示符 command:(&quot;[root@localhost] $&quot;:1,9-10||&quot;[admin@remotehost] #&quot;:4-6)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>pwd</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>&#x2F;usr&#x2F;home&#x2F;chris&#x2F;bin</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>ls -la</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>total 2</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>drwxr-xr-x   2 chris  chris     11 Jan 10 16:48 .</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>drwxr--r-x  45 chris  chris     92 Feb 14 11:10 ..</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>-rwxr-xr-x   1 chris  chris    444 Aug 25  2013 backup</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>-rwxr-xr-x   1 chris  chris    642 Jan 17 14:42 deploy</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>git add -A</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>git commit -m &quot;update&quot;</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>git push</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>行高亮</span><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">参考链接</span></figcaption><table><tr class=\"marked\"><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Scanner</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Scanner</span> in <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Scanner</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// 输入 Scan 之后，按下键盘 Alt + “/” 键，Eclipse 下自动补全。</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr class=\"marked\"><td data-num=\"6\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>in<span class=\"token punctuation\">.</span><span class=\"token function\">nextLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr class=\"marked\"><td data-num=\"7\"></td><td><pre><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello\"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" world.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>命令行提示符</span></figcaption><table><tr><td data-num=\"1\"></td><td data-command=\"[root@localhost] $\"></td><td><pre><span class=\"token builtin class-name\">pwd</span></pre></td></tr><tr><td data-num=\"2\"></td><td data-command=\"\"></td><td><pre>/usr/home/chris/bin</pre></td></tr><tr><td data-num=\"3\"></td><td data-command=\"\"></td><td><pre><span class=\"token function\">ls</span> -la</pre></td></tr><tr><td data-num=\"4\"></td><td data-command=\"[admin@remotehost] #\"></td><td><pre>total <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"5\"></td><td data-command=\"[admin@remotehost] #\"></td><td><pre>drwxr-xr-x   <span class=\"token number\">2</span> chris  chris     <span class=\"token number\">11</span> Jan <span class=\"token number\">10</span> <span class=\"token number\">16</span>:48 <span class=\"token builtin class-name\">.</span></pre></td></tr><tr><td data-num=\"6\"></td><td data-command=\"[admin@remotehost] #\"></td><td><pre>drwxr--r-x  <span class=\"token number\">45</span> chris  chris     <span class=\"token number\">92</span> Feb <span class=\"token number\">14</span> <span class=\"token number\">11</span>:10 <span class=\"token punctuation\">..</span></pre></td></tr><tr><td data-num=\"7\"></td><td data-command=\"\"></td><td><pre>-rwxr-xr-x   <span class=\"token number\">1</span> chris  chris    <span class=\"token number\">444</span> Aug <span class=\"token number\">25</span>  <span class=\"token number\">2013</span> backup</pre></td></tr><tr><td data-num=\"8\"></td><td data-command=\"\"></td><td><pre>-rwxr-xr-x   <span class=\"token number\">1</span> chris  chris    <span class=\"token number\">642</span> Jan <span class=\"token number\">17</span> <span class=\"token number\">14</span>:42 deploy</pre></td></tr><tr><td data-num=\"9\"></td><td data-command=\"[root@localhost] $\"></td><td><pre><span class=\"token function\">git</span> <span class=\"token function\">add</span> -A</pre></td></tr><tr><td data-num=\"10\"></td><td data-command=\"[root@localhost] $\"></td><td><pre><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"update\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td data-command=\"\"></td><td><pre><span class=\"token function\">git</span> push</pre></td></tr></table></figure><h1 id=\"quiz-练习题与答案\"><a class=\"anchor\" href=\"#quiz-练习题与答案\">#</a>  <code>quiz</code>  练习题与答案</h1>\n<p>这个功能是用来显示练习题的。<br />\n需要在 Front Matter 中添加 <code>quiz: true</code> ，以正确显示题型标签。</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"><span>几个例子</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: 练习题与答案</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>quiz: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>1. 编译时多态主要指运算符重载与函数重载，而运行时多态主要指虚函数。 &#123;.quiz .true&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>2. 有基类 &#96;SHAPE&#96;，派生类 &#96;CIRCLE&#96;，声明如下变量：  &#123;.quiz .multi&#125;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    &#96;&#96;&#96;cpp</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    SHAPE shape1,*p1;</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    CIRCLE circle1,*q1;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    &#96;&#96;&#96;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    下列哪些项是 “派生类对象替换基类对象”。</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    - &#96;p1&#x3D;&amp;circle1;&#96; &#123;.correct&#125;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    - &#96;q1&#x3D;&amp;shape1;&#96;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    - &#96;shape1&#x3D;circle1;&#96; &#123;.correct&#125;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    - &#96;circle1&#x3D;shape1;&#96;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>&#123;.options&#125;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    &gt; - :heavy_check_mark: 令基类对象的指针指向派生类对象</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    &gt; - :x: 派生类指针指向基类的引用</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    &gt; - :heavy_check_mark: 派生类对象给基类对象赋值</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    &gt; - :x: 基类对象给派生类对象赋值</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    &gt; &#123;.options&#125;</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>3. 下列叙述正确的是 []&#123;.gap&#125; 。 &#123;.quiz&#125;</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    - 虚函数只能定义成无参函数</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    - 虚函数不能有返回值</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    - 能定义虚构造函数</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    - A、B、C 都不对 &#123;.correct&#125;</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>&#123;.options&#125;</pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>10. 如果定义 &#96;int e&#x3D;8; double f&#x3D;6.4, g&#x3D;8.9;&#96;，则表达式 &#96;f+int (e&#x2F;3*int (f+g)&#x2F;2)%4&#96; 的值为 [9.4]&#123;.gap&#125;。 &#123;.quiz .fill&#125;</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    &gt; 注意运算顺序和数据类型</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    &gt; [8.4]&#123;.mistake&#125;</pre></td></tr></table></figure><p>点击选项可以显示答案，以及答案解析。</p>\n<ol>\n<li class=\"quiz\">\n<p>下列叙述正确的是 <span class=\"gap\"></span> 。</p>\n<ul class=\"options\">\n<li>虚函数只能定义成无参函数</li>\n<li>虚函数不能有返回值</li>\n<li>能定义虚构造函数</li>\n<li class=\"correct\">A、B、C 都不对</li>\n</ul>\n</li>\n<li class=\"quiz multi\">\n<p>有基类 <code>SHAPE</code> ，派生类 <code>CIRCLE</code> ，声明如下变量： </p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>SHAPE shape1<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>p1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>CIRCLE circle1<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>q1<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>下列哪些项是 “派生类对象替换基类对象”。</p>\n<ul class=\"options\">\n<li class=\"correct\"><code>p1=&amp;circle1;</code> </li>\n<li><code>q1=&amp;shape1;</code></li>\n<li class=\"correct\"><code>shape1=circle1;</code> </li>\n<li><code>circle1=shape1;</code></li>\n</ul>\n<blockquote>\n<ul class=\"options\">\n<li>✔️ 令基类对象的指针指向派生类对象</li>\n<li>❌ 派生类指针指向基类的引用</li>\n<li>✔️ 派生类对象给基类对象赋值</li>\n<li>❌ 基类对象给派生类对象赋值</li>\n</ul>\n</blockquote>\n</li>\n<li class=\"quiz true\">\n<p>编译时多态主要指运算符重载与函数重载，而运行时多态主要指虚函数。</p>\n</li>\n<li class=\"quiz fill\">\n<p>如果定义 <code>int e=8; double f=6.4, g=8.9;</code> ，则表达式  <code>f+int(e/3*int(f+g)/2)%4</code>  的值为 <span class=\"gap\">9.4</span>。</p>\n<blockquote>\n<p>注意运算顺序和数据类型<br />\n<span class=\"mistake\"> 8.4</span></p>\n</blockquote>\n</li>\n</ol>\n<h2 id=\"使用说明\"><a class=\"anchor\" href=\"#使用说明\">#</a> 使用说明</h2>\n<p>本功能基于 <code>markdown-it-bracketed-spans</code>  和 <code>markdown-it-attrs</code></p>\n<table>\n<thead>\n<tr>\n<th>标签</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>&#123;.quiz&#125;</code></td>\n<td>选择题</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .multi&#125;</code></td>\n<td>多选题</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .true&#125;</code></td>\n<td>正确的判断题</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .false&#125;</code></td>\n<td>错误的判断题</td>\n</tr>\n<tr>\n<td><code>&#123;.quiz .fill&#125;</code></td>\n<td>填空题</td>\n</tr>\n<tr>\n<td><code>[]&#123;.gap&#125;</code></td>\n<td>空白下划线</td>\n</tr>\n<tr>\n<td><code>[答案内容]&#123;.gap&#125;</code></td>\n<td>答案内容带下划线</td>\n</tr>\n<tr>\n<td><code>&#123;.options&#125;</code></td>\n<td>ABCDE 选项</td>\n</tr>\n<tr>\n<td><code>&#123;.correct&#125;</code></td>\n<td>选择题的正确选项</td>\n</tr>\n<tr>\n<td><code>&gt;</code></td>\n<td>答案解析</td>\n</tr>\n<tr>\n<td><code>[8.4]&#123;.mistake&#125;</code></td>\n<td>错题备注</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"emoji-绘文字\"><a class=\"anchor\" href=\"#emoji-绘文字\">#</a>  <code>emoji</code>  绘文字</h1>\n<p>本功能基于 <code>markdown-it-emoji</code> ，所有<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL21hcmtkb3duLWl0L21hcmtkb3duLWl0LWVtb2ppL2Jsb2IvbWFzdGVyL2xpYi9kYXRhL2Z1bGwuanNvbg==\">标签参考戳此</span></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>:kissing_heart:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>:ring:</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>:notes:</pre></td></tr></table></figure><p>😘 💍 🎶</p>\n<h1 id=\"effects-文字特效\"><a class=\"anchor\" href=\"#effects-文字特效\">#</a>  <code>effects</code>  文字特效</h1>\n<p>本功能基于 <code>markdown-it-ins</code> 、  <code>markdown-it-bracketed-spans</code>  和 <code>markdown-it-attrs</code></p>\n<blockquote>\n<p>本主题风格颜色通用样式：default、primary、success、info、warning、danger</p>\n</blockquote>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>++ 下划线 ++</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>++ 波浪线 ++&#123;.wavy&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>++ 着重点 ++&#123;.dot&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>++ 紫色下划线 ++&#123;.primary&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>++ 绿色波浪线 ++&#123;.wavy .success&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>++ 黄色着重点 ++&#123;.dot .warning&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>~~ 删除线～～</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>~~ 红色删除线～～&#123;.danger&#125;</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#x3D;&#x3D; 荧光高亮 &#x3D;&#x3D;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>[赤橙黄绿青蓝紫]&#123;.rainbow&#125;</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>[红色]&#123;.red&#125;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>[粉色]&#123;.pink&#125;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>[橙色]&#123;.orange&#125;</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>[黄色]&#123;.yellow&#125;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>[绿色]&#123;.green&#125;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>[靛青]&#123;.aqua&#125;</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>[蓝色]&#123;.blue&#125;</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>[紫色]&#123;.purple&#125;</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>[灰色]&#123;.grey&#125;</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>快捷键 [Ctrl]&#123;.kbd&#125; + [C]&#123;.kbd .red&#125;</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>H~2~0</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>29^th^</pre></td></tr></table></figure><div class=\"note warning\">\n<p>这段代码因为自动被 pangu.js 处理了一下，加了几个空格，导致直接复制代码不能正常显示。<br />\n正确的代码是 <code>++下划线++</code>   <code>~~删除线~~</code>   <code>==荧光高亮==</code> ，不能有空格哦。</p>\n</div>\n<p><ins>下划线</ins><br />\n<ins class=\"wavy\">波浪线</ins><br />\n<ins class=\"dot\">着重点</ins><br />\n<ins class=\"primary\">紫色下划线</ins><br />\n<ins class=\"wavy success\">绿色波浪线</ins><br />\n<ins class=\"dot warning\">黄色着重点</ins><br />\n<s>删除线</s><br />\n<s class=\"danger\">红色删除线</s><br />\n<mark>荧光高亮</mark><br />\n<span class=\"rainbow\">赤橙黄绿青蓝紫</span><br />\n<span class=\"red\">红色</span><br />\n<span class=\"pink\">粉色</span><br />\n<span class=\"orange\">橙色</span><br />\n<span class=\"yellow\">黄色</span><br />\n<span class=\"green\">绿色</span><br />\n<span class=\"aqua\">靛青</span><br />\n<span class=\"blue\">蓝色</span><br />\n<span class=\"purple\">紫色</span><br />\n<span class=\"grey\">灰色</span><br />\n快捷键 <span class=\"kbd\">Ctrl</span> + <span class=\"kbd red\">C</span><br />\nH<sub>2</sub>0<br />\n29<sup>th</sup></p>\n<h1 id=\"spoiler隐藏文字\"><a class=\"anchor\" href=\"#spoiler隐藏文字\">#</a>  <code>spoiler</code>  隐藏文字</h1>\n<p>本功能基于 <code>markdown-it-spoiler</code>  和 <code>markdown-it-attrs</code></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>!! 黑幕黑幕黑幕黑幕黑幕黑幕！！： 鼠标滑过显示内容</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>!! 模糊模糊模糊模糊模糊模糊！！&#123;.bulr&#125; ： 选中文字显示内容</pre></td></tr></table></figure><p><span class=\"spoiler\" title=\"你知道得太多了\">黑幕黑幕黑幕黑幕黑幕黑幕</span> ： 鼠标滑过显示内容<br />\n<span class=\"spoiler bulr\" title=\"你知道得太多了\">模糊模糊模糊模糊模糊模糊</span> ： 选中文字显示内容</p>\n<h1 id=\"label-标签块\"><a class=\"anchor\" href=\"#label-标签块\">#</a>  <code>label</code>  标签块</h1>\n<p>本功能基于 <code>markdown-it-bracketed-spans</code>  和 <code>markdown-it-attrs</code> <br />\n 有以下颜色可选</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>[default]&#123;.label&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>[primary]&#123;.label .primary&#125;</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>[info]&#123;.label .info&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>[:heavy_check_mark:success]&#123;.label .success&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>[warning]&#123;.label .warning&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>[:broken_heart:danger]&#123;.label .danger&#125;</pre></td></tr></table></figure><p><span class=\"label\">default</span><br />\n<span class=\"label primary\">primary</span><br />\n<span class=\"label info\">info</span><br />\n<span class=\"label success\">✔️success</span><br />\n<span class=\"label warning\">warning</span><br />\n<span class=\"label danger\">💔danger</span></p>\n<h1 id=\"note-提醒块\"><a class=\"anchor\" href=\"#note-提醒块\">#</a>  <code>note</code>  提醒块</h1>\n<p>本功能基于 <code>markdown-it-container</code> <br />\n 标签为：</p>\n<table>\n<tbody>\n<tr>\n<td>开始行</td>\n<td><code>:::[风格颜色]</code></td>\n</tr>\n<tr>\n<td>结束行</td>\n<td><code>:::</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>:::default</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>默认默认</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>:::primary</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>基本基本</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>:::info</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>提示提示</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>:::success</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>成功成功</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>:::warning</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>警告警告</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>:::danger</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>危险危险</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>:::danger no-icon</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>危险危险</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>:::</pre></td></tr></table></figure><div class=\"note default\">\n<p>默认默认</p>\n</div>\n<div class=\"note primary\">\n<p>基本基本</p>\n</div>\n<div class=\"note info\">\n<p>提示提示</p>\n</div>\n<div class=\"note success\">\n<p>成功成功</p>\n</div>\n<div class=\"note warning\">\n<p>警告警告</p>\n</div>\n<div class=\"note danger\">\n<p>危险危险</p>\n</div>\n<div class=\"note danger no-icon\">\n<p>没有图标</p>\n</div>\n<h1 id=\"tab标签卡\"><a class=\"anchor\" href=\"#tab标签卡\">#</a>  <code>tab</code>  标签卡</h1>\n<p>本功能基于 <code>markdown-it-container</code> <br />\n 标签为：</p>\n<table>\n<tbody>\n<tr>\n<td>开始行</td>\n<td><code>;;;[同一ID] [标签名称]</code></td>\n</tr>\n<tr>\n<td>结束行</td>\n<td><code>;;;</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>;;;id1 卡片 1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>这里是卡片 1 的内容</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>** 加粗 **</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>[success]&#123;.label .success&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>- site: 優萌初華</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  owner: 霜月琉璃</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  desc: 琉璃的医学 &amp; 编程笔记</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  image: https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;amehime&#x2F;shoka@latest&#x2F;images&#x2F;avatar.jpg</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  color: &quot;#e9546b&quot;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>;;;id1 卡片 2</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>这里是卡片 2 的内容</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>:::danger</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>危险危险</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>- 第一行</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>- 第二行</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>;;;id2 ②号标签卡片 1</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>这里是卡片 1 的内容</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>;;;id2 ②号标签卡片 2</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>这里是卡片 2 的内容</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>;;;</pre></td></tr></table></figure><div class=\"tab\" data-id=\"id1\" data-title=\"卡片1\">\n<p>这里是卡片 1 的内容<br />\n<strong>加粗</strong><br />\n<span class=\"label success\"> success</span></p>\n<p><div class=\"links\"><div class=\"item\" title=\"霜月琉璃\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"https://cdn.jsdelivr.net/gh/amehime/shoka@latest/images/avatar.jpg\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">優萌初華</span>\n          <p class=\"desc\">琉璃的医学 & 编程笔记</p>\n          </div></div></div></p>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"卡片2\">\n<p>这里是卡片 2 的内容</p>\n<div class=\"note danger\">\n<p>危险危险</p>\n</div>\n<ul>\n<li>第一行</li>\n<li>第二行</li>\n</ul>\n</div>\n<div class=\"tab\" data-id=\"id2\" data-title=\"②号标签卡片1\">\n<p>这里是卡片 1 的内容</p>\n</div>\n<div class=\"tab\" data-id=\"id2\" data-title=\"②号标签卡片2\">\n<p>这里是卡片 2 的内容</p>\n</div>\n<h1 id=\"collapse-折叠块\"><a class=\"anchor\" href=\"#collapse-折叠块\">#</a>  <code>collapse</code>  折叠块</h1>\n<p>本功能基于 <code>markdown-it-container</code> <br />\n 标签为：</p>\n<table>\n<tbody>\n<tr>\n<td>开始行</td>\n<td><code>+++[风格颜色] [标题文字]</code></td>\n</tr>\n<tr>\n<td>结束行</td>\n<td><code>+++</code></td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>+++ 默认默认 这里是一段文字</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>++ 下划线 ++</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>+++primary 紫色</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>:::info</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>参考信息</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>:::</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>- 第一行</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>- 第二行</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>+++info  蓝色</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>;;;id3 卡片 1</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>这里是卡片 1 的内容</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>;;;id3 卡片 2</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>这里是卡片 2 的内容</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>;;;</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>+++success 绿色</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>&#123;% links %&#125;</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>- site: 優萌初華</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  url: https:&#x2F;&#x2F;shoka.lostyu.me</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  color: &quot;#e9546b&quot;</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>&#123;% endlinks %&#125;</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>+++warning 黄色</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>!! 警告警告警告警告警告！！&#123;.bulr&#125;</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>[label]&#123;.label .success&#125;</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>+++</pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>+++danger 红色</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>[danger]&#123;.label .danger&#125;</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>+++</pre></td></tr></table></figure><details><summary>默认默认 这里是一段文字</summary><div>\n<p><ins>下划线</ins></p>\n</div></details>\n<details class=\"primary\"><summary>紫色</summary><div>\n<div class=\"note info\">\n<p>参考信息</p>\n</div>\n<ul>\n<li>第一行</li>\n<li>第二行</li>\n</ul>\n</div></details>\n<details class=\"info\"><summary>蓝色</summary><div>\n<div class=\"tab\" data-id=\"id3\" data-title=\"卡片1\">\n<p>这里是卡片 1 的内容<br />\n<ins class=\"wavy\">波浪线</ins></p>\n</div>\n<div class=\"tab\" data-id=\"id3\" data-title=\"卡片2\">\n<p>这里是卡片 2 的内容</p>\n</div>\n</div></details>\n<details class=\"success\"><summary>绿色</summary><div>\n<p><div class=\"links\"><div class=\"item\" title=\"優萌初華\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\" data-background-image=\"/images/404.png\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWU=\">優萌初華</span>\n          <p class=\"desc\">https://shoka.lostyu.me</p>\n          </div></div></div></p>\n</div></details>\n<details class=\"warning\"><summary>黄色</summary><div>\n<p><span class=\"spoiler bulr\" title=\"你知道得太多了\">警告警告警告警告警告</span><br />\n<span class=\"label success\"> label</span></p>\n</div></details>\n<details class=\"danger\"><summary>红色</summary><div>\n<p><span class=\"label danger\">danger</span></p>\n</div></details>\n<h1 id=\"tasklist-待办事项\"><a class=\"anchor\" href=\"#tasklist-待办事项\">#</a>  <code>taskList</code>  待办事项</h1>\n<p>本功能基于 <code>markdown-it-task-checkbox</code> 。<br />\n可以利用 <code>markdown-it-attrs</code>  添加风格颜色，只可以给 <code>ul</code>  标签添加，需要新建两行。</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>- [ ] 这是一个小叉叉</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- [x] 这是一个红色勾勾</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>&#123;.danger&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>- [ ] 未完成</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>- [x] 完成</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#123;.primary&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>- [ ] 未完成</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>- [x] 默认颜色</pre></td></tr></table></figure><ul class=\"task-list danger\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> 这是一个小叉叉</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> 这是一个红色勾勾</label></li>\n</ul>\n<ul class=\"task-list primary\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> 未完成</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_3\"> 完成</label></li>\n</ul>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\"> 未完成</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_5\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_5\"> 默认颜色</label></li>\n</ul>\n<h1 id=\"furigana文字注音\"><a class=\"anchor\" href=\"#furigana文字注音\">#</a>  <code>furigana</code>  文字注音</h1>\n<p>原本用于日语汉字假名注音，但别的注音也可以。<br />\n为了兼容性，采用 <code>markdown-it-ruby</code>  的基本格式： <code>&#123;文字^注音&#125;</code> ，并且为了兼容表格，将分隔符由 <code>|</code>  换成了 <code>^</code> 。<br />\n注音分隔基于 <code>furigana-markdown-it</code> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZnVyaWdhbmEtbWFya2Rvd24taXQjcXVpY2stdXNhZ2U=\"> 显示说明看这里</span></p>\n<table>\n<tbody>\n<tr>\n<td><code>&#123;取り返す^とりかえす&#125;</code></td>\n<td><ruby>取<rp> (</rp><rt>と</rt><rp>)</rp> り<rt></rt>返<rp> (</rp><rt>かえ</rt><rp>)</rp> す<rt></rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;可愛い犬^か+わい・い・いぬ&#125;</code></td>\n<td><ruby>可愛<rp> (</rp><rt>かわい</rt><rp>)</rp> い<rt></rt>犬<rp> (</rp><rt>いぬ</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;可愛い犬^か・わい・いいぬ&#125;</code></td>\n<td><ruby>可<rp> (</rp><rt>か</rt><rp>)</rp> 愛<rp> (</rp><rt>わい</rt><rp>)</rp> い<rt></rt>犬<rp> (</rp><rt>いぬ</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;アクセラレータ^accelerator&#125;</code></td>\n<td><ruby>アクセラレータ<rp> (</rp><rt>accelerator</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;accelerator^アクセラレータ&#125;</code></td>\n<td><ruby>accelerator<rp>(</rp><rt>アクセラレータ</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;食べる^たべる&#125;</code></td>\n<td><ruby>食<rp> (</rp><rt>た</rt><rp>)</rp> べる<rt></rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;食べる^=たべる&#125;</code></td>\n<td><ruby>食べる<rp> (</rp><rt>たべる</rt><rp>)</rp></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;あいうえお^*&#125;</code></td>\n<td><ruby>あ<rt>●</rt>い<rt>●</rt>う<rt>●</rt>え<rt>●</rt>お<rt>●</rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;あいうえお^*❤&#125;</code></td>\n<td><ruby>あ<rt>❤</rt>い<rt>❤</rt>う<rt>❤</rt>え<rt>❤</rt>お<rt>❤</rt></ruby></td>\n</tr>\n<tr>\n<td><code>&#123;常用账号^contact&#125;</code></td>\n<td><ruby>常用账号<rp> (</rp><rt>contact</rt><rp>)</rp></ruby></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"media多媒体\"><a class=\"anchor\" href=\"#media多媒体\">#</a>  <code>media</code>  多媒体</h1>\n<p>本功能基于 Hexo Tag 功能，使用 <code>media</code>  标签，目前可选择两种类型，即 <code>audio</code>  和 <code>video</code> 。</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% media audio %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>... 音频列表</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>&#123;% media video %&#125;</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>... 视频列表</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr></table></figure><p>标签包绕一段 <code>yml</code>  格式的内容，格式与<a href=\"../config/#%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90\">背景音乐</a>的配置类似。</p>\n<p>亦可以直接使用网易云、虾米、QQ 音乐的播放列表、单曲。</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"><span>举个栗子</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&#123;% media audio %&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>- title: 列表 1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  list:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    - https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;playlist?id&#x3D;2943811283</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    - https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;playlist?id&#x3D;2297706586</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>- title: 列表 2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  list:</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    - https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;playlist?id&#x3D;2031842656</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>&#123;% media video %&#125;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>- name: &quot;测试 1&quot;</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  url: https:&#x2F;&#x2F;cdn.kastatic.org&#x2F;ka-youtube-converted&#x2F;O_nY1TM2RZM.mp4&#x2F;O_nY1TM2RZM.mp4#t&#x3D;0</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>- name: &quot;测试 2&quot;</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  url: https:&#x2F;&#x2F;cdn.kastatic.org&#x2F;ka-youtube-converted&#x2F;O_nY1TM2RZM.mp4&#x2F;O_nY1TM2RZM.mp4#t&#x3D;0</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>&#123;% endmedia %&#125;</pre></td></tr></table></figure><p><div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表1\",\"list\":[\"https://music.163.com/#/playlist?id=2943811283\",\"https://music.163.com/#/playlist?id=2297706586\"]},{\"title\":\"列表2\",\"list\":[\"https://music.163.com/#/playlist?id=2031842656\"]}]'></div></div></p>\n<p><div class=\"media-container\"><div class=\"player\" data-type=\"video\" data-src='[{\"name\":\"测试1\",\"url\":\"https://cdn.kastatic.org/ka-youtube-converted/O_nY1TM2RZM.mp4/O_nY1TM2RZM.mp4#t=0\"},{\"name\":\"测试2\",\"url\":\"https://cdn.kastatic.org/ka-youtube-converted/O_nY1TM2RZM.mp4/O_nY1TM2RZM.mp4#t=0\"}]'></div></div></p>\n<h1 id=\"math数学公式\"><a class=\"anchor\" href=\"#math数学公式\">#</a>  <code>math</code>  数学公式</h1>\n<p>本功能基于 <code>markdown-it-katex</code> <br />\n 在 Front Matter 中添加 <code>math: true</code>  以支持<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rYXRleC5vcmcv\"> KaTex</span></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: 数学公式显示</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>math: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>行内公式：$\\sqrt &#123;3x-1&#125;+(1+x)^2$</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>独立块显示：</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>$$\\begin &#123;array&#125;&#123;c&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\\nabla \\times \\vec &#123;\\mathbf &#123;B&#125;&#125; -\\, \\frac1c\\, \\frac &#123;\\partial\\vec &#123;\\mathbf &#123;E&#125;&#125;&#125;&#123;\\partial t&#125; &amp;</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>&#x3D; \\frac &#123;4\\pi&#125;&#123;c&#125;\\vec &#123;\\mathbf &#123;j&#125;&#125;    \\nabla \\cdot \\vec &#123;\\mathbf &#123;E&#125;&#125; &amp; &#x3D; 4 \\pi \\rho \\\\</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\\nabla \\times \\vec &#123;\\mathbf &#123;E&#125;&#125;\\, +\\, \\frac1c\\, \\frac &#123;\\partial\\vec &#123;\\mathbf &#123;B&#125;&#125;&#125;&#123;\\partial t&#125; &amp; &#x3D; \\vec &#123;\\mathbf &#123;0&#125;&#125; \\\\</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\\nabla \\cdot \\vec &#123;\\mathbf &#123;B&#125;&#125; &amp; &#x3D; 0</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\\end &#123;array&#125;$$</pre></td></tr></table></figure><p>行内公式：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mrow><mn>3</mn><mi>x</mi><mo>−</mo><mn>1</mn></mrow></msqrt><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sqrt{3x-1}+(1+x)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.04em;vertical-align:-0.17444499999999996em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8655550000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord\">3</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-2.825555em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17444499999999996em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></p>\n<p>独立块显示：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.15999999999999992em\" columnalign=\"center\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi mathvariant=\"normal\">∇</mi><mo>×</mo><mover accent=\"true\"><mi mathvariant=\"bold\">B</mi><mo>⃗</mo></mover><mo>−</mo><mtext> </mtext><mfrac><mn>1</mn><mi>c</mi></mfrac><mtext> </mtext><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mover accent=\"true\"><mi mathvariant=\"bold\">E</mi><mo>⃗</mo></mover></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>t</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mfrac><mrow><mn>4</mn><mi>π</mi></mrow><mi>c</mi></mfrac><mover accent=\"true\"><mi mathvariant=\"bold\">j</mi><mo>⃗</mo></mover><mi mathvariant=\"normal\">∇</mi><mo>⋅</mo><mover accent=\"true\"><mi mathvariant=\"bold\">E</mi><mo>⃗</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mn>4</mn><mi>π</mi><mi>ρ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi mathvariant=\"normal\">∇</mi><mo>×</mo><mover accent=\"true\"><mi mathvariant=\"bold\">E</mi><mo>⃗</mo></mover><mtext> </mtext><mo>+</mo><mtext> </mtext><mfrac><mn>1</mn><mi>c</mi></mfrac><mtext> </mtext><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mover accent=\"true\"><mi mathvariant=\"bold\">B</mi><mo>⃗</mo></mover></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>t</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mover accent=\"true\"><mn mathvariant=\"bold\">0</mn><mo>⃗</mo></mover></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi mathvariant=\"normal\">∇</mi><mo>⋅</mo><mover accent=\"true\"><mi mathvariant=\"bold\">B</mi><mo>⃗</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{array}{c}\n\n\\nabla \\times \\vec{\\mathbf{B}} -\\, \\frac1c\\, \\frac{\\partial\\vec{\\mathbf{E}}}{\\partial t} &amp;\n= \\frac{4\\pi}{c}\\vec{\\mathbf{j}}    \\nabla \\cdot \\vec{\\mathbf{E}} &amp; = 4 \\pi \\rho \\\\\n\n\\nabla \\times \\vec{\\mathbf{E}}\\, +\\, \\frac1c\\, \\frac{\\partial\\vec{\\mathbf{B}}}{\\partial t} &amp; = \\vec{\\mathbf{0}} \\\\\n\n\\nabla \\cdot \\vec{\\mathbf{B}} &amp; = 0\n\n\\end{array}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.1938640000000005em;vertical-align:-1.846932em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3469320000000002em;\"><span style=\"top:-4.346932000000001em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mord\">∇</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">B</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.072377em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-2.714em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\">E</span></span></span></span><span style=\"top:-2.96911em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay mtight\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.9145549999999996em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mord\">∇</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">E</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.072377em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-2.714em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\">B</span></span></span></span><span style=\"top:-2.96911em;\"><span class=\"pstrut\" style=\"height:2.714em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay mtight\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-1.585445em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mord\">∇</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">B</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.846932em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3469320000000002em;\"><span style=\"top:-4.346932000000001em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">4</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9774399999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">j</span></span></span></span><span style=\"top:-3.26344em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"mord\">∇</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9691099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">E</span></span></span></span><span style=\"top:-3.25511em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.15216em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span><span style=\"top:-2.9145549999999996em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.92744em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">0</span></span></span></span><span style=\"top:-3.21344em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span><span style=\"top:-1.585445em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.846932em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3469320000000002em;\"><span style=\"top:-4.346932000000001em;\"><span class=\"pstrut\" style=\"height:3.072377em;\"></span><span class=\"mord\"><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">4</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathnormal\">ρ</span></span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span></span></span></span></span></span></span></p>\n<h1 id=\"mermaid流程图\"><a class=\"anchor\" href=\"#mermaid流程图\">#</a>  <code>mermaid</code>  流程图</h1>\n<p>本功能基于 <code>markdown-it-mermaid</code> <br />\n 在 Front Matter 中添加 <code>mermaid: true</code>  以支持<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tZXJtYWlkLWpzLmdpdGh1Yi5pby9tZXJtYWlkLyMv\"> Mermaid</span></p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: 流程图显示</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mermaid: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#96;&#96;&#96;mermaid</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>graph LR</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    A [Square Rect] -- Link text --&gt; B ((Circle))</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    A --&gt; C (Round Rect)</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    B --&gt; D &#123;Rhombus&#125;</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    C --&gt; D</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>&#96;&#96;&#96;mermaid</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>sequenceDiagram</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    loop Daily query</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        Alice-&gt;&gt;Bob: Hello Bob, how are you?</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        alt is sick</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            Bob-&gt;&gt;Alice: Not so good :(</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        else is well</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            Bob-&gt;&gt;Alice: Feeling fresh like a daisy</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        end</pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        opt Extra response</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            Bob-&gt;&gt;Alice: Thanks for asking</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        end</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    end</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>&#96;&#96;&#96;</pre></td></tr></table></figure><figure class=\"highlight mermaid\"><figcaption data-lang=\"mermaid\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">graph</span> LR</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    A<span class=\"token text string\">[Square Rect]</span> <span class=\"token inter-arrow-label\"><span class=\"token arrow-head arrow operator\">--</span> <span class=\"token label property\">Link text</span> <span class=\"token arrow operator\">--></span></span> B<span class=\"token text string\">((Circle))</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    A <span class=\"token arrow operator\">--></span> C<span class=\"token text string\">(Round Rect)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    B <span class=\"token arrow operator\">--></span> D<span class=\"token text string\">&#123;Rhombus&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    C <span class=\"token arrow operator\">--></span> D</pre></td></tr></table></figure><figure class=\"highlight mermaid\"><figcaption data-lang=\"mermaid\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">sequenceDiagram</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">loop</span> Daily query</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        Alice<span class=\"token arrow operator\">->></span>Bob<span class=\"token operator\">:</span> Hello Bob, how are you?</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">alt</span> is sick</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            Bob<span class=\"token arrow operator\">->></span>Alice<span class=\"token operator\">:</span> Not so good <span class=\"token operator\">:</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">else</span> is well</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            Bob<span class=\"token arrow operator\">->></span>Alice<span class=\"token operator\">:</span> Feeling fresh like a daisy</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">opt</span> Extra response</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            Bob<span class=\"token arrow operator\">->></span>Alice<span class=\"token operator\">:</span> Thanks for asking</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr></table></figure>",
            "tags": [
                "计算机科学",
                "主题作者的教程配置",
                "Theme Shoka Documentation",
                "Hexo",
                "教程"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/display/",
            "url": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/display/",
            "title": "Step.3 界面显示",
            "date_published": "2020-08-13T13:12:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/computer-science/note/theme-shoka-doc/\">🚀快速开始</a> - <a href=\"/computer-science/note/theme-shoka-doc/dependents/\">💌依赖插件</a> - <a href=\"/computer-science/note/theme-shoka-doc/config/\">📌基本配置</a> - <a href=\"/computer-science/note/theme-shoka-doc/display/\"><strong>🌈界面显示</strong></a> - <a href=\"/computer-science/note/theme-shoka-doc/special/\">🦄特殊功能</a></p>\n</div>\n<h1 id=\"首页置顶文章\"><a class=\"anchor\" href=\"#首页置顶文章\">#</a> 首页置顶文章</h1>\n<p>在文章的 Front Matter 设置 <code>sticky: true</code> ，则该文章将显示在首页最上方的 <code>置顶文章</code> 列。<br />\n多篇文章按照发布时间倒序排列，不分页。</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>---</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>title: 置顶文章</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>sticky: true</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>---</pre></td></tr></table></figure><h1 id=\"首页精选分类\"><a class=\"anchor\" href=\"#首页精选分类\">#</a> 首页精选分类</h1>\n<p>想要在首页显示分类翻转块，需要按照以下示例的方式，给需要显示的分类加上封面图。</p>\n<ol>\n<li>\n<p>首先，修改站点配置：<br />\n找到 <code>category_map:</code> ，配置每个分类对应的英文映射，比如：</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">category_map</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">计算机科学</span><span class=\"token punctuation\">:</span> computer<span class=\"token punctuation\">-</span>science</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">Java</span><span class=\"token punctuation\">:</span> java</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">C++</span><span class=\"token punctuation\">:</span> cpp</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">二进制杂谈</span><span class=\"token punctuation\">:</span> note</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">计算机程序设计（C++）-西安交通大学</span><span class=\"token punctuation\">:</span> course<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">零基础学Java语言-浙江大学-翁恺</span><span class=\"token punctuation\">:</span> course<span class=\"token punctuation\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">面向对象程序设计-Java语言-浙江大学-翁恺</span><span class=\"token punctuation\">:</span> course<span class=\"token punctuation\">-</span><span class=\"token number\">2</span></pre></td></tr></table></figure><blockquote>\n<p>注意：hexo 会自动处理路径中的特殊字符，~`!@#$%<span></span>^&amp;*()-_+=<span></span>{}|\\;:&quot;'&lt;&gt;,.? 以及空格，这些全部会被替换成 <code>-</code> <br />\n 所以避免在设置中使用上述字符，否则可导致无法抓取到目录下的 <code>cover.jpg</code></p>\n</blockquote>\n</li>\n<li>\n<p>在 <code>&lt;root&gt;/source/_posts</code>  文件夹相应的目录里，存放封面图<br />\n例子：如 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9qYXZhL2NvdXJzZS0xL3dlZWstMS8=\">第 1 周 计算</span> 这篇文章。<br />\n所处的分类是</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">categories</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">-</span> <span class=\"token punctuation\">[</span>计算机科学<span class=\"token punctuation\">,</span> Java<span class=\"token punctuation\">,</span> 零基础学Java语言<span class=\"token punctuation\">-</span>浙江大学<span class=\"token punctuation\">-</span>翁恺<span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>现在需要在首页显示 <code>零基础学Java语言-浙江大学-翁恺</code> 这个分类，翻转卡片后，显示这个分类下的文章们。<br />\n而该分类经过英文映射，它的路径将是 <code>/computer-science/java/course-1/</code> 。</p>\n<p>那么，请在 <code>&lt;root&gt;/source/_posts/computer-science/java/course-1/</code>  的目录下放置 <code>cover.jpg</code>  文件。<br />\n只要 <code>分类路径</code> 对应的目录下<strong>存在</strong> <code>cover.jpg</code>  文件，这个分类就会在首页显示。<br />\n在进行 <code>hexo g</code>  时，本分类的封面图会自动被复制到 public 目录里相应的位置。</p>\n</li>\n<li>\n<p>事实上，为了方便文章管理，这个分类下所有文章的 md 文件，我都会放在 <code>&lt;root&gt;/source/_posts/computer-science/java/course-1/</code>  这个目录下。</p>\n<p>且站点配置文件里，永久链接设置如下</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">permalink</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">:</span>title/</pre></td></tr></table></figure><p><code>hexo g</code>  后，文章的 html 文件们将全部生成到 <code>&lt;root&gt;/public/computer-science/java/course-1/</code>  目录。<br />\n具体可以查看<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvc2hva2E=\">本博客的 github 仓库</span>。</p>\n</li>\n<li>\n<p>文章详情界面中的 <code>系列文章</code> ，显示的是与当前文章同一分类的其他文章，并按照文章名正序排序。</p>\n</li>\n</ol>\n<blockquote>\n<p>o (*￣▽￣*) ゞ<br />\n其实，不设置 <code>category_map</code>  也可以，只要在分类路径对应的文件夹下存在 <code>cover.jpg</code>  文件就行。<br />\n现在，这项功能与 <code>category_dir</code>  的配置也无关， <code>hexo g</code>  生成后，图片会自动被转移到 <code>category_dir</code>  的相关子目录下。</p>\n</blockquote>\n<h1 id=\"文章封面图\"><a class=\"anchor\" href=\"#文章封面图\">#</a> 文章封面图</h1>\n<ul>\n<li>\n<p>如果文章的 Front Matter 设置了 <code>cover: image path</code> ，则封面会显示这张图片。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>举个栗子</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Images</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> assets/wallpaper<span class=\"token punctuation\">-</span>2572384.jpg</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 或者写成</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//placehold.it/350x150.jpg</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><p>这里 <code>cover</code>  的值可以是位于 <code>source</code>  目录里的图片文件，此处是 <code>&lt;root&gt;/source/assets/wallpaper-2572384.jpg</code>  文件，也可以是一个某网址。</p>\n</li>\n<li>\n<p>如果文章是一个 <code>gallery post</code> ，即 Front Matter 设置了 <code>photos</code> ，则会封面会显示设置的第一张图片。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>举个栗子</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Gallery Post</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">photos</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">-</span> assets/wallpaper<span class=\"token punctuation\">-</span>2572384.jpg</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">-</span> assets/wallpaper<span class=\"token punctuation\">-</span>2311325.jpg</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">-</span> assets/wallpaper<span class=\"token punctuation\">-</span>878514.jpg</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">-</span> http<span class=\"token punctuation\">:</span>//placehold.it/350x150.jpg</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><p>此时默认会显示第一个图片，即位于 <code>&lt;root&gt;/source/assets/</code>  目录里的 <code>wallpaper-2572384.jpg</code> 。</p>\n</li>\n<li>\n<p>如果站点配置中设置了 <code>post_asset_folder: true</code> ，那么上述本地图片路径应为 <code>&lt;root&gt;/source/_posts/文章同名的文件夹/assets/wallpaper-2572384.jpg</code> ，当然此时 <code>assets</code>  目录可以省掉。</p>\n</li>\n<li>\n<p>如果以上设置均不存在，将显示一张随机图片，<a href=\"../config/#%E9%9A%8F%E6%9C%BA%E5%9B%BE%E5%BA%93\">随机图库配置戳此</a>。</p>\n</li>\n</ul>\n<h1 id=\"图片展示与相册\"><a class=\"anchor\" href=\"#图片展示与相册\">#</a> 图片展示与相册</h1>\n<p>在文章的 Front Matter 设置 <code>fancybox: false</code> ，可以关闭文章页的图片展示功能。<br />\n使用<span class=\"exturl\" data-url=\"aHR0cDovL21pcm9tYW5uaW5vLmdpdGh1Yi5pby9KdXN0aWZpZWQtR2FsbGVyeS8=\"> Justified-Gallery</span> 对 Gallery Post 内图案进行排列。</p>\n<p>下面介绍一些小技巧：</p>\n<ol>\n<li>让图案下方显示 <code>title</code>  的 markdown 代码</li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>![这里是 alt](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;这里是 title&quot;)</pre></td></tr></table></figure><p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"这里是alt\" title=\"这里是title\" /></p>\n<ol start=\"2\">\n<li>设置图片的大小</li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;定义图片大小 - 固定宽度和高度&quot;)&#123;height&#x3D;&quot;100px&quot; width&#x3D;&quot;400px&quot;&#125;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;定义图片大小 - 固定宽度&quot;)&#123;width&#x3D;&quot;400px&quot;&#125;</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicis081o9j20zk0m8dmr.jpg &quot;定义图片大小 - 固定高度&quot;)&#123;height&#x3D;&quot;100px&quot;&#125;</pre></td></tr></table></figure><p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"\" title=\"定义图片大小-固定宽度和高度\" height=\"100px\" width=\"400px\" /></p>\n<p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"\" title=\"定义图片大小-固定宽度\" width=\"400px\" /></p>\n<p><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg\" alt=\"\" title=\"定义图片大小-固定高度\" height=\"100px\" /></p>\n<ol start=\"3\">\n<li>除了在 Front Matter 里配置 <code>photos</code>  可以显示相册图案列表外，还可以这样写</li>\n</ol>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>## 图案列表 No.1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclfdu6exj20zk0m87hw.jpg &quot;这里是 title&quot;)</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclflwv2aj20zk0m84qp.jpg)</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclg5ms2rj20zk0m8u0x.jpg)</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclhnx9glj20zk0m8npd.jpg)</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&#123;.gallery&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>## 图案列表 No.2</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicitht3xtj20zk0m8k5v.jpg)</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1giclil3m4ej20zk0m8tn8.jpg)</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gicljgocqbj20zk0m8e81.jpg)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>![](https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;large&#x2F;6833939bly1gipetfk5zwj20zk0m8e81.jpg)</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>&#123;.gallery data-height&#x3D;&quot;120&quot;&#125;</pre></td></tr></table></figure><p><code>data-height</code>  用来设置每行的高度，默认为 <code>220</code></p>\n<h2 id=\"图案列表no1\"><a class=\"anchor\" href=\"#图案列表no1\">#</a> 图案列表 No.1</h2>\n<p class=\"gallery\"><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclfdu6exj20zk0m87hw.jpg\" alt=\"\" title=\"这里是title\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclflwv2aj20zk0m84qp.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclg5ms2rj20zk0m8u0x.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclhnx9glj20zk0m8npd.jpg\" alt=\"\" /></p>\n<h2 id=\"图案列表no2\"><a class=\"anchor\" href=\"#图案列表no2\">#</a> 图案列表 No.2</h2>\n<p class=\"gallery\" data-height=\"120\"><img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicitht3xtj20zk0m8k5v.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1giclil3m4ej20zk0m8tn8.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gicljgocqbj20zk0m8e81.jpg\" alt=\"\" /><br />\n<img data-src=\"https://tva3.sinaimg.cn/large/6833939bly1gipetfk5zwj20zk0m8e81.jpg\" alt=\"\" /></p>\n<h1 id=\"自定义页面配色\"><a class=\"anchor\" href=\"#自定义页面配色\">#</a> 自定义页面配色</h1>\n<p>主题配色全部在 <code>&lt;root&gt;/themes/shoka/source/css/_colors.styl</code>  文件中，可以自行查看。</p>\n<p>在 <code>&lt;root&gt;/source/_data/</code>  目录新建文件 <code>colors.styl</code> ，在此文件中添改样式。</p>\n<blockquote>\n<p>自定义 <code>colors.styl</code>  文件将覆盖主题默认样式，为了避免出错，请保证原有样式名均存在，在原有样式基础上进行增删改。</p>\n</blockquote>\n<p>主题支持在 <code>&lt;root&gt;/source/_data/</code>  目录建立三个自定义 <code>styl</code>  文件：</p>\n<table>\n<thead>\n<tr>\n<th>自定义文件名</th>\n<th>对应默认样式文件</th>\n<th>样式功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>colors.styl</code></td>\n<td><code>_colors.styl</code></td>\n<td>页面配色</td>\n</tr>\n<tr>\n<td><code>iconfont.styl</code></td>\n<td><code>_iconfont.styl</code></td>\n<td><a href=\"../config/#iconfont%E5%9B%BE%E6%A0%87\">图标样式</a></td>\n</tr>\n<tr>\n<td><code>custom.styl</code></td>\n<td>-</td>\n<td>任意自定义样式</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"自定义主题图片\"><a class=\"anchor\" href=\"#自定义主题图片\">#</a> 自定义主题图片</h1>\n<p>如果想要修改主题的 <code>&lt;root&gt;/themes/shoka/source/images/</code>  目录内的某张图片，请在 <code>&lt;root&gt;/source/_data/</code>  目录新建目录 <code>images</code> ，并在这个文件夹中添加<ins>同名</ins>文件，部署时将自动覆盖主题内的默认图片。</p>\n<p>可以用此方法自定义头像、打赏二维码等图片，并且避免覆盖更新主题时遗失自定义文件。</p>\n<h1 id=\"自定义语言包\"><a class=\"anchor\" href=\"#自定义语言包\">#</a> 自定义语言包</h1>\n<p>本功能参考 NexT，主要可以用来定义菜单等处显示的文字，且可以方便主题无脑覆盖升级。</p>\n<p>在 <code>&lt;root&gt;/source/_data/</code>  目录新建文件 <code>languages.yml</code> 。</p>\n<p>按照以下格式添加配置项：</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># language</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">zh-CN</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\"># items</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">post</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">copyright</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token comment\"># the translation you perfer</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token key atrule\">author</span><span class=\"token punctuation\">:</span> 本文博主</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">en</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">menu</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">travellings</span><span class=\"token punctuation\">:</span> Travellings</pre></td></tr></table></figure><p>可以参考主题目录下的 <code>example/source/_data</code>  文件夹。</p>\n<blockquote>\n<p>站点配置及文件的 Front Matter 中， <code>language</code>  项只支持 <code>zh-CN</code> 、 <code>zh-HK</code> 、 <code>zh-TW</code> 、 <code>ja</code> 、 <code>en</code> 。<br />\n类似写成 <code>zh_CN</code>  这样是不可以的。</p>\n</blockquote>\n",
            "tags": [
                "计算机科学",
                "主题作者的教程配置",
                "Theme Shoka Documentation",
                "Hexo",
                "教程"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/config/",
            "url": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/config/",
            "title": "Step.2 基本配置",
            "date_published": "2020-08-13T12:56:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/computer-science/note/theme-shoka-doc/\">🚀快速开始</a> - <a href=\"/computer-science/note/theme-shoka-doc/dependents/\">💌依赖插件</a> - <a href=\"/computer-science/note/theme-shoka-doc/config/\"><strong>📌基本配置</strong></a> - <a href=\"/computer-science/note/theme-shoka-doc/display/\">🌈界面显示</a> - <a href=\"/computer-science/note/theme-shoka-doc/special/\">🦄特殊功能</a></p>\n</div>\n<h1 id=\"站点别称\"><a class=\"anchor\" href=\"#站点别称\">#</a> 站点别称</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">alternate</span><span class=\"token punctuation\">:</span> Yume Shoka</pre></td></tr></table></figure><p>这里设置的名称代替 Logo，显示在页面顶部，以及页尾©️处</p>\n<h1 id=\"静态文件目录\"><a class=\"anchor\" href=\"#静态文件目录\">#</a> 静态文件目录</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">statics</span><span class=\"token punctuation\">:</span> / <span class=\"token comment\">#//cdn.jsdelivr.net/gh/amehime/shoka@latest/</span></pre></td></tr></table></figure><p>默认值是 <code>/</code> ，指使用本地静态文件<br />\n可以修改成 <code>//cdn.jsdelivr.net/gh/您的github用户名/您的项目名@latest/</code>  这种形式，以使用 jsDelivr 进行加速。<br />\nPS：jsDelivr 并不是实时更新，重新生成文件后需要耐心等待</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span> css</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span> js</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">images</span><span class=\"token punctuation\">:</span> images</pre></td></tr></table></figure><p>静态文件所处目录的实际目录名，这些一般不改。</p>\n<h1 id=\"夜间模式\"><a class=\"anchor\" href=\"#夜间模式\">#</a> 夜间模式</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">darkmode</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># true</span></pre></td></tr></table></figure><p>默认情况下，是否开启夜间模式取决于（优先级从高到低）：</p>\n<ol>\n<li>访客点击页面头部切换按钮的自行选择</li>\n<li>访客切换了浏览设备的主题色调</li>\n<li>您的 <code>darkmode</code>  配置项</li>\n</ol>\n<h1 id=\"自动定位\"><a class=\"anchor\" href=\"#自动定位\">#</a> 自动定位</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">auto_scroll</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># false</span></pre></td></tr></table></figure><p>默认情况下，再次打开页面时，会自动滚动到上次浏览的位置。<br />\n这个选项设为 <code>false</code>  时将停用此功能。</p>\n<h1 id=\"加载动画\"><a class=\"anchor\" href=\"#加载动画\">#</a> 加载动画</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 是否显示页面加载动画 loading-cat</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">loader</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">start</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 当初次打开页面时，显示加载动画</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">switch</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># tab 切换到其他页面时，显示加载动画</span></pre></td></tr></table></figure><p>tab 切换后只是显示 loading 动画，实际并未重新加载页面</p>\n<h1 id=\"页面特效\"><a class=\"anchor\" href=\"#页面特效\">#</a> 页面特效</h1>\n<p>单击页面的烟花效果配置如下</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">fireworks</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 是否启用</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">color</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 烟花颜色</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(255,182,185,.9)\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(250,227,217,.9)\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(187,222,214,.9)\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"rgba(138,198,209,.9)\"</span></pre></td></tr></table></figure><h1 id=\"加载谷歌字体\"><a class=\"anchor\" href=\"#加载谷歌字体\">#</a> 加载谷歌字体</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">font</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\"># Font options:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\"># `external: true` will load this font family from `host` above.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\"># `family: Times New Roman`. Without any quotes.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token comment\"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\"># Global font settings used for all elements inside &lt;body>.</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">global</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Mulish</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\"># Font settings for alternate title.</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">logo</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Fredericka the Great</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3.5</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\"># Font settings for site title.</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Noto Serif JP</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2.5</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\"># Font settings for headlines (&lt;h1> to &lt;h6>).</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>  <span class=\"token key atrule\">headings</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Noto Serif SC</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token comment\"># Font settings for posts.</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  <span class=\"token key atrule\">posts</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>  <span class=\"token comment\"># Font settings for &lt;code> and code blocks.</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token key atrule\">codes</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token key atrule\">external</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token key atrule\">family</span><span class=\"token punctuation\">:</span> Inconsolata</pre></td></tr></table></figure><p>此功能基本参考 NexT。<br />\n加粗标题的字体总是使用 <code>Noto Serif</code> ，为了正确友好的显示日文中的汉字，会先后加载 <code>headings</code>  和 <code>title</code>  的字体设置。</p>\n<h1 id=\"iconfont图标\"><a class=\"anchor\" href=\"#iconfont图标\">#</a>  <code>iconfont</code>  图标</h1>\n<p>主题没有直接使用 Font Awesome，是因为用不到那么多 icon 感觉非常浪费，因此在 Iconfont 上重新建立了一个项目。<br />\n <code>font-family</code>  设为 <code>ic</code> ，所有字体样式前缀为 <code>i-</code> ，具体参见 <code>&lt;root&gt;/themes/shoka/source/css/_iconfont.styl</code> 。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># project of https://www.iconfont.cn/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># //at.alicdn.com/t/font_1832207_c8i9n1ulxlt.css => 1832207_c8i9n1ulxlt</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">iconfont</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1832207_c8i9n1ulxlt\"</span></pre></td></tr></table></figure><p>如果需要添加或修改，请留言告诉我您的<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaWNvbmZvbnQuY24v\"> Iconfont</span> 用户名，我将把您添加到目前的<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaWNvbmZvbnQuY24vbWFuYWdlL2luZGV4P21hbmFnZV90eXBlPW15cHJvamVjdHMmYW1wO3Byb2plY3RJZD0xODMyMjA3\">项目</span>中。</p>\n<p>添加权限为 <code>只读</code> ，此后您可以任意全选，批量保存到购物车中，添加至您自己的项目里，并将主题配置文件中的 <code>iconfont</code>  值改为您的项目。</p>\n<p>注意，您的项目应设置 <code>FontClass/Symbol 前缀</code> 为 <code>i-</code> 。</p>\n<p>在 <code>&lt;root&gt;/source/_data/</code>  目录新建文件 <code>iconfont.styl</code> ，把新增或修改的图标样式复制到这个文件中。</p>\n<blockquote>\n<p>自定义 <code>iconfont.styl</code>  文件将覆盖主题默认样式，为了避免出错，请保证原有样式名均存在，在原有样式基础上进行增删改。</p>\n</blockquote>\n<h1 id=\"菜单与社交按钮\"><a class=\"anchor\" href=\"#菜单与社交按钮\">#</a> 菜单与社交按钮</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">menu</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">home</span><span class=\"token punctuation\">:</span> / <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> home</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">about</span><span class=\"token punctuation\">:</span> /about/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> user</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">posts</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span> / <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> feather</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">archives</span><span class=\"token punctuation\">:</span> /archives/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> list<span class=\"token punctuation\">-</span>alt</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">categories</span><span class=\"token punctuation\">:</span> /categories/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> th</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> /tags/ <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> tags</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\"># friends: /friends/ || heart</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\"># links: /links/ || magic</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token key atrule\">social</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token key atrule\">github</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> github <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#191717\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">#google: https://plus.google.com/yourname || google</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">twitter</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//twitter.com/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> twitter <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#00aff0\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token key atrule\">zhihu</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//www.zhihu.com/people/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> zhihu <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#1e88e5\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token key atrule\">music</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/user/home?id=yourid || cloud-music || \"#e60026\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token key atrule\">weibo</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//weibo.com/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> weibo <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#ea716e\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token key atrule\">about</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//about.me/yourname <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> address<span class=\"token punctuation\">-</span>card <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> \"<span class=\"token comment\">#3b5998\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token comment\">#email: mailto:yourname@mail.com || envelope || \"#55acd5\"</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token comment\">#facebook: https://www.facebook.com/yourname || facebook</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token comment\">#stackoverflow: https://stackoverflow.com/yourname || stack-overflow</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token comment\">#youtube: https://youtube.com/yourname || youtube</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token comment\">#instagram: https://instagram.com/yourname || instagram</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">#skype: skype:yourname?call|chat || skype</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token comment\">#douban: https://www.douban.com/people/yourname/ || douban</span></pre></td></tr></table></figure><p>如上，使用 <code>||</code>  作为分隔符，依次为  <code>链接 || 图标 || 颜色</code> 。<br />\n注意，只需要写图标名称，如 <code>github</code> ，则会自动转换为 <code>ic i-github</code> 。<br />\n十六进制颜色码需要 <code>&quot;&quot;</code>  包绕。</p>\n<p><code>menu</code>  支持一级子目录，子目录设置中的第一项必须为 <code>default</code> ，用来定义父级按钮的样式。</p>\n<p>菜单显示文字可以在语言包中定义，<a href=\"../display/#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E5%8C%85\">具体请戳这里</a></p>\n<h1 id=\"边栏配置\"><a class=\"anchor\" href=\"#边栏配置\">#</a> 边栏配置</h1>\n<p>边栏可以选择在左侧，或右侧<br />\n修改头像文件的地址，相对于静态文件目录 <code>images</code>  中配置的路径。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">sidebar</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token comment\"># Sidebar Position.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">position</span><span class=\"token punctuation\">:</span> left</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token comment\">#position: right</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\"># Replace the default avatar image and set the url here.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">avatar</span><span class=\"token punctuation\">:</span> avatar.jpg</pre></td></tr></table></figure><p>可以将自己的图片放在 <code>&lt;root&gt;/source/_data/images/</code>  目录，甚至以同名覆盖主题内默认的头像图片，<a href=\"../display/#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98%E5%9B%BE%E7%89%87\">具体请戳这里</a></p>\n<h1 id=\"底部widgets\"><a class=\"anchor\" href=\"#底部widgets\">#</a> 底部 widgets</h1>\n<p>目前页面底部可以显示两个小部件，即 <code>随机文章</code> 和 <code>最近评论</code> 。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">widgets</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">random_posts</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 显示随机文章</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">recent_comments</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 显示最近评论</span></pre></td></tr></table></figure><h1 id=\"字数及阅读时间统计\"><a class=\"anchor\" href=\"#字数及阅读时间统计\">#</a> 字数及阅读时间统计</h1>\n<p>安装好 <code>hexo-symbols-count-time</code>  插件后，不需要修改站点配置文件，直接使用插件默认配置就行。</p>\n<p>需要修改主题配置文件，找到两处 <code>cout</code> ，修改为 <code>true</code> ：</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 页尾全站统计</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">footer</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">since</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2010</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">count</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 文章界面统计</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token key atrule\">post</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">count</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr></table></figure><h1 id=\"文章评论\"><a class=\"anchor\" href=\"#文章评论\">#</a> 文章评论</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly92YWxpbmUuanMub3JnL3F1aWNrc3RhcnQuaHRtbA==\">如何获取 LeanCloud 的 appId 和 appKey</span>。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">valine</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your_appId</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">appKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your_appkey</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">placeholder</span><span class=\"token punctuation\">:</span> ヽ(○´∀`)ﾉ♪ <span class=\"token comment\"># Comment box placeholder</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">avatar</span><span class=\"token punctuation\">:</span> mp <span class=\"token comment\"># Gravatar style : mp, identicon, monsterid, wavatar, robohash, retro</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">pageSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token comment\"># Pagination size</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">lang</span><span class=\"token punctuation\">:</span> zh<span class=\"token punctuation\">-</span>CN</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 文章访问量统计</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">NoRecordIP</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># 不记录 IP</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">serverURLs</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">powerMode</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 默认打开评论框输入特效</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">tagMeta</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> 新朋友</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">master</span><span class=\"token punctuation\">:</span> 主人</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token key atrule\">friend</span><span class=\"token punctuation\">:</span> 小伙伴</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">investor</span><span class=\"token punctuation\">:</span> 金主粑粑</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token key atrule\">tagColor</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">master</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"var(--color-orange)\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token key atrule\">friend</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"var(--color-aqua)\"</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token key atrule\">investor</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"var(--color-pink)\"</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token key atrule\">tagMember</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token key atrule\">master</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token comment\"># - hash of master@email.com</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token comment\"># - hash of master2@email.com</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token key atrule\">friend</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>      <span class=\"token comment\"># - hash of friend@email.com</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token comment\"># - hash of friend2@email.com</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token key atrule\">investor</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token comment\"># - hash of investor1@email.com</span></pre></td></tr></table></figure><p>tag 标签显示在评论者名字的后面，默认是 <code>tagMeta.visitor</code>  对应的值。<br />\n在 <code>tagMeta</code>  和 <code>tagColor</code>  中，除了 <code>visitor</code>  这个 key 不能修改外，其他 key 都可以换一换，但需要保证一致性。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>举个栗子</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">tagMeta</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> 游客</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">admin</span><span class=\"token punctuation\">:</span> 管理员</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">waifu</span><span class=\"token punctuation\">:</span> 我老婆</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">tagColor</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">visitor</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#855194\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">admin</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#a77c59\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">waifu</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"#ed6ea0\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">tagMember</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">admin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token comment\"># - hash of admin@email.com</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">waifu</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token comment\"># - hash of waifu@email.com</span></pre></td></tr></table></figure><p>在文章 Front Matter 中也可以配置上述参数，访问该文章页面时，将覆盖全局配置。<br />\n尤其可以用来配置一个特殊的 placeholder。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">valine</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">placeholder</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1. 提问前请先仔细阅读本文档⚡\\n2. 页面显示问题💥，请提供控制台截图📸或者您的测试网址\\n3. 其他任何报错💣，请提供详细描述和截图📸，祝食用愉快💪\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><p>评论通知与管理工具建议使用这个<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0Rlc2VydHNQL1ZhbGluZS1BZG1pbg==\"> Valine-Admin</span>。<br />\n注意 <code>SITE_URL</code>  需要以 <code>/</code>  结尾。</p>\n<p>如果某一篇文章需要关闭评论功能，则在文章 Front Matter 中配置：</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> 关闭评论</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">comment</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><h1 id=\"背景音乐\"><a class=\"anchor\" href=\"#背景音乐\">#</a> 背景音乐</h1>\n<p>在主题配置文件中，设置全局播放列表。<br />\n在文章的 Front Matter 中，设置文章专有播放列表，访问该文章页面时，将覆盖全局配置。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>单列表</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/song<span class=\"token punctuation\">?</span>id=1387098940</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2088001742</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//www.xiami.com/collect/250830668</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//y.qq.com/n/yqq/playsquare/3535982902.html</pre></td></tr></table></figure><p>如上，可以直接使用网易云、虾米、QQ 音乐的播放列表、单曲，可以同时填写多个。</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>多列表</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> 列表1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2943811283</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2297706586</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> 列表2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2031842656</span></pre></td></tr></table></figure><p>如果需要自定义媒体文件，可以按照以下格式填写：</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>单列表</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"曲目1\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"播放地址\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"艺术家\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"封面\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"歌词\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"曲目2\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"播放地址\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"艺术家\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"封面\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"歌词\"</span></pre></td></tr></table></figure><figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>多列表</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> 列表1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"曲目1\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>          <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"播放地址\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>          <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"艺术家\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>          <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"封面\"</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>          <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"歌词\"</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"曲目2\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"播放地址\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>          <span class=\"token key atrule\">artist</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"艺术家\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"封面\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token key atrule\">lrc</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"歌词\"</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> 列表2</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token key atrule\">list</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//music.163.com/<span class=\"token comment\">#/playlist?id=2031842656</span></pre></td></tr></table></figure><p>如果要关闭当前页面的背景音乐播放器，则在文章 Front Matter 中配置：</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> 关闭背景音乐</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">audio</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">---</span></pre></td></tr></table></figure><h1 id=\"随机图库\"><a class=\"anchor\" href=\"#随机图库\">#</a> 随机图库</h1>\n<ul>\n<li>\n<p>默认的图片列表位于 <code>&lt;root&gt;/themes/shoka/_images.yml</code>  中。<br />\n使用了渣浪图库，使用一些上传工具，比如<span class=\"exturl\" data-url=\"aHR0cHM6Ly9waWMuZ2ltaG95LmNvbS8=\">这里</span><br />\n上传后图片的链接是 <code>http://wx4.sinaimg.cn/large/6833939bly1gicmnywqgpj20zk0m8dwx.jpg</code> 。<br />\n只需要新一行写上 <code>- 6833939bly1gicmnywqgpj20zk0m8dwx.jpg</code> 。</p>\n<p>如果想要自定义，则在 <code>&lt;root&gt;/source/_data/</code>  目录新建一个 <code>images.yml</code>  文件，这个文件中的图片至少 6 枚，将完全覆盖默认的图片列表。</p>\n</li>\n<li>\n<p>也可以直接在图片列表 yml 文件中，写上任意外链图片地址</p>\n</li>\n</ul>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/qAMYEFXxJcKRsiG.gif</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/rjdhcSgEN8COBPA.jpg</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/HKyzSd7NI3mlBpt.jpg</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/Y1CBXqgeokEs457.jpg</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//i.loli.net/2020/10/30/Z5W6r2BSoiThHG1.jpg</pre></td></tr></table></figure><ul>\n<li>也可以在主题配置文件中，设置图床 API：</li>\n</ul>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>比如</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">image_server</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://acg.xydwz.cn/api/api.php\"</span></pre></td></tr></table></figure><h1 id=\"加载第三方组件\"><a class=\"anchor\" href=\"#加载第三方组件\">#</a> 加载第三方组件</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">vendors</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\"># 略略略</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\"># 略略略</span></pre></td></tr></table></figure><p>包括</p>\n<table>\n<tbody>\n<tr>\n<td><code>pace</code></td>\n<td>加载进度条</td>\n<td>全局</td>\n</tr>\n<tr>\n<td><code>pjax</code></td>\n<td>页面无刷新加载</td>\n<td>全局</td>\n</tr>\n<tr>\n<td><code>anime</code></td>\n<td>js 动画效果</td>\n<td>全局</td>\n</tr>\n<tr>\n<td><code>algolia</code>   <code>instantsearch</code></td>\n<td>基于 algolia 的站内搜索</td>\n<td>全局</td>\n</tr>\n<tr>\n<td><code>lazyload</code></td>\n<td>图片懒加载</td>\n<td>全局</td>\n</tr>\n<tr>\n<td><code>quicklink</code></td>\n<td>链接资源预加载</td>\n<td>全局</td>\n</tr>\n<tr>\n<td><code>fetch</code></td>\n<td>获取播放列表</td>\n<td>全局</td>\n</tr>\n<tr>\n<td><code>katex</code>   <code>copy_tex</code></td>\n<td>数学公式显示及复制</td>\n<td>按需</td>\n</tr>\n<tr>\n<td><code>fancybox</code></td>\n<td>图片放大显示及排列</td>\n<td>按需</td>\n</tr>\n<tr>\n<td><code>valine</code></td>\n<td>基于 LeanCloud 的评论系统及文章阅读次数统计</td>\n<td>按需</td>\n</tr>\n<tr>\n<td><code>chart</code></td>\n<td>图表显示</td>\n<td>按需</td>\n</tr>\n</tbody>\n</table>\n<p>以上文件加载全部基于 jsDelivr，并对全局加载的组件进行了文件合并。<br />\n如果不明白啥意思，则不要轻易修改。</p>\n<div class=\"note danger\">\n<p>主题版本升级的时候，可能会修改这里。<br />\n如果修改过主题默认 <code>_config.yml</code> ，记得更新主题时，末尾的 <code>vendors</code>  也要及时修改。</p>\n</div>\n",
            "tags": [
                "计算机科学",
                "主题作者的教程配置",
                "Theme Shoka Documentation",
                "Hexo",
                "教程"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/dependents/",
            "url": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/dependents/",
            "title": "Step.1 依赖插件",
            "date_published": "2020-08-13T12:46:48.000Z",
            "content_html": "<div class=\"note primary\">\n<p><a href=\"/computer-science/note/theme-shoka-doc/\">🚀快速开始</a> - <a href=\"/computer-science/note/theme-shoka-doc/dependents/\"><strong>💌依赖插件</strong></a> - <a href=\"/computer-science/note/theme-shoka-doc/config/\">📌基本配置</a> - <a href=\"/computer-science/note/theme-shoka-doc/display/\">🌈界面显示</a> - <a href=\"/computer-science/note/theme-shoka-doc/special/\">🦄特殊功能</a></p>\n</div>\n<div class=\"note warning\">\n<p>请务必将 hexo-renderer-multi-markdown-it 升级到最新版，目前为 0.1.5</p>\n</div>\n<p>Theme Shoka 依赖以下 Hexo 插件</p>\n<table>\n<thead>\n<tr>\n<th>插件名称</th>\n<th>npm 地址</th>\n<th>功能</th>\n<th>依赖程度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hexo-renderer-multi-markdown-it</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1yZW5kZXJlci1tdWx0aS1tYXJrZG93bi1pdA==\">链接</span></td>\n<td>md 文件渲染器，压缩 css/js/html</td>\n<td>必需</td>\n</tr>\n<tr>\n<td>hexo-autoprefixer</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1hdXRvcHJlZml4ZXI=\">链接</span></td>\n<td>给生成的 css 文件们添加浏览器前缀</td>\n<td>必需</td>\n</tr>\n<tr>\n<td>hexo-algoliasearch</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1hbGdvbGlhc2VhcmNo\">链接</span></td>\n<td>站内搜索功能</td>\n<td>搜索按钮失灵</td>\n</tr>\n<tr>\n<td>hexo-symbols-count-time</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1zeW1ib2xzLWNvdW50LXRpbWU=\">链接</span></td>\n<td>文章或站点字数及阅读时间统计</td>\n<td>统计没有</td>\n</tr>\n<tr>\n<td>hexo-feed</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1mZWVk\">链接</span></td>\n<td>生成 Feed 文件</td>\n<td>Feed 文件没有</td>\n</tr>\n<tr>\n<td>hexo-bb</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1iYg==\">链接</span></td>\n<td>生成哔哔页面</td>\n<td>哔哔页面无法正常显示</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>没有正确安装以上插件的话，本主题会报错 or 无法正确显示 or 部分功能失效。<br />\n <code>hexo-renderer-multi-markdown-it</code>  请注意升级到最新版</p>\n</blockquote>\n<p>安装完以上插件后，修改站点配置文件，加入相关配置。</p>\n<h1 id=\"multi-markdown-it安装与配置\"><a class=\"anchor\" href=\"#multi-markdown-it安装与配置\">#</a> multi-markdown-it 安装与配置</h1>\n<h2 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h2>\n<ol>\n<li>\n<p>安装前，记得务必卸载掉默认的 <code>hexo-renderer-marked</code> ，以及别的 markdown 文件渲染器。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> un hexo-renderer-marked --save</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 或者</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">yarn</span> remove hexo-renderer-marked</pre></td></tr></table></figure></li>\n<li>\n<p>安装</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> i hexo-renderer-multi-markdown-it --save</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 或者</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-renderer-multi-markdown-it</pre></td></tr></table></figure></li>\n<li>\n<p>如果安装缓慢，或者失败<br />\n如报错</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ERROR: Failed to download Chromium r515411<span class=\"token operator\">!</span> Set <span class=\"token string\">\"PUPPETEER_SKIP_CHROMIUM_DOWNLOAD\"</span> <span class=\"token function\">env</span> variable to skip download.</pre></td></tr></table></figure><p>因为有一步需要下载 puppeteer 里的 Chromium 内核，基于天朝内部网络现状，这一步能不能成功要靠科学和运气，所以为了避免安装失败，需要加上 <code>--ignore-scripts</code>  跳过 Chromium 内核的下载。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> i hexo-renderer-multi-markdown-it --save --ignore-scripts</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 或者</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> hexo-renderer-multi-markdown-it --ignore-scripts</pre></td></tr></table></figure><p>puppeteer 主要是用来渲染 mermaid 流程图，只要文章中不使用 mermaid 就没有任何问题，如果要使用 mermaid 建议还是想办法完全安装。</p>\n</li>\n</ol>\n<h2 id=\"配置\"><a class=\"anchor\" href=\"#配置\">#</a> 配置</h2>\n<ol>\n<li>加入 <code>markdown</code>  配置，用来渲染 md 文件</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">markdown</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">render</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 渲染器设置</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> <span class=\"token comment\"># 过滤 HTML 标签</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">xhtmlOut</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 使用 '/' 来闭合单标签 （比如 &lt;br />）。</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">breaks</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 转换段落里的 '\\n' 到 &lt;br>。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">linkify</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># 将类似 URL 的文本自动转换为链接。</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">typographer</span><span class=\"token punctuation\">:</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">quotes</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'“”‘’'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># markdown-it 插件设置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>toc<span class=\"token punctuation\">-</span>and<span class=\"token punctuation\">-</span>anchor</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 文章目录以及锚点应用的 class 名称，shoka 主题必须设置成这样</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token key atrule\">tocClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'toc'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>          <span class=\"token key atrule\">anchorClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'anchor'</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>multimd<span class=\"token punctuation\">-</span>table</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>          <span class=\"token key atrule\">multiline</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>          <span class=\"token key atrule\">rowspan</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token key atrule\">headerless</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>furigana</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>          <span class=\"token key atrule\">fallbackParens</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"()\"</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">plugin</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> ./markdown<span class=\"token punctuation\">-</span>it<span class=\"token punctuation\">-</span>spoiler</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token key atrule\">options</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"你知道得太多了\"</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>加入 <code>minify</code>  配置，压缩 css/js/html</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">minify</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">html</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 排除 hexo-feed 用到的模板文件</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/json.ejs'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/atom.ejs'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/rss.ejs'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token key atrule\">css</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.css'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token key atrule\">mangle</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token key atrule\">toplevel</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token key atrule\">compress</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token string\">'**/*.min.js'</span></pre></td></tr></table></figure><ol start=\"3\">\n<li>停用默认代码高亮功能，否则代码块的 mac 样式不能正常显示。<br />\n找到 <code>highlight</code>  和 <code>prismjs</code> ，把 <code>enable</code>  改成 <code>false</code> 。</li>\n</ol>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">highlight</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">prismjs</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr></table></figure><h1 id=\"autoprefixer配置建议\"><a class=\"anchor\" href=\"#autoprefixer配置建议\">#</a> autoprefixer 配置建议</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">autoprefixer</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">exclude</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token string\">'*.min.css'</span></pre></td></tr></table></figure><p>缺少这个插件，首页卡片翻转效果在部分浏览器中无法正确显示。</p>\n<h1 id=\"algolia配置建议\"><a class=\"anchor\" href=\"#algolia配置建议\">#</a> algolia 配置建议</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">algolia</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your appId</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">apiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your apiKey</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">adminApiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your adminApiKey</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">chunkSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">indexName</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#\"shoka\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">fields</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> title <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">-</span> path <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> categories <span class=\"token comment\">#推荐配置</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">-</span> content<span class=\"token punctuation\">:</span>strip<span class=\"token punctuation\">:</span>truncate<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2000</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">-</span> gallery</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">-</span> photos</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">-</span> tags</pre></td></tr></table></figure><h1 id=\"feed配置建议\"><a class=\"anchor\" href=\"#feed配置建议\">#</a> feed 配置建议</h1>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">keywords</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#站点关键词，用 “,” 分隔</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">feed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token key atrule\">limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token key atrule\">order_by</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"-date\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">tag_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token key atrule\">category_dir</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">rss</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/rss.ejs\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"rss.xml\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token key atrule\">atom</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/atom.ejs\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"atom.xml\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token key atrule\">jsonFeed</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"themes/shoka/layout/_alternate/json.ejs\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token key atrule\">output</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"feed.json\"</span></pre></td></tr></table></figure>",
            "tags": [
                "计算机科学",
                "主题作者的教程配置",
                "Theme Shoka Documentation",
                "Hexo",
                "教程"
            ]
        },
        {
            "id": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/",
            "url": "https://obsidianlyg.github.io/computer-science/note/theme-shoka-doc/",
            "title": "Hexo主题Shoka & multi-markdown-it渲染器使用说明",
            "date_published": "2020-08-13T12:45:48.000Z",
            "content_html": "<div class=\"note info\">\n<p>跳票 N 久终于更新的简单的使用说明</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==\">hexo-theme-shoka</span> ：本博客自用的主题</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by1yZW5kZXJlci1tdWx0aS1tYXJrZG93bi1pdA==\">hexo-renderer-multi-markdown-it</span>：配套的 markdown 渲染器</li>\n</ul>\n<p>已经支持 hexo 5。</p>\n</div>\n<div class=\"note info\">\n<p>因博主被学业和工作掏空，本项目已停滞更新大半年，问题也无法及时回复大家，这个悲惨状态可能还要持续半年的样子。</p>\n<p>有很多热心小伙伴在评论区或者项目 issue 帮忙回答问题，非常非常感谢！</p>\n<p>本项目是完全开源的，也有做一些 example 示例，大家可以随便拿随便改。<br />\n但是很抱歉，博主我暂时不能提供更多的支持，这个写的乱七八糟的文档，暂时也没有时间把它写得更专业一些。<br />\n非常对不住大家！</p>\n<p>iconfont 的添加申请，我看到留言后会尽快加上，希望各位小伙伴能看到。</p>\n</div>\n<div class=\"note warning\">\n<p>当前版本更新至 0.2.5，<a href=\"#%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95\">更新记录点此</a></p>\n</div>\n<div class=\"note primary\">\n<p><a href=\"/computer-science/note/theme-shoka-doc/\"><strong>🚀快速开始</strong></a> - <a href=\"/computer-science/note/theme-shoka-doc/dependents/\">💌依赖插件</a> - <a href=\"/blog/computer-science/note/theme-shoka-doc/config/\">📌基本配置</a> - <a href=\"/computer-science/note/theme-shoka-doc/display/\">🌈界面显示</a> - <a href=\"/computer-science/note/theme-shoka-doc/special/\">🦄特殊功能</a></p>\n</div>\n<h1 id=\"设计缘由\"><a class=\"anchor\" href=\"#设计缘由\">#</a> 设计缘由</h1>\n<p>前几年在 Bear 和 Evernote 上整理了大量笔记，非常喜欢 Bear 默认的 markdown 渲染样式。<br />\n后来因为换了安卓手机，用不了 Bear，四处搜寻替代品，没有满意的。<br />\n然后阴差阳错知道了 Hexo，又得知 Github 也可以免费建私有仓库了，故再次转移阵地到了自建博客，并部署在 Github Pages。</p>\n<p>因为这个博客是用来记笔记的，故起名 <code>书架</code> 。<br />\n对应的主题即 <code>Theme.Shoka</code> ，可以说是为了笔记阅读而生的主题。<br />\n样式严重参考 Bear，部分代码严重参考<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQv\"> NexT</span>。</p>\n<p>Hexo 的默认及常用渲染器均使用 <code>highlight.js</code>  进行代码高亮，而我喜欢 <code>Prism.js</code> ，故重写了一个渲染器配合主题食用。<br />\n渲染器取名 <code>multi</code> ，因为集成了很多很多很多 <code>markdown-it</code>  插件，以及压缩静态文件的功能。<br />\n（最新版的默认渲染器也支持 <code>Prism.js</code>  了，可喜可贺，但不想用，哈哈哈哈哈哈哈</p>\n<p>墙内 Github Pages 访问速度时而感人，所以用了<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5qc2RlbGl2ci5jb20v\"> jsDelivr</span> 加速，主要是因为它可以按需合并依赖文件。</p>\n<h1 id=\"快速安装\"><a class=\"anchor\" href=\"#快速安装\">#</a> 快速安装</h1>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>top</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># cd your-blog</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> clone https://github.com/amehime/hexo-theme-shoka.git ./themes/shoka</pre></td></tr></table></figure><p>打开主题目录，内有 <code>example</code>  文件夹，提供了配置文件的 demo 供参考。</p>\n<h1 id=\"安装依赖插件\"><a class=\"anchor\" href=\"#安装依赖插件\">#</a> 安装依赖插件</h1>\n<p>在应用主题之前，必须至少安装 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by1yZW5kZXJlci1tdWx0aS1tYXJrZG93bi1pdA==\">hexo-renderer-multi-markdown-it</span> 渲染插件 和 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvaGV4by1hdXRvcHJlZml4ZXI=\">hexo-autoprefixer</span>。</p>\n<p><a href=\"dependents/\">插件安装与配置教程戳此</a></p>\n<h1 id=\"应用主题\"><a class=\"anchor\" href=\"#应用主题\">#</a> 应用主题</h1>\n<h2 id=\"修改站点配置\"><a class=\"anchor\" href=\"#修改站点配置\">#</a> 修改站点配置</h2>\n<p>修改站点配置文件 <code>&lt;root&gt;/_config.yml</code> ，把主题改为  <code>shoka</code></p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>top</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">theme</span><span class=\"token punctuation\">:</span> shoka</pre></td></tr></table></figure><h2 id=\"修改主题配置\"><a class=\"anchor\" href=\"#修改主题配置\">#</a> 修改主题配置</h2>\n<p>主题配置的所有参数在 <code>&lt;root&gt;/themes/shoka/_config.yml</code>  文件中。</p>\n<p>为了方便主题升级，请在根目录新建一个 yml 文件，命名为 <code>_config.shoka.yml</code> 。<br />\n也就是说，所有主题的自定义配置均保存于 <code>&lt;root&gt;/_config.shoka.yml</code>  文件。</p>\n<p><a href=\"config/\">主题的基础配置可以参考这里</a><br />\n<a href=\"display/\">界面显示相关的配置参考这里</a></p>\n<h1 id=\"更新记录\"><a class=\"anchor\" href=\"#更新记录\">#</a> 更新记录</h1>\n<p>标签含义：<br />\n❗ 需要手动操作的更新信息<br />\n⚠️ 需要注意的更新信息<br />\n🔧 已修复的问题<br />\n⌛ TODO</p>\n<h2 id=\"024-025\"><a class=\"anchor\" href=\"#024-025\">#</a> 0.2.4 👉 0.2.5</h2>\n<p>💡  避免直接修改主题文件，添加各种自定义：</p>\n<ul>\n<li><a href=\"display/#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E9%85%8D%E8%89%B2\">样式</a>：包括配色、<a href=\"config/#iconfont%E5%9B%BE%E6%A0%87\">icon</a>、其他自定义样式</li>\n<li>图片：包括<a href=\"display/#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98%E5%9B%BE%E7%89%87\">主题图片</a>、<a href=\"config/#%E9%9A%8F%E6%9C%BA%E5%9B%BE%E5%BA%93\">随机图库</a></li>\n</ul>\n<p>🔧 修复一些 BUG</p>\n<h2 id=\"023-024\"><a class=\"anchor\" href=\"#023-024\">#</a> 0.2.3 👉 0.2.4</h2>\n<p>⚠️ <strong>评论功能更新</strong></p>\n<ul>\n<li>MiniValine 魔改版更新至 beta10，修改过主题默认 <code>_config.yml</code>  的同学，记得更新末尾的 <code>vendors</code>  到最新哦</li>\n<li>❗ 评论相关的配置有更新，<a href=\"config/#%E6%96%87%E7%AB%A0%E8%AF%84%E8%AE%BA\">配置戳此</a>\n<ul>\n<li>主要增加的 Tag 配置，现在可以各种自定义啦</li>\n</ul>\n</li>\n</ul>\n<p>⚠️ 配置新增</p>\n<ul>\n<li>夜间模式 <code>darkmode</code> ，<a href=\"config/#%E5%A4%9C%E9%97%B4%E6%A8%A1%E5%BC%8F\">配置戳此</a></li>\n<li>自动定位 <code>auto_scroll</code> ，<a href=\"config/#%E8%87%AA%E5%8A%A8%E5%AE%9A%E4%BD%8D\">配置戳此</a></li>\n<li>图床 API 设置 <code>image_server</code> ，<a href=\"config/#%E9%9A%8F%E6%9C%BA%E5%9B%BE%E5%BA%93\">配置戳此</a></li>\n</ul>\n<p>⚠️ 背景音乐功能增强，<a href=\"config/#%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90\">配置戳此</a></p>\n<ul>\n<li>可以添加多个播放列表</li>\n<li>加了一些控制按钮</li>\n</ul>\n<p>⚠️ 增加 <code>media</code>  标签，在文章中插入音频和视频播放列表，<a href=\"special/#media%E5%A4%9A%E5%AA%92%E4%BD%93\">方法戳此</a><br />\n⌛  视频播放器有待增强（显示分段标签，字幕）</p>\n<p>🔧 随机图库支持非渣浪图床的任意图片<br />\n🔧 还有许多小 BUG</p>\n<h2 id=\"022-023\"><a class=\"anchor\" href=\"#022-023\">#</a> 0.2.2 👉 0.2.3</h2>\n<p>❗ 增加主题文件外自定义语言包的功能，<a href=\"display/#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E5%8C%85\">配置戳此</a><br />\n🔧 提高低版本浏览器兼容性</p>\n<h2 id=\"021-022\"><a class=\"anchor\" href=\"#021-022\">#</a> 0.2.1 👉 0.2.2</h2>\n<p>⚠️ 弃用 <code>mediumzoom</code> ，改成 <code>fancybox</code> ，<a href=\"display/#%E5%9B%BE%E7%89%87%E5%B1%95%E7%A4%BA%E4%B8%8E%E7%9B%B8%E5%86%8C\">配置戳此</a><br />\n💡  增加语言包： <code>繁体中文</code> 和 <code>日语</code> <br />\n💡  quiz 功能优化，根据语言显示题型标签<br />\n🔧 修复评论功能中反复初始化 leancloud-storage<br />\n🔧 修复 <code>audio: false</code>  时不能隐藏播放按钮、停止播放</p>\n<h2 id=\"02-021\"><a class=\"anchor\" href=\"#02-021\">#</a> 0.2 👉 0.2.1</h2>\n<p>⚠️ 配置文件添加  <code>loader</code>  参数，<a href=\"config/#%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB\">配置戳此</a><br />\n💡  二级 list 区别显示<br />\n🔧 修复浏览位置定位 BUG<br />\n🔧 修复 firework 动画延迟<br />\n🔧 优化评论功能</p>\n<h2 id=\"019-02\"><a class=\"anchor\" href=\"#019-02\">#</a> 0.1.9 👉 0.2</h2>\n<p>⚠️  <strong>评论功能大改</strong></p>\n<ul>\n<li>弃用不开源的 Valine，改用 MiniValine，并且进行了魔改，<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvTWluaVZhbGluZQ==\">项目戳此</span><br />\n主要是大量压缩了代码，弃用一些花里胡哨的功能，又加了一些别的花里胡哨的功能。</li>\n<li>为防止泄露用户邮箱、IP 等隐私信息，弃用 QQ 号获取昵称及头像。<br />\n❗ 同时需要手动进行一些迁移，<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2ltYWVnb28vVmFsaW5l\">具体步骤戳此</span></li>\n<li>❗ 评论相关的配置亦有更新，<a href=\"config/#%E6%96%87%E7%AB%A0%E8%AF%84%E8%AE%BA\">配置戳此</a></li>\n</ul>\n<p>⚠️ 增加单击页面烟花效果，<a href=\"config/#%E9%A1%B5%E9%9D%A2%E7%89%B9%E6%95%88\">配置戳此</a><br />\n💡  弃用 Velocity，改用 anime.js，方便未来添加更多<span class=\"spoiler\" title=\"你知道得太多了\">花里胡哨的</span>功能<span class=\"spoiler\" title=\"你知道得太多了\">严重拖慢页面滑行速度</span><br />\n🔧 新增多枚 icon，包括豆瓣 <code>i-douban</code>  等<br />\n🔧 一些显示问题</p>\n",
            "tags": [
                "计算机科学",
                "主题作者的教程配置",
                "Theme Shoka Documentation",
                "Hexo",
                "教程"
            ]
        }
    ]
}